var Tm=Object.defineProperty;var Mm=(e,t,n)=>t in e?Tm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ve=(e,t,n)=>Mm(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tf={exports:{}},ol={},Mf={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=Symbol.for("react.element"),Fm=Symbol.for("react.portal"),zm=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),Im=Symbol.for("react.profiler"),Dm=Symbol.for("react.provider"),Om=Symbol.for("react.context"),Lm=Symbol.for("react.forward_ref"),Bm=Symbol.for("react.suspense"),$m=Symbol.for("react.memo"),Um=Symbol.for("react.lazy"),cd=Symbol.iterator;function Km(e){return e===null||typeof e!="object"?null:(e=cd&&e[cd]||e["@@iterator"],typeof e=="function"?e:null)}var Ff={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zf=Object.assign,Af={};function wi(e,t,n){this.props=e,this.context=t,this.refs=Af,this.updater=n||Ff}wi.prototype.isReactComponent={};wi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function If(){}If.prototype=wi.prototype;function Fu(e,t,n){this.props=e,this.context=t,this.refs=Af,this.updater=n||Ff}var zu=Fu.prototype=new If;zu.constructor=Fu;zf(zu,wi.prototype);zu.isPureReactComponent=!0;var dd=Array.isArray,Df=Object.prototype.hasOwnProperty,Au={current:null},Of={key:!0,ref:!0,__self:!0,__source:!0};function Lf(e,t,n){var r,s={},o=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)Df.call(t,r)&&!Of.hasOwnProperty(r)&&(s[r]=t[r]);var f=arguments.length-2;if(f===1)s.children=n;else if(1<f){for(var p=Array(f),y=0;y<f;y++)p[y]=arguments[y+2];s.children=p}if(e&&e.defaultProps)for(r in f=e.defaultProps,f)s[r]===void 0&&(s[r]=f[r]);return{$$typeof:js,type:e,key:o,ref:u,props:s,_owner:Au.current}}function Wm(e,t){return{$$typeof:js,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Iu(e){return typeof e=="object"&&e!==null&&e.$$typeof===js}function Vm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var fd=/\/+/g;function ta(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Vm(""+e.key):t.toString(36)}function So(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case js:case Fm:u=!0}}if(u)return u=e,s=s(u),e=r===""?"."+ta(u,0):r,dd(s)?(n="",e!=null&&(n=e.replace(fd,"$&/")+"/"),So(s,t,n,"",function(y){return y})):s!=null&&(Iu(s)&&(s=Wm(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(fd,"$&/")+"/")+e)),t.push(s)),1;if(u=0,r=r===""?".":r+":",dd(e))for(var f=0;f<e.length;f++){o=e[f];var p=r+ta(o,f);u+=So(o,t,n,p,s)}else if(p=Km(e),typeof p=="function")for(e=p.call(e),f=0;!(o=e.next()).done;)o=o.value,p=r+ta(o,f++),u+=So(o,t,n,p,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function to(e,t,n){if(e==null)return e;var r=[],s=0;return So(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Hm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},jo={transition:null},qm={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:jo,ReactCurrentOwner:Au};function Bf(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:to,forEach:function(e,t,n){to(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return to(e,function(){t++}),t},toArray:function(e){return to(e,function(t){return t})||[]},only:function(e){if(!Iu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=wi;we.Fragment=zm;we.Profiler=Im;we.PureComponent=Fu;we.StrictMode=Am;we.Suspense=Bm;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qm;we.act=Bf;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zf({},e.props),s=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=Au.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var f=e.type.defaultProps;for(p in t)Df.call(t,p)&&!Of.hasOwnProperty(p)&&(r[p]=t[p]===void 0&&f!==void 0?f[p]:t[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){f=Array(p);for(var y=0;y<p;y++)f[y]=arguments[y+2];r.children=f}return{$$typeof:js,type:e.type,key:s,ref:o,props:r,_owner:u}};we.createContext=function(e){return e={$$typeof:Om,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dm,_context:e},e.Consumer=e};we.createElement=Lf;we.createFactory=function(e){var t=Lf.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Lm,render:e}};we.isValidElement=Iu;we.lazy=function(e){return{$$typeof:Um,_payload:{_status:-1,_result:e},_init:Hm}};we.memo=function(e,t){return{$$typeof:$m,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=jo.transition;jo.transition={};try{e()}finally{jo.transition=t}};we.unstable_act=Bf;we.useCallback=function(e,t){return kt.current.useCallback(e,t)};we.useContext=function(e){return kt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};we.useEffect=function(e,t){return kt.current.useEffect(e,t)};we.useId=function(){return kt.current.useId()};we.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return kt.current.useMemo(e,t)};we.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};we.useRef=function(e){return kt.current.useRef(e)};we.useState=function(e){return kt.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return kt.current.useTransition()};we.version="18.3.1";Mf.exports=we;var J=Mf.exports;const Yi=Pf(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm=J,Ym=Symbol.for("react.element"),Xm=Symbol.for("react.fragment"),Gm=Object.prototype.hasOwnProperty,Jm=Qm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zm={key:!0,ref:!0,__self:!0,__source:!0};function $f(e,t,n){var r,s={},o=null,u=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)Gm.call(t,r)&&!Zm.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ym,type:e,key:o,ref:u,props:s,_owner:Jm.current}}ol.Fragment=Xm;ol.jsx=$f;ol.jsxs=$f;Tf.exports=ol;var a=Tf.exports,Uf={exports:{}},Dt={},Kf={exports:{}},Wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,de){var re=te.length;te.push(de);e:for(;0<re;){var Re=re-1>>>1,G=te[Re];if(0<s(G,de))te[Re]=de,te[re]=G,re=Re;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var de=te[0],re=te.pop();if(re!==de){te[0]=re;e:for(var Re=0,G=te.length,Te=G>>>1;Re<Te;){var Be=2*(Re+1)-1,Ge=te[Be],ge=Be+1,rt=te[ge];if(0>s(Ge,re))ge<G&&0>s(rt,Ge)?(te[Re]=rt,te[ge]=re,Re=ge):(te[Re]=Ge,te[Be]=re,Re=Be);else if(ge<G&&0>s(rt,re))te[Re]=rt,te[ge]=re,Re=ge;else break e}}return de}function s(te,de){var re=te.sortIndex-de.sortIndex;return re!==0?re:te.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var p=[],y=[],k=1,x=null,v=3,O=!1,B=!1,N=!1,H=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(te){for(var de=n(y);de!==null;){if(de.callback===null)r(y);else if(de.startTime<=te)r(y),de.sortIndex=de.expirationTime,t(p,de);else break;de=n(y)}}function I(te){if(N=!1,j(te),!B)if(n(p)!==null)B=!0,Lt($);else{var de=n(y);de!==null&&hn(I,de.startTime-te)}}function $(te,de){B=!1,N&&(N=!1,g(Y),Y=-1),O=!0;var re=v;try{for(j(de),x=n(p);x!==null&&(!(x.expirationTime>de)||te&&!pe());){var Re=x.callback;if(typeof Re=="function"){x.callback=null,v=x.priorityLevel;var G=Re(x.expirationTime<=de);de=e.unstable_now(),typeof G=="function"?x.callback=G:x===n(p)&&r(p),j(de)}else r(p);x=n(p)}if(x!==null)var Te=!0;else{var Be=n(y);Be!==null&&hn(I,Be.startTime-de),Te=!1}return Te}finally{x=null,v=re,O=!1}}var D=!1,W=null,Y=-1,ee=5,le=-1;function pe(){return!(e.unstable_now()-le<ee)}function Ne(){if(W!==null){var te=e.unstable_now();le=te;var de=!0;try{de=W(!0,te)}finally{de?_e():(D=!1,W=null)}}else D=!1}var _e;if(typeof w=="function")_e=function(){w(Ne)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ze=Le.port2;Le.port1.onmessage=Ne,_e=function(){Ze.postMessage(null)}}else _e=function(){H(Ne,0)};function Lt(te){W=te,D||(D=!0,_e())}function hn(te,de){Y=H(function(){te(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){B||O||(B=!0,Lt($))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(te){switch(v){case 1:case 2:case 3:var de=3;break;default:de=v}var re=v;v=de;try{return te()}finally{v=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,de){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var re=v;v=te;try{return de()}finally{v=re}},e.unstable_scheduleCallback=function(te,de,re){var Re=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Re+re:Re):re=Re,te){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=re+G,te={id:k++,callback:de,priorityLevel:te,startTime:re,expirationTime:G,sortIndex:-1},re>Re?(te.sortIndex=re,t(y,te),n(p)===null&&te===n(y)&&(N?(g(Y),Y=-1):N=!0,hn(I,re-Re))):(te.sortIndex=G,t(p,te),B||O||(B=!0,Lt($))),te},e.unstable_shouldYield=pe,e.unstable_wrapCallback=function(te){var de=v;return function(){var re=v;v=de;try{return te.apply(this,arguments)}finally{v=re}}}})(Wf);Kf.exports=Wf;var ey=Kf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty=J,It=ey;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vf=new Set,ss={};function zr(e,t){hi(e,t),hi(e+"Capture",t)}function hi(e,t){for(ss[e]=t,e=0;e<t.length;e++)Vf.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Da=Object.prototype.hasOwnProperty,ny=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hd={},pd={};function ry(e){return Da.call(pd,e)?!0:Da.call(hd,e)?!1:ny.test(e)?pd[e]=!0:(hd[e]=!0,!1)}function iy(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sy(e,t,n,r){if(t===null||typeof t>"u"||iy(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,r,s,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ct[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ct[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ct[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ct[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ct[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ct[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ct[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ct[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ct[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Du=/[\-:]([a-z])/g;function Ou(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Du,Ou);ct[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Du,Ou);ct[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Du,Ou);ct[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ct[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});ct.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ct[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lu(e,t,n,r){var s=ct.hasOwnProperty(t)?ct[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sy(t,n,s,r)&&(n=null),r||s===null?ry(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Fn=ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,no=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),Bu=Symbol.for("react.strict_mode"),Oa=Symbol.for("react.profiler"),Hf=Symbol.for("react.provider"),qf=Symbol.for("react.context"),$u=Symbol.for("react.forward_ref"),La=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),Uu=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),Qf=Symbol.for("react.offscreen"),md=Symbol.iterator;function zi(e){return e===null||typeof e!="object"?null:(e=md&&e[md]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,na;function Vi(e){if(na===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);na=t&&t[1]||""}return`
`+na+e}var ra=!1;function ia(e,t){if(!e||ra)return"";ra=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var s=y.stack.split(`
`),o=r.stack.split(`
`),u=s.length-1,f=o.length-1;1<=u&&0<=f&&s[u]!==o[f];)f--;for(;1<=u&&0<=f;u--,f--)if(s[u]!==o[f]){if(u!==1||f!==1)do if(u--,f--,0>f||s[u]!==o[f]){var p=`
`+s[u].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=u&&0<=f);break}}}finally{ra=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vi(e):""}function oy(e){switch(e.tag){case 5:return Vi(e.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 2:case 15:return e=ia(e.type,!1),e;case 11:return e=ia(e.type.render,!1),e;case 1:return e=ia(e.type,!0),e;default:return""}}function $a(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xr:return"Fragment";case Yr:return"Portal";case Oa:return"Profiler";case Bu:return"StrictMode";case La:return"Suspense";case Ba:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qf:return(e.displayName||"Context")+".Consumer";case Hf:return(e._context.displayName||"Context")+".Provider";case $u:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uu:return t=e.displayName||null,t!==null?t:$a(e.type)||"Memo";case Vn:t=e._payload,e=e._init;try{return $a(e(t))}catch{}}return null}function ly(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $a(t);case 8:return t===Bu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ay(e){var t=Yf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ro(e){e._valueTracker||(e._valueTracker=ay(e))}function Xf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Yf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ua(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gf(e,t){t=t.checked,t!=null&&Lu(e,"checked",t,!1)}function Ka(e,t){Gf(e,t);var n=sr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Wa(e,t.type,sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Wa(e,t,n){(t!=="number"||zo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Hi=Array.isArray;function li(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Va(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Hi(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sr(n)}}function Jf(e,t){var n=sr(t.value),r=sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ha(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var io,eh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(io=io||document.createElement("div"),io.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=io.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function os(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Xi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uy=["Webkit","ms","Moz","O"];Object.keys(Xi).forEach(function(e){uy.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xi[t]=Xi[e]})});function th(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Xi.hasOwnProperty(e)&&Xi[e]?(""+t).trim():t+"px"}function nh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=th(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var cy=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(e,t){if(t){if(cy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Qa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ya=null;function Ku(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xa=null,ai=null,ui=null;function wd(e){if(e=_s(e)){if(typeof Xa!="function")throw Error(q(280));var t=e.stateNode;t&&(t=dl(t),Xa(e.stateNode,e.type,t))}}function rh(e){ai?ui?ui.push(e):ui=[e]:ai=e}function ih(){if(ai){var e=ai,t=ui;if(ui=ai=null,wd(e),t)for(e=0;e<t.length;e++)wd(t[e])}}function sh(e,t){return e(t)}function oh(){}var sa=!1;function lh(e,t,n){if(sa)return e(t,n);sa=!0;try{return sh(e,t,n)}finally{sa=!1,(ai!==null||ui!==null)&&(oh(),ih())}}function ls(e,t){var n=e.stateNode;if(n===null)return null;var r=dl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var Ga=!1;if(En)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{Ga=!1}function dy(e,t,n,r,s,o,u,f,p){var y=Array.prototype.slice.call(arguments,3);try{t.apply(n,y)}catch(k){this.onError(k)}}var Gi=!1,Ao=null,Io=!1,Ja=null,fy={onError:function(e){Gi=!0,Ao=e}};function hy(e,t,n,r,s,o,u,f,p){Gi=!1,Ao=null,dy.apply(fy,arguments)}function py(e,t,n,r,s,o,u,f,p){if(hy.apply(this,arguments),Gi){if(Gi){var y=Ao;Gi=!1,Ao=null}else throw Error(q(198));Io||(Io=!0,Ja=y)}}function Ar(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ah(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sd(e){if(Ar(e)!==e)throw Error(q(188))}function my(e){var t=e.alternate;if(!t){if(t=Ar(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Sd(s),e;if(o===r)return Sd(s),t;o=o.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=o;else{for(var u=!1,f=s.child;f;){if(f===n){u=!0,n=s,r=o;break}if(f===r){u=!0,r=s,n=o;break}f=f.sibling}if(!u){for(f=o.child;f;){if(f===n){u=!0,n=o,r=s;break}if(f===r){u=!0,r=o,n=s;break}f=f.sibling}if(!u)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function uh(e){return e=my(e),e!==null?ch(e):null}function ch(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ch(e);if(t!==null)return t;e=e.sibling}return null}var dh=It.unstable_scheduleCallback,jd=It.unstable_cancelCallback,yy=It.unstable_shouldYield,vy=It.unstable_requestPaint,Xe=It.unstable_now,gy=It.unstable_getCurrentPriorityLevel,Wu=It.unstable_ImmediatePriority,fh=It.unstable_UserBlockingPriority,Do=It.unstable_NormalPriority,xy=It.unstable_LowPriority,hh=It.unstable_IdlePriority,ll=null,dn=null;function wy(e){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(ll,e,void 0,(e.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:ky,Sy=Math.log,jy=Math.LN2;function ky(e){return e>>>=0,e===0?32:31-(Sy(e)/jy|0)|0}var so=64,oo=4194304;function qi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,u=n&268435455;if(u!==0){var f=u&~s;f!==0?r=qi(f):(o&=u,o!==0&&(r=qi(o)))}else u=n&~s,u!==0?r=qi(u):o!==0&&(r=qi(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-en(t),s=1<<n,r|=e[n],t&=~s;return r}function by(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _y(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-en(o),f=1<<u,p=s[u];p===-1?(!(f&n)||f&r)&&(s[u]=by(f,t)):p<=t&&(e.expiredLanes|=f),o&=~f}}function Za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ph(){var e=so;return so<<=1,!(so&4194240)&&(so=64),e}function oa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ks(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function Ry(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-en(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Vu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-en(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Pe=0;function mh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yh,Hu,vh,gh,xh,eu=!1,lo=[],Gn=null,Jn=null,Zn=null,as=new Map,us=new Map,qn=[],Cy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kd(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":as.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":us.delete(t.pointerId)}}function Ii(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=_s(t),t!==null&&Hu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ey(e,t,n,r,s){switch(t){case"focusin":return Gn=Ii(Gn,e,t,n,r,s),!0;case"dragenter":return Jn=Ii(Jn,e,t,n,r,s),!0;case"mouseover":return Zn=Ii(Zn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return as.set(o,Ii(as.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,us.set(o,Ii(us.get(o)||null,e,t,n,r,s)),!0}return!1}function wh(e){var t=br(e.target);if(t!==null){var n=Ar(t);if(n!==null){if(t=n.tag,t===13){if(t=ah(n),t!==null){e.blockedOn=t,xh(e.priority,function(){vh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ko(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ya=r,n.target.dispatchEvent(r),Ya=null}else return t=_s(n),t!==null&&Hu(t),e.blockedOn=n,!1;t.shift()}return!0}function bd(e,t,n){ko(e)&&n.delete(t)}function Ny(){eu=!1,Gn!==null&&ko(Gn)&&(Gn=null),Jn!==null&&ko(Jn)&&(Jn=null),Zn!==null&&ko(Zn)&&(Zn=null),as.forEach(bd),us.forEach(bd)}function Di(e,t){e.blockedOn===t&&(e.blockedOn=null,eu||(eu=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,Ny)))}function cs(e){function t(s){return Di(s,e)}if(0<lo.length){Di(lo[0],e);for(var n=1;n<lo.length;n++){var r=lo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&Di(Gn,e),Jn!==null&&Di(Jn,e),Zn!==null&&Di(Zn,e),as.forEach(t),us.forEach(t),n=0;n<qn.length;n++)r=qn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<qn.length&&(n=qn[0],n.blockedOn===null);)wh(n),n.blockedOn===null&&qn.shift()}var ci=Fn.ReactCurrentBatchConfig,Lo=!0;function Py(e,t,n,r){var s=Pe,o=ci.transition;ci.transition=null;try{Pe=1,qu(e,t,n,r)}finally{Pe=s,ci.transition=o}}function Ty(e,t,n,r){var s=Pe,o=ci.transition;ci.transition=null;try{Pe=4,qu(e,t,n,r)}finally{Pe=s,ci.transition=o}}function qu(e,t,n,r){if(Lo){var s=tu(e,t,n,r);if(s===null)ya(e,t,r,Bo,n),kd(e,r);else if(Ey(s,e,t,n,r))r.stopPropagation();else if(kd(e,r),t&4&&-1<Cy.indexOf(e)){for(;s!==null;){var o=_s(s);if(o!==null&&yh(o),o=tu(e,t,n,r),o===null&&ya(e,t,r,Bo,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else ya(e,t,r,null,n)}}var Bo=null;function tu(e,t,n,r){if(Bo=null,e=Ku(r),e=br(e),e!==null)if(t=Ar(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ah(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bo=e,null}function Sh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gy()){case Wu:return 1;case fh:return 4;case Do:case xy:return 16;case hh:return 536870912;default:return 16}default:return 16}}var Yn=null,Qu=null,bo=null;function jh(){if(bo)return bo;var e,t=Qu,n=t.length,r,s="value"in Yn?Yn.value:Yn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===s[o-r];r++);return bo=s.slice(e,1<r?1-r:void 0)}function _o(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ao(){return!0}function _d(){return!1}function Ot(e){function t(n,r,s,o,u){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ao:_d,this.isPropagationStopped=_d,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),t}var Si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=Ot(Si),bs=We({},Si,{view:0,detail:0}),My=Ot(bs),la,aa,Oi,al=We({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oi&&(Oi&&e.type==="mousemove"?(la=e.screenX-Oi.screenX,aa=e.screenY-Oi.screenY):aa=la=0,Oi=e),la)},movementY:function(e){return"movementY"in e?e.movementY:aa}}),Rd=Ot(al),Fy=We({},al,{dataTransfer:0}),zy=Ot(Fy),Ay=We({},bs,{relatedTarget:0}),ua=Ot(Ay),Iy=We({},Si,{animationName:0,elapsedTime:0,pseudoElement:0}),Dy=Ot(Iy),Oy=We({},Si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ly=Ot(Oy),By=We({},Si,{data:0}),Cd=Ot(By),$y={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ky={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ky[e])?!!t[e]:!1}function Xu(){return Wy}var Vy=We({},bs,{key:function(e){if(e.key){var t=$y[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_o(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(e){return e.type==="keypress"?_o(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_o(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hy=Ot(Vy),qy=We({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ed=Ot(qy),Qy=We({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),Yy=Ot(Qy),Xy=We({},Si,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gy=Ot(Xy),Jy=We({},al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zy=Ot(Jy),ev=[9,13,27,32],Gu=En&&"CompositionEvent"in window,Ji=null;En&&"documentMode"in document&&(Ji=document.documentMode);var tv=En&&"TextEvent"in window&&!Ji,kh=En&&(!Gu||Ji&&8<Ji&&11>=Ji),Nd=" ",Pd=!1;function bh(e,t){switch(e){case"keyup":return ev.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _h(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function nv(e,t){switch(e){case"compositionend":return _h(t);case"keypress":return t.which!==32?null:(Pd=!0,Nd);case"textInput":return e=t.data,e===Nd&&Pd?null:e;default:return null}}function rv(e,t){if(Gr)return e==="compositionend"||!Gu&&bh(e,t)?(e=jh(),bo=Qu=Yn=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kh&&t.locale!=="ko"?null:t.data;default:return null}}var iv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Td(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iv[e.type]:t==="textarea"}function Rh(e,t,n,r){rh(r),t=$o(t,"onChange"),0<t.length&&(n=new Yu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Zi=null,ds=null;function sv(e){Dh(e,0)}function ul(e){var t=ei(e);if(Xf(t))return e}function ov(e,t){if(e==="change")return t}var Ch=!1;if(En){var ca;if(En){var da="oninput"in document;if(!da){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),da=typeof Md.oninput=="function"}ca=da}else ca=!1;Ch=ca&&(!document.documentMode||9<document.documentMode)}function Fd(){Zi&&(Zi.detachEvent("onpropertychange",Eh),ds=Zi=null)}function Eh(e){if(e.propertyName==="value"&&ul(ds)){var t=[];Rh(t,ds,e,Ku(e)),lh(sv,t)}}function lv(e,t,n){e==="focusin"?(Fd(),Zi=t,ds=n,Zi.attachEvent("onpropertychange",Eh)):e==="focusout"&&Fd()}function av(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ul(ds)}function uv(e,t){if(e==="click")return ul(t)}function cv(e,t){if(e==="input"||e==="change")return ul(t)}function dv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:dv;function fs(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Da.call(t,s)||!nn(e[s],t[s]))return!1}return!0}function zd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ad(e,t){var n=zd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zd(n)}}function Nh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ph(){for(var e=window,t=zo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zo(e.document)}return t}function Ju(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fv(e){var t=Ph(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Nh(n.ownerDocument.documentElement,n)){if(r!==null&&Ju(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Ad(n,o);var u=Ad(n,r);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hv=En&&"documentMode"in document&&11>=document.documentMode,Jr=null,nu=null,es=null,ru=!1;function Id(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ru||Jr==null||Jr!==zo(r)||(r=Jr,"selectionStart"in r&&Ju(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),es&&fs(es,r)||(es=r,r=$o(nu,"onSelect"),0<r.length&&(t=new Yu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jr)))}function uo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zr={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},fa={},Th={};En&&(Th=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function cl(e){if(fa[e])return fa[e];if(!Zr[e])return e;var t=Zr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Th)return fa[e]=t[n];return e}var Mh=cl("animationend"),Fh=cl("animationiteration"),zh=cl("animationstart"),Ah=cl("transitionend"),Ih=new Map,Dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(e,t){Ih.set(e,t),zr(t,[e])}for(var ha=0;ha<Dd.length;ha++){var pa=Dd[ha],pv=pa.toLowerCase(),mv=pa[0].toUpperCase()+pa.slice(1);lr(pv,"on"+mv)}lr(Mh,"onAnimationEnd");lr(Fh,"onAnimationIteration");lr(zh,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(Ah,"onTransitionEnd");hi("onMouseEnter",["mouseout","mouseover"]);hi("onMouseLeave",["mouseout","mouseover"]);hi("onPointerEnter",["pointerout","pointerover"]);hi("onPointerLeave",["pointerout","pointerover"]);zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qi));function Od(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,py(r,t,void 0,e),e.currentTarget=null}function Dh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var u=r.length-1;0<=u;u--){var f=r[u],p=f.instance,y=f.currentTarget;if(f=f.listener,p!==o&&s.isPropagationStopped())break e;Od(s,f,y),o=p}else for(u=0;u<r.length;u++){if(f=r[u],p=f.instance,y=f.currentTarget,f=f.listener,p!==o&&s.isPropagationStopped())break e;Od(s,f,y),o=p}}}if(Io)throw e=Ja,Io=!1,Ja=null,e}function Ae(e,t){var n=t[au];n===void 0&&(n=t[au]=new Set);var r=e+"__bubble";n.has(r)||(Oh(t,e,2,!1),n.add(r))}function ma(e,t,n){var r=0;t&&(r|=4),Oh(n,e,r,t)}var co="_reactListening"+Math.random().toString(36).slice(2);function hs(e){if(!e[co]){e[co]=!0,Vf.forEach(function(n){n!=="selectionchange"&&(yv.has(n)||ma(n,!1,e),ma(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[co]||(t[co]=!0,ma("selectionchange",!1,t))}}function Oh(e,t,n,r){switch(Sh(t)){case 1:var s=Py;break;case 4:s=Ty;break;default:s=qu}n=s.bind(null,t,n,e),s=void 0,!Ga||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ya(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var f=r.stateNode.containerInfo;if(f===s||f.nodeType===8&&f.parentNode===s)break;if(u===4)for(u=r.return;u!==null;){var p=u.tag;if((p===3||p===4)&&(p=u.stateNode.containerInfo,p===s||p.nodeType===8&&p.parentNode===s))return;u=u.return}for(;f!==null;){if(u=br(f),u===null)return;if(p=u.tag,p===5||p===6){r=o=u;continue e}f=f.parentNode}}r=r.return}lh(function(){var y=o,k=Ku(n),x=[];e:{var v=Ih.get(e);if(v!==void 0){var O=Yu,B=e;switch(e){case"keypress":if(_o(n)===0)break e;case"keydown":case"keyup":O=Hy;break;case"focusin":B="focus",O=ua;break;case"focusout":B="blur",O=ua;break;case"beforeblur":case"afterblur":O=ua;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Rd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=zy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=Yy;break;case Mh:case Fh:case zh:O=Dy;break;case Ah:O=Gy;break;case"scroll":O=My;break;case"wheel":O=Zy;break;case"copy":case"cut":case"paste":O=Ly;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Ed}var N=(t&4)!==0,H=!N&&e==="scroll",g=N?v!==null?v+"Capture":null:v;N=[];for(var w=y,j;w!==null;){j=w;var I=j.stateNode;if(j.tag===5&&I!==null&&(j=I,g!==null&&(I=ls(w,g),I!=null&&N.push(ps(w,I,j)))),H)break;w=w.return}0<N.length&&(v=new O(v,B,null,n,k),x.push({event:v,listeners:N}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",v&&n!==Ya&&(B=n.relatedTarget||n.fromElement)&&(br(B)||B[Nn]))break e;if((O||v)&&(v=k.window===k?k:(v=k.ownerDocument)?v.defaultView||v.parentWindow:window,O?(B=n.relatedTarget||n.toElement,O=y,B=B?br(B):null,B!==null&&(H=Ar(B),B!==H||B.tag!==5&&B.tag!==6)&&(B=null)):(O=null,B=y),O!==B)){if(N=Rd,I="onMouseLeave",g="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(N=Ed,I="onPointerLeave",g="onPointerEnter",w="pointer"),H=O==null?v:ei(O),j=B==null?v:ei(B),v=new N(I,w+"leave",O,n,k),v.target=H,v.relatedTarget=j,I=null,br(k)===y&&(N=new N(g,w+"enter",B,n,k),N.target=j,N.relatedTarget=H,I=N),H=I,O&&B)t:{for(N=O,g=B,w=0,j=N;j;j=Wr(j))w++;for(j=0,I=g;I;I=Wr(I))j++;for(;0<w-j;)N=Wr(N),w--;for(;0<j-w;)g=Wr(g),j--;for(;w--;){if(N===g||g!==null&&N===g.alternate)break t;N=Wr(N),g=Wr(g)}N=null}else N=null;O!==null&&Ld(x,v,O,N,!1),B!==null&&H!==null&&Ld(x,H,B,N,!0)}}e:{if(v=y?ei(y):window,O=v.nodeName&&v.nodeName.toLowerCase(),O==="select"||O==="input"&&v.type==="file")var $=ov;else if(Td(v))if(Ch)$=cv;else{$=av;var D=lv}else(O=v.nodeName)&&O.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&($=uv);if($&&($=$(e,y))){Rh(x,$,n,k);break e}D&&D(e,v,y),e==="focusout"&&(D=v._wrapperState)&&D.controlled&&v.type==="number"&&Wa(v,"number",v.value)}switch(D=y?ei(y):window,e){case"focusin":(Td(D)||D.contentEditable==="true")&&(Jr=D,nu=y,es=null);break;case"focusout":es=nu=Jr=null;break;case"mousedown":ru=!0;break;case"contextmenu":case"mouseup":case"dragend":ru=!1,Id(x,n,k);break;case"selectionchange":if(hv)break;case"keydown":case"keyup":Id(x,n,k)}var W;if(Gu)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else Gr?bh(e,n)&&(Y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Y="onCompositionStart");Y&&(kh&&n.locale!=="ko"&&(Gr||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&Gr&&(W=jh()):(Yn=k,Qu="value"in Yn?Yn.value:Yn.textContent,Gr=!0)),D=$o(y,Y),0<D.length&&(Y=new Cd(Y,e,null,n,k),x.push({event:Y,listeners:D}),W?Y.data=W:(W=_h(n),W!==null&&(Y.data=W)))),(W=tv?nv(e,n):rv(e,n))&&(y=$o(y,"onBeforeInput"),0<y.length&&(k=new Cd("onBeforeInput","beforeinput",null,n,k),x.push({event:k,listeners:y}),k.data=W))}Dh(x,t)})}function ps(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $o(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ls(e,n),o!=null&&r.unshift(ps(e,o,s)),o=ls(e,t),o!=null&&r.push(ps(e,o,s))),e=e.return}return r}function Wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ld(e,t,n,r,s){for(var o=t._reactName,u=[];n!==null&&n!==r;){var f=n,p=f.alternate,y=f.stateNode;if(p!==null&&p===r)break;f.tag===5&&y!==null&&(f=y,s?(p=ls(n,o),p!=null&&u.unshift(ps(n,p,f))):s||(p=ls(n,o),p!=null&&u.push(ps(n,p,f)))),n=n.return}u.length!==0&&e.push({event:t,listeners:u})}var vv=/\r\n?/g,gv=/\u0000|\uFFFD/g;function Bd(e){return(typeof e=="string"?e:""+e).replace(vv,`
`).replace(gv,"")}function fo(e,t,n){if(t=Bd(t),Bd(e)!==t&&n)throw Error(q(425))}function Uo(){}var iu=null,su=null;function ou(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lu=typeof setTimeout=="function"?setTimeout:void 0,xv=typeof clearTimeout=="function"?clearTimeout:void 0,$d=typeof Promise=="function"?Promise:void 0,wv=typeof queueMicrotask=="function"?queueMicrotask:typeof $d<"u"?function(e){return $d.resolve(null).then(e).catch(Sv)}:lu;function Sv(e){setTimeout(function(){throw e})}function va(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),cs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);cs(t)}function er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ud(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ji=Math.random().toString(36).slice(2),cn="__reactFiber$"+ji,ms="__reactProps$"+ji,Nn="__reactContainer$"+ji,au="__reactEvents$"+ji,jv="__reactListeners$"+ji,kv="__reactHandles$"+ji;function br(e){var t=e[cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nn]||n[cn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ud(e);e!==null;){if(n=e[cn])return n;e=Ud(e)}return t}e=n,n=e.parentNode}return null}function _s(e){return e=e[cn]||e[Nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ei(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function dl(e){return e[ms]||null}var uu=[],ti=-1;function ar(e){return{current:e}}function Ie(e){0>ti||(e.current=uu[ti],uu[ti]=null,ti--)}function Fe(e,t){ti++,uu[ti]=e.current,e.current=t}var or={},vt=ar(or),Ct=ar(!1),Nr=or;function pi(e,t){var n=e.type.contextTypes;if(!n)return or;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Et(e){return e=e.childContextTypes,e!=null}function Ko(){Ie(Ct),Ie(vt)}function Kd(e,t,n){if(vt.current!==or)throw Error(q(168));Fe(vt,t),Fe(Ct,n)}function Lh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(q(108,ly(e)||"Unknown",s));return We({},n,r)}function Wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||or,Nr=vt.current,Fe(vt,e),Fe(Ct,Ct.current),!0}function Wd(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=Lh(e,t,Nr),r.__reactInternalMemoizedMergedChildContext=e,Ie(Ct),Ie(vt),Fe(vt,e)):Ie(Ct),Fe(Ct,n)}var jn=null,fl=!1,ga=!1;function Bh(e){jn===null?jn=[e]:jn.push(e)}function bv(e){fl=!0,Bh(e)}function ur(){if(!ga&&jn!==null){ga=!0;var e=0,t=Pe;try{var n=jn;for(Pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jn=null,fl=!1}catch(s){throw jn!==null&&(jn=jn.slice(e+1)),dh(Wu,ur),s}finally{Pe=t,ga=!1}}return null}var ni=[],ri=0,Vo=null,Ho=0,Ut=[],Kt=0,Pr=null,kn=1,bn="";function jr(e,t){ni[ri++]=Ho,ni[ri++]=Vo,Vo=e,Ho=t}function $h(e,t,n){Ut[Kt++]=kn,Ut[Kt++]=bn,Ut[Kt++]=Pr,Pr=e;var r=kn;e=bn;var s=32-en(r)-1;r&=~(1<<s),n+=1;var o=32-en(t)+s;if(30<o){var u=s-s%5;o=(r&(1<<u)-1).toString(32),r>>=u,s-=u,kn=1<<32-en(t)+s|n<<s|r,bn=o+e}else kn=1<<o|n<<s|r,bn=e}function Zu(e){e.return!==null&&(jr(e,1),$h(e,1,0))}function ec(e){for(;e===Vo;)Vo=ni[--ri],ni[ri]=null,Ho=ni[--ri],ni[ri]=null;for(;e===Pr;)Pr=Ut[--Kt],Ut[Kt]=null,bn=Ut[--Kt],Ut[Kt]=null,kn=Ut[--Kt],Ut[Kt]=null}var At=null,zt=null,Oe=!1,Zt=null;function Uh(e,t){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,zt=er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pr!==null?{id:kn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,At=e,zt=null,!0):!1;default:return!1}}function cu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function du(e){if(Oe){var t=zt;if(t){var n=t;if(!Vd(e,t)){if(cu(e))throw Error(q(418));t=er(n.nextSibling);var r=At;t&&Vd(e,t)?Uh(r,n):(e.flags=e.flags&-4097|2,Oe=!1,At=e)}}else{if(cu(e))throw Error(q(418));e.flags=e.flags&-4097|2,Oe=!1,At=e}}}function Hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function ho(e){if(e!==At)return!1;if(!Oe)return Hd(e),Oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ou(e.type,e.memoizedProps)),t&&(t=zt)){if(cu(e))throw Kh(),Error(q(418));for(;t;)Uh(e,t),t=er(t.nextSibling)}if(Hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zt=er(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=At?er(e.stateNode.nextSibling):null;return!0}function Kh(){for(var e=zt;e;)e=er(e.nextSibling)}function mi(){zt=At=null,Oe=!1}function tc(e){Zt===null?Zt=[e]:Zt.push(e)}var _v=Fn.ReactCurrentBatchConfig;function Li(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var f=s.refs;u===null?delete f[o]:f[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function po(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qd(e){var t=e._init;return t(e._payload)}function Wh(e){function t(g,w){if(e){var j=g.deletions;j===null?(g.deletions=[w],g.flags|=16):j.push(w)}}function n(g,w){if(!e)return null;for(;w!==null;)t(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function s(g,w){return g=ir(g,w),g.index=0,g.sibling=null,g}function o(g,w,j){return g.index=j,e?(j=g.alternate,j!==null?(j=j.index,j<w?(g.flags|=2,w):j):(g.flags|=2,w)):(g.flags|=1048576,w)}function u(g){return e&&g.alternate===null&&(g.flags|=2),g}function f(g,w,j,I){return w===null||w.tag!==6?(w=_a(j,g.mode,I),w.return=g,w):(w=s(w,j),w.return=g,w)}function p(g,w,j,I){var $=j.type;return $===Xr?k(g,w,j.props.children,I,j.key):w!==null&&(w.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Vn&&qd($)===w.type)?(I=s(w,j.props),I.ref=Li(g,w,j),I.return=g,I):(I=Mo(j.type,j.key,j.props,null,g.mode,I),I.ref=Li(g,w,j),I.return=g,I)}function y(g,w,j,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=Ra(j,g.mode,I),w.return=g,w):(w=s(w,j.children||[]),w.return=g,w)}function k(g,w,j,I,$){return w===null||w.tag!==7?(w=Er(j,g.mode,I,$),w.return=g,w):(w=s(w,j),w.return=g,w)}function x(g,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=_a(""+w,g.mode,j),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case no:return j=Mo(w.type,w.key,w.props,null,g.mode,j),j.ref=Li(g,null,w),j.return=g,j;case Yr:return w=Ra(w,g.mode,j),w.return=g,w;case Vn:var I=w._init;return x(g,I(w._payload),j)}if(Hi(w)||zi(w))return w=Er(w,g.mode,j,null),w.return=g,w;po(g,w)}return null}function v(g,w,j,I){var $=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return $!==null?null:f(g,w,""+j,I);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case no:return j.key===$?p(g,w,j,I):null;case Yr:return j.key===$?y(g,w,j,I):null;case Vn:return $=j._init,v(g,w,$(j._payload),I)}if(Hi(j)||zi(j))return $!==null?null:k(g,w,j,I,null);po(g,j)}return null}function O(g,w,j,I,$){if(typeof I=="string"&&I!==""||typeof I=="number")return g=g.get(j)||null,f(w,g,""+I,$);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case no:return g=g.get(I.key===null?j:I.key)||null,p(w,g,I,$);case Yr:return g=g.get(I.key===null?j:I.key)||null,y(w,g,I,$);case Vn:var D=I._init;return O(g,w,j,D(I._payload),$)}if(Hi(I)||zi(I))return g=g.get(j)||null,k(w,g,I,$,null);po(w,I)}return null}function B(g,w,j,I){for(var $=null,D=null,W=w,Y=w=0,ee=null;W!==null&&Y<j.length;Y++){W.index>Y?(ee=W,W=null):ee=W.sibling;var le=v(g,W,j[Y],I);if(le===null){W===null&&(W=ee);break}e&&W&&le.alternate===null&&t(g,W),w=o(le,w,Y),D===null?$=le:D.sibling=le,D=le,W=ee}if(Y===j.length)return n(g,W),Oe&&jr(g,Y),$;if(W===null){for(;Y<j.length;Y++)W=x(g,j[Y],I),W!==null&&(w=o(W,w,Y),D===null?$=W:D.sibling=W,D=W);return Oe&&jr(g,Y),$}for(W=r(g,W);Y<j.length;Y++)ee=O(W,g,Y,j[Y],I),ee!==null&&(e&&ee.alternate!==null&&W.delete(ee.key===null?Y:ee.key),w=o(ee,w,Y),D===null?$=ee:D.sibling=ee,D=ee);return e&&W.forEach(function(pe){return t(g,pe)}),Oe&&jr(g,Y),$}function N(g,w,j,I){var $=zi(j);if(typeof $!="function")throw Error(q(150));if(j=$.call(j),j==null)throw Error(q(151));for(var D=$=null,W=w,Y=w=0,ee=null,le=j.next();W!==null&&!le.done;Y++,le=j.next()){W.index>Y?(ee=W,W=null):ee=W.sibling;var pe=v(g,W,le.value,I);if(pe===null){W===null&&(W=ee);break}e&&W&&pe.alternate===null&&t(g,W),w=o(pe,w,Y),D===null?$=pe:D.sibling=pe,D=pe,W=ee}if(le.done)return n(g,W),Oe&&jr(g,Y),$;if(W===null){for(;!le.done;Y++,le=j.next())le=x(g,le.value,I),le!==null&&(w=o(le,w,Y),D===null?$=le:D.sibling=le,D=le);return Oe&&jr(g,Y),$}for(W=r(g,W);!le.done;Y++,le=j.next())le=O(W,g,Y,le.value,I),le!==null&&(e&&le.alternate!==null&&W.delete(le.key===null?Y:le.key),w=o(le,w,Y),D===null?$=le:D.sibling=le,D=le);return e&&W.forEach(function(Ne){return t(g,Ne)}),Oe&&jr(g,Y),$}function H(g,w,j,I){if(typeof j=="object"&&j!==null&&j.type===Xr&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case no:e:{for(var $=j.key,D=w;D!==null;){if(D.key===$){if($=j.type,$===Xr){if(D.tag===7){n(g,D.sibling),w=s(D,j.props.children),w.return=g,g=w;break e}}else if(D.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Vn&&qd($)===D.type){n(g,D.sibling),w=s(D,j.props),w.ref=Li(g,D,j),w.return=g,g=w;break e}n(g,D);break}else t(g,D);D=D.sibling}j.type===Xr?(w=Er(j.props.children,g.mode,I,j.key),w.return=g,g=w):(I=Mo(j.type,j.key,j.props,null,g.mode,I),I.ref=Li(g,w,j),I.return=g,g=I)}return u(g);case Yr:e:{for(D=j.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){n(g,w.sibling),w=s(w,j.children||[]),w.return=g,g=w;break e}else{n(g,w);break}else t(g,w);w=w.sibling}w=Ra(j,g.mode,I),w.return=g,g=w}return u(g);case Vn:return D=j._init,H(g,w,D(j._payload),I)}if(Hi(j))return B(g,w,j,I);if(zi(j))return N(g,w,j,I);po(g,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(n(g,w.sibling),w=s(w,j),w.return=g,g=w):(n(g,w),w=_a(j,g.mode,I),w.return=g,g=w),u(g)):n(g,w)}return H}var yi=Wh(!0),Vh=Wh(!1),qo=ar(null),Qo=null,ii=null,nc=null;function rc(){nc=ii=Qo=null}function ic(e){var t=qo.current;Ie(qo),e._currentValue=t}function fu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function di(e,t){Qo=e,nc=ii=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(nc!==e)if(e={context:e,memoizedValue:t,next:null},ii===null){if(Qo===null)throw Error(q(308));ii=e,Qo.dependencies={lanes:0,firstContext:e}}else ii=ii.next=e;return t}var _r=null;function sc(e){_r===null?_r=[e]:_r.push(e)}function Hh(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,sc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pn(e,r)}function Pn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hn=!1;function oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Pn(e,n)}return s=r.interleaved,s===null?(t.next=t,sc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Pn(e,n)}function Ro(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vu(e,n)}}function Qd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yo(e,t,n,r){var s=e.updateQueue;Hn=!1;var o=s.firstBaseUpdate,u=s.lastBaseUpdate,f=s.shared.pending;if(f!==null){s.shared.pending=null;var p=f,y=p.next;p.next=null,u===null?o=y:u.next=y,u=p;var k=e.alternate;k!==null&&(k=k.updateQueue,f=k.lastBaseUpdate,f!==u&&(f===null?k.firstBaseUpdate=y:f.next=y,k.lastBaseUpdate=p))}if(o!==null){var x=s.baseState;u=0,k=y=p=null,f=o;do{var v=f.lane,O=f.eventTime;if((r&v)===v){k!==null&&(k=k.next={eventTime:O,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var B=e,N=f;switch(v=t,O=n,N.tag){case 1:if(B=N.payload,typeof B=="function"){x=B.call(O,x,v);break e}x=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=N.payload,v=typeof B=="function"?B.call(O,x,v):B,v==null)break e;x=We({},x,v);break e;case 2:Hn=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[f]:v.push(f))}else O={eventTime:O,lane:v,tag:f.tag,payload:f.payload,callback:f.callback,next:null},k===null?(y=k=O,p=x):k=k.next=O,u|=v;if(f=f.next,f===null){if(f=s.shared.pending,f===null)break;v=f,f=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(k===null&&(p=x),s.baseState=p,s.firstBaseUpdate=y,s.lastBaseUpdate=k,t=s.shared.interleaved,t!==null){s=t;do u|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Mr|=u,e.lanes=u,e.memoizedState=x}}function Yd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Rs={},fn=ar(Rs),ys=ar(Rs),vs=ar(Rs);function Rr(e){if(e===Rs)throw Error(q(174));return e}function lc(e,t){switch(Fe(vs,t),Fe(ys,e),Fe(fn,Rs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ha(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ha(t,e)}Ie(fn),Fe(fn,t)}function vi(){Ie(fn),Ie(ys),Ie(vs)}function Qh(e){Rr(vs.current);var t=Rr(fn.current),n=Ha(t,e.type);t!==n&&(Fe(ys,e),Fe(fn,n))}function ac(e){ys.current===e&&(Ie(fn),Ie(ys))}var Ue=ar(0);function Xo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xa=[];function uc(){for(var e=0;e<xa.length;e++)xa[e]._workInProgressVersionPrimary=null;xa.length=0}var Co=Fn.ReactCurrentDispatcher,wa=Fn.ReactCurrentBatchConfig,Tr=0,Ke=null,tt=null,ot=null,Go=!1,ts=!1,gs=0,Rv=0;function pt(){throw Error(q(321))}function cc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function dc(e,t,n,r,s,o){if(Tr=o,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Co.current=e===null||e.memoizedState===null?Pv:Tv,e=n(r,s),ts){o=0;do{if(ts=!1,gs=0,25<=o)throw Error(q(301));o+=1,ot=tt=null,t.updateQueue=null,Co.current=Mv,e=n(r,s)}while(ts)}if(Co.current=Jo,t=tt!==null&&tt.next!==null,Tr=0,ot=tt=Ke=null,Go=!1,t)throw Error(q(300));return e}function fc(){var e=gs!==0;return gs=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ke.memoizedState=ot=e:ot=ot.next=e,ot}function qt(){if(tt===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=ot===null?Ke.memoizedState:ot.next;if(t!==null)ot=t,tt=e;else{if(e===null)throw Error(q(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ot===null?Ke.memoizedState=ot=e:ot=ot.next=e}return ot}function xs(e,t){return typeof t=="function"?t(e):t}function Sa(e){var t=qt(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=tt,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var u=s.next;s.next=o.next,o.next=u}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var f=u=null,p=null,y=o;do{var k=y.lane;if((Tr&k)===k)p!==null&&(p=p.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),r=y.hasEagerState?y.eagerState:e(r,y.action);else{var x={lane:k,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};p===null?(f=p=x,u=r):p=p.next=x,Ke.lanes|=k,Mr|=k}y=y.next}while(y!==null&&y!==o);p===null?u=r:p.next=f,nn(r,t.memoizedState)||(Rt=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=p,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Ke.lanes|=o,Mr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ja(e){var t=qt(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do o=e(o,u.action),u=u.next;while(u!==s);nn(o,t.memoizedState)||(Rt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yh(){}function Xh(e,t){var n=Ke,r=qt(),s=t(),o=!nn(r.memoizedState,s);if(o&&(r.memoizedState=s,Rt=!0),r=r.queue,hc(Zh.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,ws(9,Jh.bind(null,n,r,s,t),void 0,null),lt===null)throw Error(q(349));Tr&30||Gh(n,t,s)}return s}function Gh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Jh(e,t,n,r){t.value=n,t.getSnapshot=r,ep(t)&&tp(e)}function Zh(e,t,n){return n(function(){ep(t)&&tp(e)})}function ep(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch{return!0}}function tp(e){var t=Pn(e,1);t!==null&&tn(t,e,1,-1)}function Xd(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=Nv.bind(null,Ke,e),[t.memoizedState,e]}function ws(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function np(){return qt().memoizedState}function Eo(e,t,n,r){var s=un();Ke.flags|=e,s.memoizedState=ws(1|t,n,void 0,r===void 0?null:r)}function hl(e,t,n,r){var s=qt();r=r===void 0?null:r;var o=void 0;if(tt!==null){var u=tt.memoizedState;if(o=u.destroy,r!==null&&cc(r,u.deps)){s.memoizedState=ws(t,n,o,r);return}}Ke.flags|=e,s.memoizedState=ws(1|t,n,o,r)}function Gd(e,t){return Eo(8390656,8,e,t)}function hc(e,t){return hl(2048,8,e,t)}function rp(e,t){return hl(4,2,e,t)}function ip(e,t){return hl(4,4,e,t)}function sp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function op(e,t,n){return n=n!=null?n.concat([e]):null,hl(4,4,sp.bind(null,t,e),n)}function pc(){}function lp(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ap(e,t){var n=qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function up(e,t,n){return Tr&21?(nn(n,t)||(n=ph(),Ke.lanes|=n,Mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=n)}function Cv(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var r=wa.transition;wa.transition={};try{e(!1),t()}finally{Pe=n,wa.transition=r}}function cp(){return qt().memoizedState}function Ev(e,t,n){var r=rr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dp(e))fp(t,n);else if(n=Hh(e,t,n,r),n!==null){var s=jt();tn(n,e,r,s),hp(n,t,r)}}function Nv(e,t,n){var r=rr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dp(e))fp(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,f=o(u,n);if(s.hasEagerState=!0,s.eagerState=f,nn(f,u)){var p=t.interleaved;p===null?(s.next=s,sc(t)):(s.next=p.next,p.next=s),t.interleaved=s;return}}catch{}finally{}n=Hh(e,t,s,r),n!==null&&(s=jt(),tn(n,e,r,s),hp(n,t,r))}}function dp(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function fp(e,t){ts=Go=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vu(e,n)}}var Jo={readContext:Ht,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},Pv={readContext:Ht,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Gd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Eo(4194308,4,sp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Eo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Eo(4,2,e,t)},useMemo:function(e,t){var n=un();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=un();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ev.bind(null,Ke,e),[r.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:Xd,useDebugValue:pc,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=Xd(!1),t=e[0];return e=Cv.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ke,s=un();if(Oe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),lt===null)throw Error(q(349));Tr&30||Gh(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Gd(Zh.bind(null,r,o,e),[e]),r.flags|=2048,ws(9,Jh.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=un(),t=lt.identifierPrefix;if(Oe){var n=bn,r=kn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Rv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Tv={readContext:Ht,useCallback:lp,useContext:Ht,useEffect:hc,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:ip,useMemo:ap,useReducer:Sa,useRef:np,useState:function(){return Sa(xs)},useDebugValue:pc,useDeferredValue:function(e){var t=qt();return up(t,tt.memoizedState,e)},useTransition:function(){var e=Sa(xs)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Yh,useSyncExternalStore:Xh,useId:cp,unstable_isNewReconciler:!1},Mv={readContext:Ht,useCallback:lp,useContext:Ht,useEffect:hc,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:ip,useMemo:ap,useReducer:ja,useRef:np,useState:function(){return ja(xs)},useDebugValue:pc,useDeferredValue:function(e){var t=qt();return tt===null?t.memoizedState=e:up(t,tt.memoizedState,e)},useTransition:function(){var e=ja(xs)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Yh,useSyncExternalStore:Xh,useId:cp,unstable_isNewReconciler:!1};function Gt(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pl={isMounted:function(e){return(e=e._reactInternals)?Ar(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),s=rr(e),o=Cn(r,s);o.payload=t,n!=null&&(o.callback=n),t=tr(e,o,s),t!==null&&(tn(t,e,s,r),Ro(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),s=rr(e),o=Cn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=tr(e,o,s),t!==null&&(tn(t,e,s,r),Ro(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=rr(e),s=Cn(n,r);s.tag=2,t!=null&&(s.callback=t),t=tr(e,s,r),t!==null&&(tn(t,e,r,n),Ro(t,e,r))}};function Jd(e,t,n,r,s,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,u):t.prototype&&t.prototype.isPureReactComponent?!fs(n,r)||!fs(s,o):!0}function pp(e,t,n){var r=!1,s=or,o=t.contextType;return typeof o=="object"&&o!==null?o=Ht(o):(s=Et(t)?Nr:vt.current,r=t.contextTypes,o=(r=r!=null)?pi(e,s):or),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Zd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pl.enqueueReplaceState(t,t.state,null)}function pu(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},oc(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Ht(o):(o=Et(t)?Nr:vt.current,s.context=pi(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(hu(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&pl.enqueueReplaceState(s,s.state,null),Yo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function gi(e,t){try{var n="",r=t;do n+=oy(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function ka(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function mu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Fv=typeof WeakMap=="function"?WeakMap:Map;function mp(e,t,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){el||(el=!0,_u=r),mu(e,t)},n}function yp(e,t,n){n=Cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){mu(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mu(e,t),typeof r!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}function ef(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Fv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=qv.bind(null,e,t,n),t.then(e,e))}function tf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nf(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cn(-1,1),t.tag=2,tr(n,t,1))),n.lanes|=1),e)}var zv=Fn.ReactCurrentOwner,Rt=!1;function St(e,t,n,r){t.child=e===null?Vh(t,null,n,r):yi(t,e.child,n,r)}function rf(e,t,n,r,s){n=n.render;var o=t.ref;return di(t,s),r=dc(e,t,n,r,o,s),n=fc(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Oe&&n&&Zu(t),t.flags|=1,St(e,t,r,s),t.child)}function sf(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!jc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,vp(e,t,o,r,s)):(e=Mo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:fs,n(u,r)&&e.ref===t.ref)return Tn(e,t,s)}return t.flags|=1,e=ir(o,r),e.ref=t.ref,e.return=t,t.child=e}function vp(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(fs(o,r)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,Tn(e,t,s)}return yu(e,t,n,r,s)}function gp(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(oi,Ft),Ft|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(oi,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Fe(oi,Ft),Ft|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Fe(oi,Ft),Ft|=r;return St(e,t,s,n),t.child}function xp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yu(e,t,n,r,s){var o=Et(n)?Nr:vt.current;return o=pi(t,o),di(t,s),n=dc(e,t,n,r,o,s),r=fc(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tn(e,t,s)):(Oe&&r&&Zu(t),t.flags|=1,St(e,t,n,s),t.child)}function of(e,t,n,r,s){if(Et(n)){var o=!0;Wo(t)}else o=!1;if(di(t,s),t.stateNode===null)No(e,t),pp(t,n,r),pu(t,n,r,s),r=!0;else if(e===null){var u=t.stateNode,f=t.memoizedProps;u.props=f;var p=u.context,y=n.contextType;typeof y=="object"&&y!==null?y=Ht(y):(y=Et(n)?Nr:vt.current,y=pi(t,y));var k=n.getDerivedStateFromProps,x=typeof k=="function"||typeof u.getSnapshotBeforeUpdate=="function";x||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==r||p!==y)&&Zd(t,u,r,y),Hn=!1;var v=t.memoizedState;u.state=v,Yo(t,r,u,s),p=t.memoizedState,f!==r||v!==p||Ct.current||Hn?(typeof k=="function"&&(hu(t,n,k,r),p=t.memoizedState),(f=Hn||Jd(t,n,f,r,v,p,y))?(x||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=p),u.props=r,u.state=p,u.context=y,r=f):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,qh(e,t),f=t.memoizedProps,y=t.type===t.elementType?f:Gt(t.type,f),u.props=y,x=t.pendingProps,v=u.context,p=n.contextType,typeof p=="object"&&p!==null?p=Ht(p):(p=Et(n)?Nr:vt.current,p=pi(t,p));var O=n.getDerivedStateFromProps;(k=typeof O=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==x||v!==p)&&Zd(t,u,r,p),Hn=!1,v=t.memoizedState,u.state=v,Yo(t,r,u,s);var B=t.memoizedState;f!==x||v!==B||Ct.current||Hn?(typeof O=="function"&&(hu(t,n,O,r),B=t.memoizedState),(y=Hn||Jd(t,n,y,r,v,B,p)||!1)?(k||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,B,p),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,B,p)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=B),u.props=r,u.state=B,u.context=p,r=y):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return vu(e,t,n,r,o,s)}function vu(e,t,n,r,s,o){xp(e,t);var u=(t.flags&128)!==0;if(!r&&!u)return s&&Wd(t,n,!1),Tn(e,t,o);r=t.stateNode,zv.current=t;var f=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&u?(t.child=yi(t,e.child,null,o),t.child=yi(t,null,f,o)):St(e,t,f,o),t.memoizedState=r.state,s&&Wd(t,n,!0),t.child}function wp(e){var t=e.stateNode;t.pendingContext?Kd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kd(e,t.context,!1),lc(e,t.containerInfo)}function lf(e,t,n,r,s){return mi(),tc(s),t.flags|=256,St(e,t,n,r),t.child}var gu={dehydrated:null,treeContext:null,retryLane:0};function xu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sp(e,t,n){var r=t.pendingProps,s=Ue.current,o=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(s&2)!==0),f?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Fe(Ue,s&1),e===null)return du(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=r.children,e=r.fallback,o?(r=t.mode,o=t.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=vl(u,r,0,null),e=Er(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=xu(n),t.memoizedState=gu,e):mc(t,u));if(s=e.memoizedState,s!==null&&(f=s.dehydrated,f!==null))return Av(e,t,u,r,f,s,n);if(o){o=r.fallback,u=t.mode,s=e.child,f=s.sibling;var p={mode:"hidden",children:r.children};return!(u&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=p,t.deletions=null):(r=ir(s,p),r.subtreeFlags=s.subtreeFlags&14680064),f!==null?o=ir(f,o):(o=Er(o,u,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,u=e.child.memoizedState,u=u===null?xu(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~n,t.memoizedState=gu,r}return o=e.child,e=o.sibling,r=ir(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function mc(e,t){return t=vl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mo(e,t,n,r){return r!==null&&tc(r),yi(t,e.child,null,n),e=mc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Av(e,t,n,r,s,o,u){if(n)return t.flags&256?(t.flags&=-257,r=ka(Error(q(422))),mo(e,t,u,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=vl({mode:"visible",children:r.children},s,0,null),o=Er(o,s,u,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&yi(t,e.child,null,u),t.child.memoizedState=xu(u),t.memoizedState=gu,o);if(!(t.mode&1))return mo(e,t,u,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var f=r.dgst;return r=f,o=Error(q(419)),r=ka(o,r,void 0),mo(e,t,u,r)}if(f=(u&e.childLanes)!==0,Rt||f){if(r=lt,r!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|u)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Pn(e,s),tn(r,e,s,-1))}return Sc(),r=ka(Error(q(421))),mo(e,t,u,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Qv.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,zt=er(s.nextSibling),At=t,Oe=!0,Zt=null,e!==null&&(Ut[Kt++]=kn,Ut[Kt++]=bn,Ut[Kt++]=Pr,kn=e.id,bn=e.overflow,Pr=t),t=mc(t,r.children),t.flags|=4096,t)}function af(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fu(e.return,t,n)}function ba(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function jp(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(St(e,t,r.children,n),r=Ue.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&af(e,n,t);else if(e.tag===19)af(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(Ue,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Xo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ba(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ba(t,!0,n,null,o);break;case"together":ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function No(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=ir(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ir(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Iv(e,t,n){switch(t.tag){case 3:wp(t),mi();break;case 5:Qh(t);break;case 1:Et(t.type)&&Wo(t);break;case 4:lc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Fe(qo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ue,Ue.current&1),t.flags|=128,null):n&t.child.childLanes?Sp(e,t,n):(Fe(Ue,Ue.current&1),e=Tn(e,t,n),e!==null?e.sibling:null);Fe(Ue,Ue.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return jp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ue,Ue.current),r)break;return null;case 22:case 23:return t.lanes=0,gp(e,t,n)}return Tn(e,t,n)}var kp,wu,bp,_p;kp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wu=function(){};bp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Rr(fn.current);var o=null;switch(n){case"input":s=Ua(e,s),r=Ua(e,r),o=[];break;case"select":s=We({},s,{value:void 0}),r=We({},r,{value:void 0}),o=[];break;case"textarea":s=Va(e,s),r=Va(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Uo)}qa(n,r);var u;n=null;for(y in s)if(!r.hasOwnProperty(y)&&s.hasOwnProperty(y)&&s[y]!=null)if(y==="style"){var f=s[y];for(u in f)f.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(ss.hasOwnProperty(y)?o||(o=[]):(o=o||[]).push(y,null));for(y in r){var p=r[y];if(f=s!=null?s[y]:void 0,r.hasOwnProperty(y)&&p!==f&&(p!=null||f!=null))if(y==="style")if(f){for(u in f)!f.hasOwnProperty(u)||p&&p.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in p)p.hasOwnProperty(u)&&f[u]!==p[u]&&(n||(n={}),n[u]=p[u])}else n||(o||(o=[]),o.push(y,n)),n=p;else y==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,f=f?f.__html:void 0,p!=null&&f!==p&&(o=o||[]).push(y,p)):y==="children"?typeof p!="string"&&typeof p!="number"||(o=o||[]).push(y,""+p):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(ss.hasOwnProperty(y)?(p!=null&&y==="onScroll"&&Ae("scroll",e),o||f===p||(o=[])):(o=o||[]).push(y,p))}n&&(o=o||[]).push("style",n);var y=o;(t.updateQueue=y)&&(t.flags|=4)}};_p=function(e,t,n,r){n!==r&&(t.flags|=4)};function Bi(e,t){if(!Oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Dv(e,t,n){var r=t.pendingProps;switch(ec(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return Et(t.type)&&Ko(),mt(t),null;case 3:return r=t.stateNode,vi(),Ie(Ct),Ie(vt),uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ho(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zt!==null&&(Eu(Zt),Zt=null))),wu(e,t),mt(t),null;case 5:ac(t);var s=Rr(vs.current);if(n=t.type,e!==null&&t.stateNode!=null)bp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return mt(t),null}if(e=Rr(fn.current),ho(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[cn]=t,r[ms]=o,e=(t.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<Qi.length;s++)Ae(Qi[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":yd(r,o),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ae("invalid",r);break;case"textarea":gd(r,o),Ae("invalid",r)}qa(n,o),s=null;for(var u in o)if(o.hasOwnProperty(u)){var f=o[u];u==="children"?typeof f=="string"?r.textContent!==f&&(o.suppressHydrationWarning!==!0&&fo(r.textContent,f,e),s=["children",f]):typeof f=="number"&&r.textContent!==""+f&&(o.suppressHydrationWarning!==!0&&fo(r.textContent,f,e),s=["children",""+f]):ss.hasOwnProperty(u)&&f!=null&&u==="onScroll"&&Ae("scroll",r)}switch(n){case"input":ro(r),vd(r,o,!0);break;case"textarea":ro(r),xd(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Uo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),n==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[cn]=t,e[ms]=r,kp(e,t,!1,!1),t.stateNode=e;e:{switch(u=Qa(n,r),n){case"dialog":Ae("cancel",e),Ae("close",e),s=r;break;case"iframe":case"object":case"embed":Ae("load",e),s=r;break;case"video":case"audio":for(s=0;s<Qi.length;s++)Ae(Qi[s],e);s=r;break;case"source":Ae("error",e),s=r;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),s=r;break;case"details":Ae("toggle",e),s=r;break;case"input":yd(e,r),s=Ua(e,r),Ae("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=We({},r,{value:void 0}),Ae("invalid",e);break;case"textarea":gd(e,r),s=Va(e,r),Ae("invalid",e);break;default:s=r}qa(n,s),f=s;for(o in f)if(f.hasOwnProperty(o)){var p=f[o];o==="style"?nh(e,p):o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&eh(e,p)):o==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&os(e,p):typeof p=="number"&&os(e,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ss.hasOwnProperty(o)?p!=null&&o==="onScroll"&&Ae("scroll",e):p!=null&&Lu(e,o,p,u))}switch(n){case"input":ro(e),vd(e,r,!1);break;case"textarea":ro(e),xd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?li(e,!!r.multiple,o,!1):r.defaultValue!=null&&li(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Uo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mt(t),null;case 6:if(e&&t.stateNode!=null)_p(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=Rr(vs.current),Rr(fn.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[cn]=t,(o=r.nodeValue!==n)&&(e=At,e!==null))switch(e.tag){case 3:fo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fo(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=t,t.stateNode=r}return mt(t),null;case 13:if(Ie(Ue),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oe&&zt!==null&&t.mode&1&&!(t.flags&128))Kh(),mi(),t.flags|=98560,o=!1;else if(o=ho(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[cn]=t}else mi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mt(t),o=!1}else Zt!==null&&(Eu(Zt),Zt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ue.current&1?nt===0&&(nt=3):Sc())),t.updateQueue!==null&&(t.flags|=4),mt(t),null);case 4:return vi(),wu(e,t),e===null&&hs(t.stateNode.containerInfo),mt(t),null;case 10:return ic(t.type._context),mt(t),null;case 17:return Et(t.type)&&Ko(),mt(t),null;case 19:if(Ie(Ue),o=t.memoizedState,o===null)return mt(t),null;if(r=(t.flags&128)!==0,u=o.rendering,u===null)if(r)Bi(o,!1);else{if(nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Xo(e),u!==null){for(t.flags|=128,Bi(o,!1),r=u.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Ue,Ue.current&1|2),t.child}e=e.sibling}o.tail!==null&&Xe()>xi&&(t.flags|=128,r=!0,Bi(o,!1),t.lanes=4194304)}else{if(!r)if(e=Xo(u),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Bi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Oe)return mt(t),null}else 2*Xe()-o.renderingStartTime>xi&&n!==1073741824&&(t.flags|=128,r=!0,Bi(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(n=o.last,n!==null?n.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Ue.current,Fe(Ue,r?n&1|2:n&1),t):(mt(t),null);case 22:case 23:return wc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ft&1073741824&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function Ov(e,t){switch(ec(t),t.tag){case 1:return Et(t.type)&&Ko(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vi(),Ie(Ct),Ie(vt),uc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ac(t),null;case 13:if(Ie(Ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Ue),null;case 4:return vi(),null;case 10:return ic(t.type._context),null;case 22:case 23:return wc(),null;case 24:return null;default:return null}}var yo=!1,yt=!1,Lv=typeof WeakSet=="function"?WeakSet:Set,ae=null;function si(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(e,t,r)}else n.current=null}function Su(e,t,n){try{n()}catch(r){He(e,t,r)}}var uf=!1;function Bv(e,t){if(iu=Lo,e=Ph(),Ju(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,f=-1,p=-1,y=0,k=0,x=e,v=null;t:for(;;){for(var O;x!==n||s!==0&&x.nodeType!==3||(f=u+s),x!==o||r!==0&&x.nodeType!==3||(p=u+r),x.nodeType===3&&(u+=x.nodeValue.length),(O=x.firstChild)!==null;)v=x,x=O;for(;;){if(x===e)break t;if(v===n&&++y===s&&(f=u),v===o&&++k===r&&(p=u),(O=x.nextSibling)!==null)break;x=v,v=x.parentNode}x=O}n=f===-1||p===-1?null:{start:f,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(su={focusedElem:e,selectionRange:n},Lo=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var B=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var N=B.memoizedProps,H=B.memoizedState,g=t.stateNode,w=g.getSnapshotBeforeUpdate(t.elementType===t.type?N:Gt(t.type,N),H);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(I){He(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return B=uf,uf=!1,B}function ns(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Su(t,n,o)}s=s.next}while(s!==r)}}function ml(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ju(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Rp(e){var t=e.alternate;t!==null&&(e.alternate=null,Rp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[cn],delete t[ms],delete t[au],delete t[jv],delete t[kv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cp(e){return e.tag===5||e.tag===3||e.tag===4}function cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ku(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Uo));else if(r!==4&&(e=e.child,e!==null))for(ku(e,t,n),e=e.sibling;e!==null;)ku(e,t,n),e=e.sibling}function bu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(bu(e,t,n),e=e.sibling;e!==null;)bu(e,t,n),e=e.sibling}var at=null,Jt=!1;function Kn(e,t,n){for(n=n.child;n!==null;)Ep(e,t,n),n=n.sibling}function Ep(e,t,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(ll,n)}catch{}switch(n.tag){case 5:yt||si(n,t);case 6:var r=at,s=Jt;at=null,Kn(e,t,n),at=r,Jt=s,at!==null&&(Jt?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(Jt?(e=at,n=n.stateNode,e.nodeType===8?va(e.parentNode,n):e.nodeType===1&&va(e,n),cs(e)):va(at,n.stateNode));break;case 4:r=at,s=Jt,at=n.stateNode.containerInfo,Jt=!0,Kn(e,t,n),at=r,Jt=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&Su(n,t,u),s=s.next}while(s!==r)}Kn(e,t,n);break;case 1:if(!yt&&(si(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(f){He(n,t,f)}Kn(e,t,n);break;case 21:Kn(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,Kn(e,t,n),yt=r):Kn(e,t,n);break;default:Kn(e,t,n)}}function df(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Lv),t.forEach(function(r){var s=Yv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,u=t,f=u;e:for(;f!==null;){switch(f.tag){case 5:at=f.stateNode,Jt=!1;break e;case 3:at=f.stateNode.containerInfo,Jt=!0;break e;case 4:at=f.stateNode.containerInfo,Jt=!0;break e}f=f.return}if(at===null)throw Error(q(160));Ep(o,u,s),at=null,Jt=!1;var p=s.alternate;p!==null&&(p.return=null),s.return=null}catch(y){He(s,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Np(t,e),t=t.sibling}function Np(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),ln(e),r&4){try{ns(3,e,e.return),ml(3,e)}catch(N){He(e,e.return,N)}try{ns(5,e,e.return)}catch(N){He(e,e.return,N)}}break;case 1:Xt(t,e),ln(e),r&512&&n!==null&&si(n,n.return);break;case 5:if(Xt(t,e),ln(e),r&512&&n!==null&&si(n,n.return),e.flags&32){var s=e.stateNode;try{os(s,"")}catch(N){He(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,u=n!==null?n.memoizedProps:o,f=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{f==="input"&&o.type==="radio"&&o.name!=null&&Gf(s,o),Qa(f,u);var y=Qa(f,o);for(u=0;u<p.length;u+=2){var k=p[u],x=p[u+1];k==="style"?nh(s,x):k==="dangerouslySetInnerHTML"?eh(s,x):k==="children"?os(s,x):Lu(s,k,x,y)}switch(f){case"input":Ka(s,o);break;case"textarea":Jf(s,o);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var O=o.value;O!=null?li(s,!!o.multiple,O,!1):v!==!!o.multiple&&(o.defaultValue!=null?li(s,!!o.multiple,o.defaultValue,!0):li(s,!!o.multiple,o.multiple?[]:"",!1))}s[ms]=o}catch(N){He(e,e.return,N)}}break;case 6:if(Xt(t,e),ln(e),r&4){if(e.stateNode===null)throw Error(q(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(N){He(e,e.return,N)}}break;case 3:if(Xt(t,e),ln(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cs(t.containerInfo)}catch(N){He(e,e.return,N)}break;case 4:Xt(t,e),ln(e);break;case 13:Xt(t,e),ln(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(gc=Xe())),r&4&&df(e);break;case 22:if(k=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(y=yt)||k,Xt(t,e),yt=y):Xt(t,e),ln(e),r&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!k&&e.mode&1)for(ae=e,k=e.child;k!==null;){for(x=ae=k;ae!==null;){switch(v=ae,O=v.child,v.tag){case 0:case 11:case 14:case 15:ns(4,v,v.return);break;case 1:si(v,v.return);var B=v.stateNode;if(typeof B.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,B.props=t.memoizedProps,B.state=t.memoizedState,B.componentWillUnmount()}catch(N){He(r,n,N)}}break;case 5:si(v,v.return);break;case 22:if(v.memoizedState!==null){hf(x);continue}}O!==null?(O.return=v,ae=O):hf(x)}k=k.sibling}e:for(k=null,x=e;;){if(x.tag===5){if(k===null){k=x;try{s=x.stateNode,y?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(f=x.stateNode,p=x.memoizedProps.style,u=p!=null&&p.hasOwnProperty("display")?p.display:null,f.style.display=th("display",u))}catch(N){He(e,e.return,N)}}}else if(x.tag===6){if(k===null)try{x.stateNode.nodeValue=y?"":x.memoizedProps}catch(N){He(e,e.return,N)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;k===x&&(k=null),x=x.return}k===x&&(k=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Xt(t,e),ln(e),r&4&&df(e);break;case 21:break;default:Xt(t,e),ln(e)}}function ln(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Cp(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(os(s,""),r.flags&=-33);var o=cf(e);bu(e,o,s);break;case 3:case 4:var u=r.stateNode.containerInfo,f=cf(e);ku(e,f,u);break;default:throw Error(q(161))}}catch(p){He(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $v(e,t,n){ae=e,Pp(e)}function Pp(e,t,n){for(var r=(e.mode&1)!==0;ae!==null;){var s=ae,o=s.child;if(s.tag===22&&r){var u=s.memoizedState!==null||yo;if(!u){var f=s.alternate,p=f!==null&&f.memoizedState!==null||yt;f=yo;var y=yt;if(yo=u,(yt=p)&&!y)for(ae=s;ae!==null;)u=ae,p=u.child,u.tag===22&&u.memoizedState!==null?pf(s):p!==null?(p.return=u,ae=p):pf(s);for(;o!==null;)ae=o,Pp(o),o=o.sibling;ae=s,yo=f,yt=y}ff(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ae=o):ff(e)}}function ff(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||ml(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Gt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Yd(t,o,r);break;case 3:var u=t.updateQueue;if(u!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yd(t,u,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var k=y.memoizedState;if(k!==null){var x=k.dehydrated;x!==null&&cs(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}yt||t.flags&512&&ju(t)}catch(v){He(t,t.return,v)}}if(t===e){ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,ae=n;break}ae=t.return}}function hf(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ae=n;break}ae=t.return}}function pf(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ml(4,t)}catch(p){He(t,n,p)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(p){He(t,s,p)}}var o=t.return;try{ju(t)}catch(p){He(t,o,p)}break;case 5:var u=t.return;try{ju(t)}catch(p){He(t,u,p)}}}catch(p){He(t,t.return,p)}if(t===e){ae=null;break}var f=t.sibling;if(f!==null){f.return=t.return,ae=f;break}ae=t.return}}var Uv=Math.ceil,Zo=Fn.ReactCurrentDispatcher,yc=Fn.ReactCurrentOwner,Vt=Fn.ReactCurrentBatchConfig,be=0,lt=null,Je=null,ut=0,Ft=0,oi=ar(0),nt=0,Ss=null,Mr=0,yl=0,vc=0,rs=null,_t=null,gc=0,xi=1/0,Sn=null,el=!1,_u=null,nr=null,vo=!1,Xn=null,tl=0,is=0,Ru=null,Po=-1,To=0;function jt(){return be&6?Xe():Po!==-1?Po:Po=Xe()}function rr(e){return e.mode&1?be&2&&ut!==0?ut&-ut:_v.transition!==null?(To===0&&(To=ph()),To):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Sh(e.type)),e):1}function tn(e,t,n,r){if(50<is)throw is=0,Ru=null,Error(q(185));ks(e,n,r),(!(be&2)||e!==lt)&&(e===lt&&(!(be&2)&&(yl|=n),nt===4&&Qn(e,ut)),Nt(e,r),n===1&&be===0&&!(t.mode&1)&&(xi=Xe()+500,fl&&ur()))}function Nt(e,t){var n=e.callbackNode;_y(e,t);var r=Oo(e,e===lt?ut:0);if(r===0)n!==null&&jd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&jd(n),t===1)e.tag===0?bv(mf.bind(null,e)):Bh(mf.bind(null,e)),wv(function(){!(be&6)&&ur()}),n=null;else{switch(mh(r)){case 1:n=Wu;break;case 4:n=fh;break;case 16:n=Do;break;case 536870912:n=hh;break;default:n=Do}n=Op(n,Tp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Tp(e,t){if(Po=-1,To=0,be&6)throw Error(q(327));var n=e.callbackNode;if(fi()&&e.callbackNode!==n)return null;var r=Oo(e,e===lt?ut:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=nl(e,r);else{t=r;var s=be;be|=2;var o=Fp();(lt!==e||ut!==t)&&(Sn=null,xi=Xe()+500,Cr(e,t));do try{Vv();break}catch(f){Mp(e,f)}while(!0);rc(),Zo.current=o,be=s,Je!==null?t=0:(lt=null,ut=0,t=nt)}if(t!==0){if(t===2&&(s=Za(e),s!==0&&(r=s,t=Cu(e,s))),t===1)throw n=Ss,Cr(e,0),Qn(e,r),Nt(e,Xe()),n;if(t===6)Qn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Kv(s)&&(t=nl(e,r),t===2&&(o=Za(e),o!==0&&(r=o,t=Cu(e,o))),t===1))throw n=Ss,Cr(e,0),Qn(e,r),Nt(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:kr(e,_t,Sn);break;case 3:if(Qn(e,r),(r&130023424)===r&&(t=gc+500-Xe(),10<t)){if(Oo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lu(kr.bind(null,e,_t,Sn),t);break}kr(e,_t,Sn);break;case 4:if(Qn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var u=31-en(r);o=1<<u,u=t[u],u>s&&(s=u),r&=~o}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Uv(r/1960))-r,10<r){e.timeoutHandle=lu(kr.bind(null,e,_t,Sn),r);break}kr(e,_t,Sn);break;case 5:kr(e,_t,Sn);break;default:throw Error(q(329))}}}return Nt(e,Xe()),e.callbackNode===n?Tp.bind(null,e):null}function Cu(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(Cr(e,t).flags|=256),e=nl(e,t),e!==2&&(t=_t,_t=n,t!==null&&Eu(t)),e}function Eu(e){_t===null?_t=e:_t.push.apply(_t,e)}function Kv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!nn(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t){for(t&=~vc,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),r=1<<n;e[n]=-1,t&=~r}}function mf(e){if(be&6)throw Error(q(327));fi();var t=Oo(e,0);if(!(t&1))return Nt(e,Xe()),null;var n=nl(e,t);if(e.tag!==0&&n===2){var r=Za(e);r!==0&&(t=r,n=Cu(e,r))}if(n===1)throw n=Ss,Cr(e,0),Qn(e,t),Nt(e,Xe()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kr(e,_t,Sn),Nt(e,Xe()),null}function xc(e,t){var n=be;be|=1;try{return e(t)}finally{be=n,be===0&&(xi=Xe()+500,fl&&ur())}}function Fr(e){Xn!==null&&Xn.tag===0&&!(be&6)&&fi();var t=be;be|=1;var n=Vt.transition,r=Pe;try{if(Vt.transition=null,Pe=1,e)return e()}finally{Pe=r,Vt.transition=n,be=t,!(be&6)&&ur()}}function wc(){Ft=oi.current,Ie(oi)}function Cr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xv(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(ec(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ko();break;case 3:vi(),Ie(Ct),Ie(vt),uc();break;case 5:ac(r);break;case 4:vi();break;case 13:Ie(Ue);break;case 19:Ie(Ue);break;case 10:ic(r.type._context);break;case 22:case 23:wc()}n=n.return}if(lt=e,Je=e=ir(e.current,null),ut=Ft=t,nt=0,Ss=null,vc=yl=Mr=0,_t=rs=null,_r!==null){for(t=0;t<_r.length;t++)if(n=_r[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=s,r.next=u}n.pending=r}_r=null}return e}function Mp(e,t){do{var n=Je;try{if(rc(),Co.current=Jo,Go){for(var r=Ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Go=!1}if(Tr=0,ot=tt=Ke=null,ts=!1,gs=0,yc.current=null,n===null||n.return===null){nt=1,Ss=t,Je=null;break}e:{var o=e,u=n.return,f=n,p=t;if(t=ut,f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var y=p,k=f,x=k.tag;if(!(k.mode&1)&&(x===0||x===11||x===15)){var v=k.alternate;v?(k.updateQueue=v.updateQueue,k.memoizedState=v.memoizedState,k.lanes=v.lanes):(k.updateQueue=null,k.memoizedState=null)}var O=tf(u);if(O!==null){O.flags&=-257,nf(O,u,f,o,t),O.mode&1&&ef(o,y,t),t=O,p=y;var B=t.updateQueue;if(B===null){var N=new Set;N.add(p),t.updateQueue=N}else B.add(p);break e}else{if(!(t&1)){ef(o,y,t),Sc();break e}p=Error(q(426))}}else if(Oe&&f.mode&1){var H=tf(u);if(H!==null){!(H.flags&65536)&&(H.flags|=256),nf(H,u,f,o,t),tc(gi(p,f));break e}}o=p=gi(p,f),nt!==4&&(nt=2),rs===null?rs=[o]:rs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=mp(o,p,t);Qd(o,g);break e;case 1:f=p;var w=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(nr===null||!nr.has(j)))){o.flags|=65536,t&=-t,o.lanes|=t;var I=yp(o,f,t);Qd(o,I);break e}}o=o.return}while(o!==null)}Ap(n)}catch($){t=$,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Fp(){var e=Zo.current;return Zo.current=Jo,e===null?Jo:e}function Sc(){(nt===0||nt===3||nt===2)&&(nt=4),lt===null||!(Mr&268435455)&&!(yl&268435455)||Qn(lt,ut)}function nl(e,t){var n=be;be|=2;var r=Fp();(lt!==e||ut!==t)&&(Sn=null,Cr(e,t));do try{Wv();break}catch(s){Mp(e,s)}while(!0);if(rc(),be=n,Zo.current=r,Je!==null)throw Error(q(261));return lt=null,ut=0,nt}function Wv(){for(;Je!==null;)zp(Je)}function Vv(){for(;Je!==null&&!yy();)zp(Je)}function zp(e){var t=Dp(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?Ap(e):Je=t,yc.current=null}function Ap(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ov(n,t),n!==null){n.flags&=32767,Je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nt=6,Je=null;return}}else if(n=Dv(n,t,Ft),n!==null){Je=n;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);nt===0&&(nt=5)}function kr(e,t,n){var r=Pe,s=Vt.transition;try{Vt.transition=null,Pe=1,Hv(e,t,n,r)}finally{Vt.transition=s,Pe=r}return null}function Hv(e,t,n,r){do fi();while(Xn!==null);if(be&6)throw Error(q(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Ry(e,o),e===lt&&(Je=lt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vo||(vo=!0,Op(Do,function(){return fi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Vt.transition,Vt.transition=null;var u=Pe;Pe=1;var f=be;be|=4,yc.current=null,Bv(e,n),Np(n,e),fv(su),Lo=!!iu,su=iu=null,e.current=n,$v(n),vy(),be=f,Pe=u,Vt.transition=o}else e.current=n;if(vo&&(vo=!1,Xn=e,tl=s),o=e.pendingLanes,o===0&&(nr=null),wy(n.stateNode),Nt(e,Xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(el)throw el=!1,e=_u,_u=null,e;return tl&1&&e.tag!==0&&fi(),o=e.pendingLanes,o&1?e===Ru?is++:(is=0,Ru=e):is=0,ur(),null}function fi(){if(Xn!==null){var e=mh(tl),t=Vt.transition,n=Pe;try{if(Vt.transition=null,Pe=16>e?16:e,Xn===null)var r=!1;else{if(e=Xn,Xn=null,tl=0,be&6)throw Error(q(331));var s=be;for(be|=4,ae=e.current;ae!==null;){var o=ae,u=o.child;if(ae.flags&16){var f=o.deletions;if(f!==null){for(var p=0;p<f.length;p++){var y=f[p];for(ae=y;ae!==null;){var k=ae;switch(k.tag){case 0:case 11:case 15:ns(8,k,o)}var x=k.child;if(x!==null)x.return=k,ae=x;else for(;ae!==null;){k=ae;var v=k.sibling,O=k.return;if(Rp(k),k===y){ae=null;break}if(v!==null){v.return=O,ae=v;break}ae=O}}}var B=o.alternate;if(B!==null){var N=B.child;if(N!==null){B.child=null;do{var H=N.sibling;N.sibling=null,N=H}while(N!==null)}}ae=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,ae=u;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,ae=g;break e}ae=o.return}}var w=e.current;for(ae=w;ae!==null;){u=ae;var j=u.child;if(u.subtreeFlags&2064&&j!==null)j.return=u,ae=j;else e:for(u=w;ae!==null;){if(f=ae,f.flags&2048)try{switch(f.tag){case 0:case 11:case 15:ml(9,f)}}catch($){He(f,f.return,$)}if(f===u){ae=null;break e}var I=f.sibling;if(I!==null){I.return=f.return,ae=I;break e}ae=f.return}}if(be=s,ur(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(ll,e)}catch{}r=!0}return r}finally{Pe=n,Vt.transition=t}}return!1}function yf(e,t,n){t=gi(n,t),t=mp(e,t,1),e=tr(e,t,1),t=jt(),e!==null&&(ks(e,1,t),Nt(e,t))}function He(e,t,n){if(e.tag===3)yf(e,e,n);else for(;t!==null;){if(t.tag===3){yf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nr===null||!nr.has(r))){e=gi(n,e),e=yp(t,e,1),t=tr(t,e,1),e=jt(),t!==null&&(ks(t,1,e),Nt(t,e));break}}t=t.return}}function qv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(ut&n)===n&&(nt===4||nt===3&&(ut&130023424)===ut&&500>Xe()-gc?Cr(e,0):vc|=n),Nt(e,t)}function Ip(e,t){t===0&&(e.mode&1?(t=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):t=1);var n=jt();e=Pn(e,t),e!==null&&(ks(e,t,n),Nt(e,n))}function Qv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ip(e,n)}function Yv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),Ip(e,n)}var Dp;Dp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)Rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rt=!1,Iv(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,Oe&&t.flags&1048576&&$h(t,Ho,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;No(e,t),e=t.pendingProps;var s=pi(t,vt.current);di(t,n),s=dc(null,t,r,e,s,n);var o=fc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(r)?(o=!0,Wo(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,oc(t),s.updater=pl,t.stateNode=s,s._reactInternals=t,pu(t,r,e,n),t=vu(null,t,r,!0,o,n)):(t.tag=0,Oe&&o&&Zu(t),St(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(No(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Gv(r),e=Gt(r,e),s){case 0:t=yu(null,t,r,e,n);break e;case 1:t=of(null,t,r,e,n);break e;case 11:t=rf(null,t,r,e,n);break e;case 14:t=sf(null,t,r,Gt(r.type,e),n);break e}throw Error(q(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gt(r,s),yu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gt(r,s),of(e,t,r,s,n);case 3:e:{if(wp(t),e===null)throw Error(q(387));r=t.pendingProps,o=t.memoizedState,s=o.element,qh(e,t),Yo(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=gi(Error(q(423)),t),t=lf(e,t,r,n,s);break e}else if(r!==s){s=gi(Error(q(424)),t),t=lf(e,t,r,n,s);break e}else for(zt=er(t.stateNode.containerInfo.firstChild),At=t,Oe=!0,Zt=null,n=Vh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mi(),r===s){t=Tn(e,t,n);break e}St(e,t,r,n)}t=t.child}return t;case 5:return Qh(t),e===null&&du(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,u=s.children,ou(r,s)?u=null:o!==null&&ou(r,o)&&(t.flags|=32),xp(e,t),St(e,t,u,n),t.child;case 6:return e===null&&du(t),null;case 13:return Sp(e,t,n);case 4:return lc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yi(t,null,r,n):St(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gt(r,s),rf(e,t,r,s,n);case 7:return St(e,t,t.pendingProps,n),t.child;case 8:return St(e,t,t.pendingProps.children,n),t.child;case 12:return St(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,u=s.value,Fe(qo,r._currentValue),r._currentValue=u,o!==null)if(nn(o.value,u)){if(o.children===s.children&&!Ct.current){t=Tn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var f=o.dependencies;if(f!==null){u=o.child;for(var p=f.firstContext;p!==null;){if(p.context===r){if(o.tag===1){p=Cn(-1,n&-n),p.tag=2;var y=o.updateQueue;if(y!==null){y=y.shared;var k=y.pending;k===null?p.next=p:(p.next=k.next,k.next=p),y.pending=p}}o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),fu(o.return,n,t),f.lanes|=n;break}p=p.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(q(341));u.lanes|=n,f=u.alternate,f!==null&&(f.lanes|=n),fu(u,n,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}St(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,di(t,n),s=Ht(s),r=r(s),t.flags|=1,St(e,t,r,n),t.child;case 14:return r=t.type,s=Gt(r,t.pendingProps),s=Gt(r.type,s),sf(e,t,r,s,n);case 15:return vp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Gt(r,s),No(e,t),t.tag=1,Et(r)?(e=!0,Wo(t)):e=!1,di(t,n),pp(t,r,s),pu(t,r,s,n),vu(null,t,r,!0,e,n);case 19:return jp(e,t,n);case 22:return gp(e,t,n)}throw Error(q(156,t.tag))};function Op(e,t){return dh(e,t)}function Xv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,r){return new Xv(e,t,n,r)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gv(e){if(typeof e=="function")return jc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$u)return 11;if(e===Uu)return 14}return 2}function ir(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mo(e,t,n,r,s,o){var u=2;if(r=e,typeof e=="function")jc(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case Xr:return Er(n.children,s,o,t);case Bu:u=8,s|=8;break;case Oa:return e=Wt(12,n,t,s|2),e.elementType=Oa,e.lanes=o,e;case La:return e=Wt(13,n,t,s),e.elementType=La,e.lanes=o,e;case Ba:return e=Wt(19,n,t,s),e.elementType=Ba,e.lanes=o,e;case Qf:return vl(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hf:u=10;break e;case qf:u=9;break e;case $u:u=11;break e;case Uu:u=14;break e;case Vn:u=16,r=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=Wt(u,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Er(e,t,n,r){return e=Wt(7,e,r,t),e.lanes=n,e}function vl(e,t,n,r){return e=Wt(22,e,r,t),e.elementType=Qf,e.lanes=n,e.stateNode={isHidden:!1},e}function _a(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function Ra(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oa(0),this.expirationTimes=oa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kc(e,t,n,r,s,o,u,f,p){return e=new Jv(e,t,n,f,p),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Wt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(o),e}function Zv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Lp(e){if(!e)return or;e=e._reactInternals;e:{if(Ar(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(Et(n))return Lh(e,n,t)}return t}function Bp(e,t,n,r,s,o,u,f,p){return e=kc(n,r,!0,e,s,o,u,f,p),e.context=Lp(null),n=e.current,r=jt(),s=rr(n),o=Cn(r,s),o.callback=t??null,tr(n,o,s),e.current.lanes=s,ks(e,s,r),Nt(e,r),e}function gl(e,t,n,r){var s=t.current,o=jt(),u=rr(s);return n=Lp(n),t.context===null?t.context=n:t.pendingContext=n,t=Cn(o,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=tr(s,t,u),e!==null&&(tn(e,s,u,o),Ro(e,s,u)),u}function rl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function bc(e,t){vf(e,t),(e=e.alternate)&&vf(e,t)}function eg(){return null}var $p=typeof reportError=="function"?reportError:function(e){console.error(e)};function _c(e){this._internalRoot=e}xl.prototype.render=_c.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));gl(e,t,null,null)};xl.prototype.unmount=_c.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fr(function(){gl(null,e,null,null)}),t[Nn]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=gh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qn.length&&t!==0&&t<qn[n].priority;n++);qn.splice(n,0,e),n===0&&wh(e)}};function Rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gf(){}function tg(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var y=rl(u);o.call(y)}}var u=Bp(t,r,e,0,null,!1,!1,"",gf);return e._reactRootContainer=u,e[Nn]=u.current,hs(e.nodeType===8?e.parentNode:e),Fr(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var f=r;r=function(){var y=rl(p);f.call(y)}}var p=kc(e,0,!1,null,null,!1,!1,"",gf);return e._reactRootContainer=p,e[Nn]=p.current,hs(e.nodeType===8?e.parentNode:e),Fr(function(){gl(t,p,n,r)}),p}function Sl(e,t,n,r,s){var o=n._reactRootContainer;if(o){var u=o;if(typeof s=="function"){var f=s;s=function(){var p=rl(u);f.call(p)}}gl(t,u,e,s)}else u=tg(n,t,e,s,r);return rl(u)}yh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qi(t.pendingLanes);n!==0&&(Vu(t,n|1),Nt(t,Xe()),!(be&6)&&(xi=Xe()+500,ur()))}break;case 13:Fr(function(){var r=Pn(e,1);if(r!==null){var s=jt();tn(r,e,1,s)}}),bc(e,1)}};Hu=function(e){if(e.tag===13){var t=Pn(e,134217728);if(t!==null){var n=jt();tn(t,e,134217728,n)}bc(e,134217728)}};vh=function(e){if(e.tag===13){var t=rr(e),n=Pn(e,t);if(n!==null){var r=jt();tn(n,e,t,r)}bc(e,t)}};gh=function(){return Pe};xh=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};Xa=function(e,t,n){switch(t){case"input":if(Ka(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=dl(r);if(!s)throw Error(q(90));Xf(r),Ka(r,s)}}}break;case"textarea":Jf(e,n);break;case"select":t=n.value,t!=null&&li(e,!!n.multiple,t,!1)}};sh=xc;oh=Fr;var ng={usingClientEntryPoint:!1,Events:[_s,ei,dl,rh,ih,xc]},$i={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rg={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uh(e),e===null?null:e.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||eg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!go.isDisabled&&go.supportsFiber)try{ll=go.inject(rg),dn=go}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ng;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rc(t))throw Error(q(200));return Zv(e,t,null,n)};Dt.createRoot=function(e,t){if(!Rc(e))throw Error(q(299));var n=!1,r="",s=$p;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=kc(e,1,!1,null,null,n,!1,r,s),e[Nn]=t.current,hs(e.nodeType===8?e.parentNode:e),new _c(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=uh(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Fr(e)};Dt.hydrate=function(e,t,n){if(!wl(t))throw Error(q(200));return Sl(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!Rc(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",u=$p;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),t=Bp(t,null,e,1,n??null,s,!1,o,u),e[Nn]=t.current,hs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new xl(t)};Dt.render=function(e,t,n){if(!wl(t))throw Error(q(200));return Sl(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!wl(e))throw Error(q(40));return e._reactRootContainer?(Fr(function(){Sl(null,null,e,!1,function(){e._reactRootContainer=null,e[Nn]=null})}),!0):!1};Dt.unstable_batchedUpdates=xc;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!wl(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Sl(e,t,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function Up(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Up)}catch(e){console.error(e)}}Up(),Uf.exports=Dt;var ig=Uf.exports,Kp,xf=ig;Kp=xf.createRoot,xf.hydrateRoot;const sg=["Rural","Suburban","Urban"],og=["LRU","TTLOnly","PriorityFresh","PAFTinyLFU"],lg=["Fixed","DeterministicJitter","Randomized"];function ag({options:e,onChange:t,onRun:n,onRunMultiPolicy:r,onRunDeviceComparison:s,onRunNetworkComparison:o,onRunCombinedComparison:u,randomCount:f=10,onChangeRandomCount:p,onRunRandomizedMultiPolicy:y,running:k}){const x={scenario:J.useId(),policy:J.useId(),cacheSize:J.useId(),alerts:J.useId(),reliability:J.useId(),seed:J.useId(),seedMode:J.useId(),replicates:J.useId(),durationSec:J.useId(),qpm:J.useId(),pushRate:J.useId(),pushDedup:J.useId(),pushTau:J.useId(),pfEps:J.useId(),randCount:J.useId(),retryInterval:J.useId(),retryAttempts:J.useId()};return a.jsxs("form",{onSubmit:v=>{v.preventDefault(),n(e)},children:[a.jsx("h3",{children:"Simulation Controls"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.scenario,children:"Scenario"}),a.jsx("select",{id:x.scenario,value:e.scenario,onChange:v=>t({...e,scenario:v.target.value}),children:sg.map(v=>a.jsx("option",{value:v,children:v},v))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.policy,children:"Policy"}),a.jsx("select",{id:x.policy,value:e.policy,onChange:v=>t({...e,policy:v.target.value}),children:og.map(v=>a.jsx("option",{value:v,children:v},v))})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.cacheSize,children:"Cache size"}),a.jsx("input",{id:x.cacheSize,type:"number",min:8,max:4096,value:e.cacheSize,onChange:v=>t({...e,cacheSize:Number(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.alerts,children:"Alerts"}),a.jsx("input",{id:x.alerts,type:"number",min:10,max:1e4,value:e.alerts,onChange:v=>t({...e,alerts:Number(v.target.value)})})]})]}),e.policy==="PriorityFresh"&&a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Severity weight (wS)"}),a.jsx("input",{type:"number",min:0,max:10,step:.1,value:e.wS??2,onChange:v=>t({...e,wS:Number(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Urgency weight (wU)"}),a.jsx("input",{type:"number",min:0,max:10,step:.1,value:e.wU??3,onChange:v=>t({...e,wU:Number(v.target.value)})})]})]}),e.policy==="PriorityFresh"&&a.jsx("div",{className:"row",children:a.jsxs("div",{children:[a.jsx("label",{children:"Freshness weight (wF)"}),a.jsx("input",{type:"number",min:0,max:10,step:.1,value:e.wF??4,onChange:v=>t({...e,wF:Number(v.target.value)})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.reliability,children:"Network reliability [0-1]"}),a.jsx("input",{id:x.reliability,type:"number",step:.01,min:0,max:1,value:e.reliability,onChange:v=>t({...e,reliability:Number(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.seed,children:"Seed"}),a.jsx("input",{id:x.seed,type:"text",value:e.seed,onChange:v=>t({...e,seed:v.target.value})})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.seedMode,children:"Seed mode"}),a.jsx("select",{id:x.seedMode,value:e.seedMode??"Fixed",onChange:v=>t({...e,seedMode:v.target.value}),children:lg.map(v=>a.jsx("option",{value:v,children:v==="Fixed"?"Fixed (single seed)":v==="DeterministicJitter"?"Deterministic jitter":"Randomized"},v))})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.replicates,children:"Replicates"}),a.jsx("input",{id:x.replicates,type:"number",min:1,max:100,value:e.replicates??1,onChange:v=>t({...e,replicates:Number(v.target.value)})})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.durationSec,children:"Duration (sec)"}),a.jsx("input",{id:x.durationSec,type:"number",min:60,max:86400,value:e.durationSec,onChange:v=>t({...e,durationSec:Number(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.qpm,children:"Query rate (/min)"}),a.jsx("input",{id:x.qpm,type:"number",min:0,max:1e4,value:e.queryRatePerMin,onChange:v=>t({...e,queryRatePerMin:Number(v.target.value)})})]})]}),a.jsxs("fieldset",{style:{marginTop:12},children:[a.jsx("legend",{children:"Push controls"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.pushRate,children:"Rate limit (pushes/min)"}),a.jsx("input",{id:x.pushRate,type:"number",min:0,max:600,value:e.pushRateLimitPerMin??0,onChange:v=>t({...e,pushRateLimitPerMin:Number(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.pushDedup,children:"Dedup window (sec)"}),a.jsx("input",{id:x.pushDedup,type:"number",min:0,max:3600,value:e.pushDedupWindowSec??0,onChange:v=>t({...e,pushDedupWindowSec:Number(v.target.value)})})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.pushTau,children:"PF threshold (τ)"}),a.jsx("input",{id:x.pushTau,type:"number",min:0,max:1,step:.01,value:e.pushThreshold??.5,onChange:v=>t({...e,pushThreshold:Number(v.target.value)})})]}),e.policy==="PriorityFresh"&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.pfEps,children:"Exploration ε"}),a.jsx("input",{id:x.pfEps,type:"number",min:0,max:1,step:.01,value:e.pfExplorationEpsilon??0,onChange:v=>t({...e,pfExplorationEpsilon:Number(v.target.value)})})]})]}),a.jsx("div",{className:"muted",style:{marginTop:6},children:"Set rate limit R to enable push simulation; D suppresses rapid repeats per thread; τ is the PF probability threshold."})]}),a.jsxs("fieldset",{style:{marginTop:12},children:[a.jsx("legend",{children:"Delivery"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.retryInterval,children:"Retry interval (sec)"}),a.jsx("input",{id:x.retryInterval,type:"number",min:0,max:3600,value:e.deliveryRetryIntervalSec??0,onChange:v=>t({...e,deliveryRetryIntervalSec:Math.max(0,Number(v.target.value))})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:x.retryAttempts,children:"Max attempts"}),a.jsx("input",{id:x.retryAttempts,type:"number",min:1,max:50,value:e.deliveryMaxAttempts??1,onChange:v=>t({...e,deliveryMaxAttempts:Math.max(1,Number(v.target.value))})})]})]}),a.jsx("div",{className:"muted",style:{marginTop:6},children:"Retries simulate re-attempting network delivery when the first try fails. Set attempts to 1 to disable retries."})]}),a.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{type:"submit",disabled:k,children:k?"Running...":"Run Simulation"}),a.jsx("button",{type:"button",disabled:k,onClick:v=>{v.preventDefault(),r(e)},style:{background:"#1e4d8b",borderColor:"#2563eb"},children:k?"Running...":"Compare All Policies"}),y&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[a.jsx("label",{htmlFor:x.randCount,style:{fontSize:12,color:"#9fb3d9"},children:"Random runs"}),a.jsx("input",{id:x.randCount,type:"number",min:1,max:1e3,value:f,onChange:v=>p&&p(Math.max(1,Number(v.target.value))),style:{width:80}}),a.jsx("button",{type:"button",disabled:k,onClick:v=>{v.preventDefault(),y(e,f)},style:{background:"#0f766e",borderColor:"#14b8a6"},children:k?"Running...":"Randomized Policy Comparisons"})]}),s&&a.jsx("button",{type:"button",disabled:k,onClick:v=>{v.preventDefault(),s(e)},style:{background:"#15803d",borderColor:"#22c55e"},children:k?"Running...":"Device Profile Comparison"}),o&&a.jsx("button",{type:"button",disabled:k,onClick:v=>{v.preventDefault(),o(e)},style:{background:"#c2410c",borderColor:"#f97316"},children:k?"Running...":"Network Reliability Comparison"}),u&&a.jsx("button",{type:"button",disabled:k,onClick:v=>{v.preventDefault(),u(e)},style:{background:"#7c2d12",borderColor:"#dc2626"},children:k?"Running...":"Combined (Device × Network) Comparison"})]}),a.jsxs("div",{className:"muted",style:{marginTop:8},children:[a.jsx("div",{children:"Run Simulation: Execute with selected policy and settings."}),a.jsx("div",{children:"Compare All Policies: Run LRU, TTLOnly, PriorityFresh, and PAFTinyLFU with identical conditions (same seed, cache size, etc.) for direct comparison."}),s&&a.jsx("div",{children:"Device Profile Comparison: Test all policies across 5 device types (32 to 1024 cache entries) to analyze scaling behavior."}),o&&a.jsx("div",{children:"Network Reliability Comparison: Test all policies across 8 network conditions (100% to 30% reliability) to analyze resilience under degraded networks."}),u&&a.jsx("div",{children:"Combined Comparison: Test all policies across ALL combinations of 5 device types × 8 network conditions (160 total runs) for comprehensive real-world analysis."}),a.jsx("div",{style:{marginTop:4},children:"Deterministic jitter derives repeatable seeds from the base seed; randomized mode records generated seeds in run history for replay."})]})]})}const ug="modulepreload",cg=function(e){return"/"+e},wf={},Wp=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=Promise.allSettled(n.map(p=>{if(p=cg(p),p in wf)return;wf[p]=!0;const y=p.endsWith(".css"),k=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${k}`))return;const x=document.createElement("link");if(x.rel=y?"stylesheet":ug,y||(x.as="script"),x.crossOrigin="",x.href=p,f&&x.setAttribute("nonce",f),document.head.appendChild(x),y)return new Promise((v,O)=>{x.addEventListener("load",v),x.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})},Vp=J.createContext(void 0);function dg({children:e}){const[t,n]=J.useState(null),[r,s]=J.useState(0),o=f=>{var p;if(n(f),(p=f==null?void 0:f.timeline)!=null&&p.length){const y=f.timeline[f.timeline.length-1];s(y.t)}else s(0)},u=J.useMemo(()=>({snapshot:t,setSnapshot:o,activeTimeSec:r,setActiveTimeSec:s}),[t,r]);return a.jsx(Vp.Provider,{value:u,children:e})}function Cc(){const e=J.useContext(Vp);if(!e)throw new Error("useSimulationContext must be used within SimulationProvider");return e}function Ca({result:e,weatherHistory:t,anomalyHistory:n,decisionLog:r}){const[s,o]=J.useState(null),[u,f]=J.useState(!1),p=J.useMemo(()=>r?r.slice(-20).reverse():[],[r]),y=J.useMemo(()=>!s||!r?null:r.find(v=>v.alert.id===s),[s,r]);if(!e||e.metrics.cacheHitRate===void 0)return a.jsxs("div",{className:"pf-inspector",children:[a.jsx("h3",{children:"PF Model Inspector"}),a.jsx("div",{className:"muted",children:"Run a simulation to inspect the PF model."})]});const k=e.pfState,x=!!k;return a.jsxs("div",{className:"pf-inspector",style:{marginTop:20},children:[a.jsx("h3",{children:"PF Model Inspector"}),!x&&a.jsxs("div",{className:"muted",style:{padding:12,background:"#1a2847",borderRadius:4,border:"1px solid #2a3b63"},children:[a.jsx("div",{style:{marginBottom:6,fontWeight:600},children:"PF model not available"}),a.jsxs("div",{style:{fontSize:13},children:["The PF (Priority Forecasting) model is only active when using the ",a.jsx("strong",{children:"PriorityFresh"})," caching policy."," ","Select PriorityFresh in the Controls and run a simulation to see model analytics."]})]}),x&&a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{marginBottom:16},children:a.jsxs("div",{style:{display:"flex",gap:12,marginBottom:8},children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-label",children:"Features"}),a.jsx("div",{className:"stat-value",children:k.featureCount})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-label",children:"Hash Buckets"}),a.jsx("div",{className:"stat-value",children:k.hashBucketCount})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-label",children:"Temperature"}),a.jsx("div",{className:"stat-value",children:k.temperature.toFixed(2)})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"stat-label",children:"Learning Rate"}),a.jsx("div",{className:"stat-value",children:k.learningRate.toFixed(3)})]})]})}),r&&r.length>0&&a.jsxs("div",{style:{marginBottom:16},children:[a.jsxs("h4",{children:["Recent Decisions (",p.length,")"]}),a.jsx("div",{className:"decision-log",style:{maxHeight:300,overflowY:"auto",fontSize:13},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{borderBottom:"1px solid #4a5f8c"},children:[a.jsx("th",{style:{padding:"4px 8px",textAlign:"left"},children:"Time"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left"},children:"Region"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left"},children:"Severity"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left"},children:"Urgency"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"right"},children:"Probability"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"right"},children:"Boost"}),a.jsx("th",{style:{padding:"4px 8px",textAlign:"left"},children:"Action"})]})}),a.jsx("tbody",{children:p.map(v=>a.jsxs("tr",{onClick:()=>o(v.alert.id),style:{cursor:"pointer",backgroundColor:s===v.alert.id?"#2a3f5f":"transparent",borderBottom:"1px solid #3a4f6c"},children:[a.jsxs("td",{style:{padding:"4px 8px"},children:[Math.floor(v.t),"s"]}),a.jsx("td",{style:{padding:"4px 8px"},children:v.alert.regionId||"-"}),a.jsx("td",{style:{padding:"4px 8px"},children:a.jsx("span",{className:`severity-badge ${v.alert.severity.toLowerCase()}`,children:v.alert.severity})}),a.jsx("td",{style:{padding:"4px 8px"},children:v.alert.urgency}),a.jsx("td",{style:{padding:"4px 8px",textAlign:"right"},children:v.score?(v.score.probability*100).toFixed(1)+"%":"-"}),a.jsx("td",{style:{padding:"4px 8px",textAlign:"right",color:v.score&&v.score.boost>0?"#4ade80":"#f87171"},children:v.score?(v.score.boost>0?"+":"")+v.score.boost.toFixed(1):"-"}),a.jsx("td",{style:{padding:"4px 8px"},children:a.jsx("span",{className:`action-badge ${v.action}`,children:v.action})})]},v.alert.id))})]})})]}),y&&a.jsxs("div",{style:{marginBottom:16,padding:12,backgroundColor:"#1a2842",borderRadius:4},children:[a.jsx("h4",{children:"Selected Alert Details"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,fontSize:13},children:[a.jsxs("div",{children:[a.jsx("strong",{children:"ID:"})," ",y.alert.id]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Event:"})," ",y.alert.eventType]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Region:"})," ",y.alert.regionId||"Unknown"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Freshness:"})," ",(y.freshness*100).toFixed(1),"%"]}),y.score&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Base Score:"})," ",y.score.base.toFixed(2)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Total Score:"})," ",y.score.total.toFixed(2)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Exploration:"})," ",y.score.exploration.toFixed(2)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Probability:"})," ",(y.score.probability*100).toFixed(1),"%"]})]})]})]}),a.jsx("div",{style:{marginTop:16},children:a.jsxs("button",{onClick:()=>f(!u),children:[u?"Hide":"Show"," Model Weights"]})}),u&&k.weights&&a.jsxs("div",{style:{marginTop:12,padding:12,backgroundColor:"#1a2842",borderRadius:4,maxHeight:300,overflowY:"auto"},children:[a.jsx("h4",{children:"Weight Vector (first 20)"}),a.jsxs("div",{style:{fontFamily:"monospace",fontSize:12},children:[k.weights.slice(0,20).map((v,O)=>a.jsxs("div",{style:{marginBottom:2},children:[a.jsxs("span",{style:{color:"#9fb3d9"},children:["w[",O,"]:"]})," ",a.jsx("span",{style:{color:v>0?"#4ade80":"#f87171"},children:v.toFixed(4)})]},O)),k.weights.length>20&&a.jsxs("div",{className:"muted",children:["... and ",k.weights.length-20," more"]})]})]})]}),a.jsx("style",{children:`
        .pf-inspector .stat-card {
          flex: 1;
          padding: 8px 12px;
          background: #1a2842;
          border-radius: 4px;
        }
        .pf-inspector .stat-label {
          font-size: 11px;
          color: #9fb3d9;
          margin-bottom: 4px;
        }
        .pf-inspector .stat-value {
          font-size: 18px;
          font-weight: 600;
          color: #d7e1f7;
        }
        .severity-badge {
          padding: 2px 6px;
          border-radius: 3px;
          font-size: 11px;
          font-weight: 600;
          text-transform: uppercase;
        }
        .severity-badge.extreme { background: #dc2626; color: white; }
        .severity-badge.severe { background: #ea580c; color: white; }
        .severity-badge.moderate { background: #f59e0b; color: white; }
        .severity-badge.minor { background: #84cc16; color: white; }
        .severity-badge.unknown { background: #6b7280; color: white; }
        .action-badge {
          padding: 2px 6px;
          border-radius: 3px;
          font-size: 11px;
          font-weight: 600;
          text-transform: uppercase;
        }
        .action-badge.cached { background: #059669; color: white; }
        .action-badge.pushed { background: #2563eb; color: white; }
        .action-badge.evicted { background: #dc2626; color: white; }
        .action-badge.dropped { background: #6b7280; color: white; }
      `})]})}function Ea({result:e}){const t=J.useMemo(()=>e.issuedAlerts.map(N=>({time:N.issuedAt,alert:N,severity:N.severity,urgency:N.urgency,region:N.regionId??N.geokey??"unknown"})).sort((N,H)=>N.time-H.time),[e]),n=J.useMemo(()=>t.length===0?{min:0,max:100}:{min:0,max:Math.max(...e.timeline.map(H=>H.t),...t.map(H=>H.time))},[t,e.timeline]),r=J.useMemo(()=>{const N=new Map;for(const H of t)N.has(H.region)||N.set(H.region,[]),N.get(H.region).push(H);return Array.from(N.entries()).sort((H,g)=>g[1].length-H[1].length)},[t]),s=N=>{switch(N){case"Extreme":return"#dc2626";case"Severe":return"#f59e0b";case"Moderate":return"#eab308";case"Minor":return"#84cc16";default:return"#64748b"}},o=N=>{switch(N){case"Immediate":return"IMM";case"Expected":return"EXP";case"Future":return"FUT";case"Past":return"PST";default:return""}},u=N=>N<60?`${Math.round(N)}s`:N<3600?`${Math.floor(N/60)}m`:`${Math.floor(N/3600)}h${Math.floor(N%3600/60)}m`;if(t.length===0)return a.jsxs("div",{className:"card",style:{marginTop:12},children:[a.jsx("h4",{children:"Alert Timeline"}),a.jsx("div",{className:"muted",children:"No alerts issued in this run."})]});const f=e.timeline[e.timeline.length-1],p=(f==null?void 0:f.hits)??0,y=(f==null?void 0:f.misses)??0,k=1200,x=Math.min(t.length*18+60,500),v={top:40,right:120,bottom:20,left:80},O=k-v.left-v.right,B=N=>v.left+(N-n.min)/(n.max-n.min)*O;return a.jsxs("div",{className:"card",style:{marginTop:12},children:[a.jsx("h4",{children:"Alert Timeline & Regional Distribution"}),a.jsxs("div",{className:"muted",style:{fontSize:12,marginBottom:8},children:["Chronological view of all ",t.length," alerts over ",u(n.max)]}),a.jsxs("div",{style:{marginBottom:12},children:[a.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:13},children:"Top Regions by Alert Count"}),a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:8},children:r.slice(0,10).map(([N,H])=>a.jsxs("div",{className:"stat-card",style:{padding:8},children:[a.jsx("div",{className:"muted",style:{fontSize:10},children:N}),a.jsx("div",{style:{fontSize:16,fontWeight:600},children:H.length}),a.jsxs("div",{className:"muted",style:{fontSize:9},children:[H.filter(g=>g.severity==="Extreme"||g.severity==="Severe").length," high"]})]},N))})]}),a.jsx("div",{style:{overflowX:"auto",overflowY:t.length>25?"auto":"visible",maxHeight:t.length>25?500:void 0,border:"1px solid #2a3b63",borderRadius:4,background:"#0b132b"},children:a.jsxs("svg",{width:k,height:x,style:{display:"block"},children:[a.jsx("line",{x1:v.left,y1:v.top,x2:k-v.right,y2:v.top,stroke:"#2a3b63",strokeWidth:2}),[0,.2,.4,.6,.8,1].map((N,H)=>{const g=n.min+N*(n.max-n.min),w=B(g);return a.jsxs("g",{children:[a.jsx("line",{x1:w,y1:v.top-5,x2:w,y2:v.top+5,stroke:"#64748b",strokeWidth:1}),a.jsx("line",{x1:w,y1:v.top,x2:w,y2:x-v.bottom,stroke:"#1e293b",strokeWidth:1,strokeDasharray:"2,3",opacity:.3}),a.jsx("text",{x:w,y:v.top-10,fill:"#94a3b8",fontSize:11,textAnchor:"middle",children:u(g)})]},H)}),t.map((N,H)=>{const g=B(N.time),w=v.top+10+H*18,j=s(N.severity);return a.jsxs("g",{children:[a.jsx("circle",{cx:g,cy:w,r:4,fill:j,stroke:"#0b132b",strokeWidth:1.5}),a.jsx("text",{x:v.left-10,y:w+4,fill:"#94a3b8",fontSize:10,textAnchor:"end",children:N.region}),a.jsxs("text",{x:k-v.right+10,y:w+4,fill:"#e0e6f2",fontSize:9,textAnchor:"start",children:[N.severity.substring(0,3).toUpperCase()," / ",o(N.urgency)]}),a.jsx("line",{x1:v.left,y1:w,x2:g-4,y2:w,stroke:j,strokeWidth:.5,opacity:.3})]},H)})]})}),a.jsxs("div",{style:{display:"flex",gap:16,marginTop:8,fontSize:11,flexWrap:"wrap"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[a.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:"#dc2626"}}),a.jsx("span",{className:"muted",children:"Extreme"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[a.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:"#f59e0b"}}),a.jsx("span",{className:"muted",children:"Severe"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[a.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:"#eab308"}}),a.jsx("span",{className:"muted",children:"Moderate"})]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[a.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:"#84cc16"}}),a.jsx("span",{className:"muted",children:"Minor"})]})]}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:8,marginTop:12},children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Total Alerts"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:e.issuedAlerts.length})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Delivered"}),a.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#22c55e"},children:e.deliveredAlerts.length})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Cache Hits"}),a.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#3b82f6"},children:p})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Cache Misses"}),a.jsx("div",{style:{fontSize:18,fontWeight:600,color:"#ef4444"},children:y})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Hit Rate"}),a.jsxs("div",{style:{fontSize:18,fontWeight:600},children:[((e.metrics.cacheHitRate??0)*100).toFixed(1),"%"]})]})]})]})}function _n(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function Rn(e){let t=e>>>0;return function(){t|=0,t=t+1831565813|0;let n=Math.imul(t^t>>>15,1|t);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}}function jl(e,t){return t>=e.issuedAt+e.ttlSec}class fg{constructor(t){ve(this,"name","LRU");ve(this,"cap");ve(this,"map",new Map);ve(this,"order",[]);this.cap=t}touch(t){const n=this.order.indexOf(t);n>=0&&this.order.splice(n,1),this.order.push(t)}purgeExpired(t){for(const n of[...this.map.keys()]){const r=this.map.get(n);if(jl(r,t)){this.map.delete(n);const s=this.order.indexOf(n);s>=0&&this.order.splice(s,1)}}}put(t,n){for(this.purgeExpired(n),this.map.set(t.id,t),this.touch(t.id);this.map.size>this.cap;){const r=this.order.shift();if(r)this.map.delete(r);else break}}get(t,n){this.purgeExpired(n);const r=this.map.get(t);return r&&this.touch(t),r}has(t,n){return!!this.get(t,n)}size(){return this.map.size}entries(t){return this.purgeExpired(t),[...this.map.values()]}}class hg{constructor(t){ve(this,"name","TTLOnly");ve(this,"cap");ve(this,"map",new Map);ve(this,"order",[]);this.cap=t}purgeExpired(t){for(const n of[...this.map.keys()]){const r=this.map.get(n);if(jl(r,t)){this.map.delete(n);const s=this.order.indexOf(n);s>=0&&this.order.splice(s,1)}}}put(t,n){for(this.purgeExpired(n),this.map.set(t.id,t),this.order.push(t.id);this.map.size>this.cap;){const r=this.order.shift();if(r)this.map.delete(r);else break}}get(t,n){return this.purgeExpired(n),this.map.get(t)}has(t,n){return!!this.get(t,n)}size(){return this.map.size}entries(t){return this.purgeExpired(t),[...this.map.values()]}}class pg{constructor(t,n,r){ve(this,"name","PriorityFresh");ve(this,"cap");ve(this,"map",new Map);ve(this,"w");ve(this,"lambda",1/600);ve(this,"predictor");this.cap=t,this.w={wS:2,wU:3,wF:4,...n},this.predictor=r}setPredictor(t){this.predictor=t}purgeExpired(t){for(const n of[...this.map.keys()]){const r=this.map.get(n);jl(r,t)&&this.map.delete(n)}}put(t,n){if(this.purgeExpired(n),this.map.size<this.cap){this.map.set(t.id,t);return}let r=null,s=1/0;for(const[o,u]of this.map){const f=this.score(u,n);f<s&&(s=f,r=o)}r&&this.map.delete(r),this.map.set(t.id,t)}get(t,n){return this.purgeExpired(n),this.map.get(t)}has(t,n){return!!this.get(t,n)}size(){return this.map.size}entries(t){return this.purgeExpired(t),[...this.map.values()]}sevWeight(t){return t==="Extreme"?4:t==="Severe"?3:t==="Moderate"?2:t==="Minor"?1:2}urgWeight(t){return t==="Immediate"?3:t==="Expected"?2:t==="Future"?1.5:t==="Past"?.5:1.5}freshness(t,n){const r=Math.max(0,n-t.issuedAt);return Math.exp(-this.lambda*r)}score(t,n){const r=this.sevWeight(t.severity),s=this.urgWeight(t.urgency),o=this.freshness(t,n),u=this.w.wS*r+this.w.wU*s+this.w.wF*o;if(!this.predictor)return u;const f={now:n,freshness:o,baseScore:u};return this.predictor.score(t,f,{explore:!0}).total}}class mg{constructor(t=2048){ve(this,"size");ve(this,"a");ve(this,"b");ve(this,"c");ve(this,"d");this.size=1<<Math.ceil(Math.log2(Math.max(16,t))),this.a=new Uint16Array(this.size),this.b=new Uint16Array(this.size),this.c=new Uint16Array(this.size),this.d=new Uint16Array(this.size)}increment(t){const n=this.hash(t);this.a[n&this.size-1]++,this.b[n>>>8&this.size-1]++,this.c[n>>>16&this.size-1]++,this.d[n>>>24&this.size-1]++}estimate(t){const n=this.hash(t),r=this.a[n&this.size-1],s=this.b[n>>>8&this.size-1],o=this.c[n>>>16&this.size-1],u=this.d[n>>>24&this.size-1];return Math.min(r,s,o,u)}hash(t){let n=2166136261;for(let r=0;r<t.length;r++)n^=t.charCodeAt(r),n=Math.imul(n,16777619);return n^=n>>>13,n=Math.imul(n,1540483477),n^=n>>>15,n>>>0}}class yg{constructor(t){ve(this,"name","PAFTinyLFU");ve(this,"cap");ve(this,"map",new Map);ve(this,"order",[]);ve(this,"sketch");this.cap=t,this.sketch=new mg(4096)}purgeExpired(t){for(const n of[...this.map.keys()]){const r=this.map.get(n);if(jl(r,t)){this.map.delete(n);const s=this.order.indexOf(n);s>=0&&this.order.splice(s,1)}}}touch(t){const n=this.order.indexOf(t);n>=0&&this.order.splice(n,1),this.order.push(t),this.sketch.increment(t)}put(t,n){this.purgeExpired(n);const r=t.threadKey??t.id;if(this.sketch.increment(r),this.map.size<this.cap){this.map.set(t.id,t),this.touch(t.id);return}const s=this.order.slice(0,Math.min(8,this.order.length));let o=s[0],u=this.sketchEstimateFor(o);for(const p of s){const y=this.sketchEstimateFor(p);y<u&&(o=p,u=y)}if(this.sketch.estimate(r)>=u){if(o){this.map.delete(o);const p=this.order.indexOf(o);p>=0&&this.order.splice(p,1)}this.map.set(t.id,t),this.touch(t.id)}}get(t,n){this.purgeExpired(n);const r=this.map.get(t);return r&&this.touch(t),r}has(t,n){return!!this.get(t,n)}size(){return this.map.size}entries(t){return this.purgeExpired(t),[...this.map.values()]}sketchEstimateFor(t){return this.sketch.estimate(t)}}const Hp={name:"Urban",baseAlertRatePerMin:36,meanTTL:900,targetFirstDeliverySec:120,segments:[{startSec:0,endSec:180,reliability:.95},{startSec:180,endSec:420,reliability:.6,alertRateMul:1.5},{startSec:420,endSec:900,reliability:.88,queryRateMul:1.8},{startSec:900,endSec:1e9,reliability:.96}]},qp={name:"Suburban",baseAlertRatePerMin:12,meanTTL:1200,targetFirstDeliverySec:180,segments:[{startSec:0,endSec:240,reliability:.92},{startSec:240,endSec:720,reliability:.75,alertRateMul:1.2},{startSec:720,endSec:1200,reliability:.85,queryRateMul:1.4},{startSec:1200,endSec:1e9,reliability:.93}]},Qp={name:"Rural",baseAlertRatePerMin:6,meanTTL:1800,targetFirstDeliverySec:300,segments:[{startSec:0,endSec:300,reliability:.9},{startSec:300,endSec:900,reliability:.55,alertRateMul:1.2,queryRateMul:.8},{startSec:900,endSec:1500,reliability:.8,alertRateMul:1,queryRateMul:1.5},{startSec:1500,endSec:1e9,reliability:.92}]};function il(e,t){for(const n of e.segments)if(t>=n.startSec&&t<n.endSec)return n;return e.segments[e.segments.length-1]}const vg=3e3,Sf=36;function Yp(e,t,n,r){const s=Math.max(1,(r==null?void 0:r.regions)??8),o=gg(e,t,n,s),u=o.map((f,p)=>{const y=xg(p,o,t,n,e),k=Nu(.7,1.3,.9+(e()-.5)*.6),x=e()<.15?"Extreme":e()<.55?"Severe":"Moderate";return{id:`R${p+1}`,center:f,polygon:y,localFactor:k,severity:x}});return{width:t,height:n,regions:u}}function gg(e,t,n,r){const s=[],o=Math.max(40,Math.min(t,n)/Math.sqrt(r))*.8;let u=0;for(;s.length<r&&u<vg;){u++;const f=[60+e()*(t-120),60+e()*(n-120)];s.every(p=>jg(p,f)>=o)&&s.push(f)}for(;s.length<r;)s.push([60+e()*(t-120),60+e()*(n-120)]);return s}function xg(e,t,n,r,s){const[o,u]=t[e],f=[];for(let p=0;p<Sf;p++){const y=Math.PI*2*p/Sf,k=[Math.cos(y),Math.sin(y)];let x=wg(o,u,k,n,r);for(let H=0;H<t.length;H++){if(H===e)continue;const g=Sg([o,u],t[H],k);g>0&&g<x&&(x=g)}const v=.78+s()*.18,O=Math.max(25,x*v),B=Nu(0,n,o+k[0]*O),N=Nu(0,r,u+k[1]*O);f.push([B,N])}return f}function wg(e,t,n,r,s){const[o,u]=n,f=1e-6;let p=Number.POSITIVE_INFINITY;if(Math.abs(o)>f){const y=(0-e)/o,k=(r-e)/o;y>f&&(p=Math.min(p,y)),k>f&&(p=Math.min(p,k))}if(Math.abs(u)>f){const y=(0-t)/u,k=(s-t)/u;y>f&&(p=Math.min(p,y)),k>f&&(p=Math.min(p,k))}return!Number.isFinite(p)||p<=0?Math.max(r,s):p}function Sg(e,t,n){const r=t[0]-e[0],s=t[1]-e[1],o=r*n[0]+s*n[1];return o<=0?Number.POSITIVE_INFINITY:(r*r+s*s)/(2*o)}function jg(e,t){const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function Nu(e,t,n){return Math.max(e,Math.min(t,n))}function Xp(e,t){const n=new Map;for(const r of e.regions){const s=r.severity==="Extreme"?.2:r.severity==="Severe"?.1:0,o=Ee(.25+s+(t()-.5)*.15),u=Gp(10,160,80+(t()-.5)*20+o*45),f=Ee(.3+(t()-.5)*.2+s*.3),p=Ee(.5+(r.localFactor-1)*.4+(t()-.5)*.2),y=Ee(.35+o*.5+(t()-.5)*.25);n.set(r.id,{regionId:r.id,floodFrequency:o,rainfallMeanMm:u,rainfallVolatility:f,drainageScore:p,shelterDemandIndex:y})}return n}function Pu(e,t){const n=new Map;for(const r of e.regions){const s=Ee(.65+(r.localFactor-1)*.15+(t()-.5)*.2),o=Ee(.08+(1-s)*.3+(t()-.5)*.12),u=t()<.3?.15:0,f=Ee(.05+u+(t()-.5)*.08),p=Ee(s-o*.3-f*.2),y=r.severity==="Extreme"?1800:r.severity==="Severe"?1200:600,k=Math.max(300,y+(t()-.5)*900),x=Ee(.15+(t()-.5)*.1),v=Ee(x*(.4+t()*.3)),O=Ee(x*(.6-t()*.3)),B=t();let N=1;B<.15?N=1.1+t()*.15:B>.85&&(N=.85-t()*.1),n.set(r.id,{regionId:r.id,falseAlarmRate:o,lastMinuteDiversionRate:f,historicalAccuracy:p,typicalLeadTimeSec:k,underestimationRate:v,overestimationRate:O,accuracyTrend:N})}return n}class kg{constructor(t,n,r,s){ve(this,"weights");ve(this,"g2");ve(this,"learningRate");ve(this,"regularization");ve(this,"decay");ve(this,"baseScoreNorm");ve(this,"explorationEpsilon");ve(this,"temperature");ve(this,"rng");ve(this,"regionLookup");ve(this,"weatherLookup");ve(this,"anomalyLookup");ve(this,"hashBucketCount");var f,p;this.regionLookup=new Map(t.regions.map(y=>[y.id,y])),this.weatherLookup=n,this.anomalyLookup=r,this.hashBucketCount=Math.max(0,Math.floor((s==null?void 0:s.hashBucketCount)??32));const o=23+this.hashBucketCount,u=s==null?void 0:s.initialState;this.weights=((f=u==null?void 0:u.weights)==null?void 0:f.length)===o?[...u.weights]:new Array(o).fill(0),this.g2=((p=u==null?void 0:u.g2)==null?void 0:p.length)===o?[...u.g2]:new Array(o).fill(1e-6),this.learningRate=(s==null?void 0:s.learningRate)??(u==null?void 0:u.learningRate)??.05,this.regularization=(s==null?void 0:s.regularization)??(u==null?void 0:u.regularization)??5e-4,this.decay=(s==null?void 0:s.decay)??(u==null?void 0:u.decay)??.99,this.baseScoreNorm=(s==null?void 0:s.baseScoreNorm)??15,this.explorationEpsilon=Ee((s==null?void 0:s.explorationEpsilon)??0),this.temperature=Math.max(.001,(s==null?void 0:s.temperature)??(u==null?void 0:u.temperature)??1),this.rng=typeof(s==null?void 0:s.rng)=="function"?s.rng:(s==null?void 0:s.rng)??Math.random}setExplorationEpsilon(t){this.explorationEpsilon=Ee(t)}setRng(t){this.rng=t}getState(){return{weights:[...this.weights],g2:[...this.g2],featureCount:this.weights.length,hashBucketCount:this.hashBucketCount,temperature:this.temperature,learningRate:this.learningRate,regularization:this.regularization,decay:this.decay}}ingestHistoricalSamples(t){for(const n of t){const r=this.buildFeaturesFromSample(n);this.train(r,Ee(n.label))}}score(t,n,r){const s=this.buildFeatures(t,n),o=this.predict(s);let u=n.baseScore*(o-.5),f=0;return r!=null&&r.explore&&this.explorationEpsilon>0&&this.rng()<this.explorationEpsilon&&(f=(this.rng()-.5)*n.baseScore*.6,u+=f),{base:n.baseScore,boost:u,total:n.baseScore+u,probability:o,exploration:f}}boost(t,n){return this.score(t,n).boost}observeRetrieval(t,n){const r=this.labelForOutcome(t,n),s=this.buildFeatures(t,{now:n.servedAt,freshness:n.freshness,baseScore:this.baseScore(t)});this.train(s,r)}observeDrop(t,n){const r=this.buildFeatures(t,{now:n,freshness:0,baseScore:this.baseScore(t)});this.train(r,0)}baseScore(t){return this.baseScoreNorm*.6+xr(t.severity)*3+(t.urgency==="Immediate"?2:0)}labelForOutcome(t,n){const r=xr(t.severity),s=t.urgency==="Immediate"?1:.4,o=Ee(n.freshness),u=n.slaSec?Ee(1-n.latencySec/Math.max(n.slaSec*1.5,1)):.6;return Ee(.4*r+.2*s+.25*o+.15*u)}buildFeatures(t,n){const r=t.regionId??t.geokey??"",s=r?this.regionLookup.get(r):void 0,o=r?this.weatherLookup.get(r):void 0,u=r?this.anomalyLookup.get(r):void 0;return this.deriveFeatures({severity:xr(t.severity),urgency:t.urgency==="Immediate"?1:0,ttl:Ee(t.ttlSec/3600),freshness:Ee(n.freshness),regionSeverity:s?xr(s.severity):.4,localReliability:s?Ee((s.localFactor-.7)/.6):.5,floodFrequency:(o==null?void 0:o.floodFrequency)??.3,rainfallMean:o?Ee(o.rainfallMeanMm/160):.5,rainfallVolatility:(o==null?void 0:o.rainfallVolatility)??.4,drainageRisk:o?1-o.drainageScore:.5,shelterDemand:(o==null?void 0:o.shelterDemandIndex)??.3,baseScoreNorm:Ee(n.baseScore/this.baseScoreNorm),falseAlarmRate:(u==null?void 0:u.falseAlarmRate)??.1,diversionRate:(u==null?void 0:u.lastMinuteDiversionRate)??.05,historicalAccuracy:(u==null?void 0:u.historicalAccuracy)??.7,leadTimeNorm:u?Ee(u.typicalLeadTimeSec/3600):.3,underestimationRate:(u==null?void 0:u.underestimationRate)??.08,overestimationRate:(u==null?void 0:u.overestimationRate)??.12,accuracyTrend:u?Ee((u.accuracyTrend-.75)/.5):.5,now:n.now,updateNo:t.updateNo??1,hashes:this.hashedFeatures([t.eventType??"Other",r,t.threadKey??""])})}buildFeaturesFromSample(t){const n=t.baseScore??this.baseScoreFromSample(t.alert);return this.deriveFeatures({severity:xr(t.alert.severity),urgency:t.alert.urgency==="Immediate"?1:0,ttl:Ee(t.alert.ttlSec/3600),freshness:Ee(t.freshness),regionSeverity:t.alert.regionSeverity?xr(t.alert.regionSeverity):.4,localReliability:t.alert.localReliability??.5,floodFrequency:t.alert.floodFrequency??.3,rainfallMean:t.alert.rainfallMeanMm?Ee(t.alert.rainfallMeanMm/160):.5,rainfallVolatility:t.alert.rainfallVolatility??.4,drainageRisk:t.alert.drainageScore!=null?1-t.alert.drainageScore:.5,shelterDemand:t.alert.shelterDemandIndex??.3,baseScoreNorm:Ee(n/this.baseScoreNorm),falseAlarmRate:t.alert.falseAlarmRate??.1,diversionRate:t.alert.lastMinuteDiversionRate??.05,historicalAccuracy:t.alert.historicalAccuracy??.7,leadTimeNorm:t.alert.typicalLeadTimeSec?Ee(t.alert.typicalLeadTimeSec/3600):.3,underestimationRate:t.alert.underestimationRate??.08,overestimationRate:t.alert.overestimationRate??.12,accuracyTrend:t.alert.accuracyTrend?Ee((t.alert.accuracyTrend-.75)/.5):.5,now:0,updateNo:1,hashes:this.hashedFeatures(["hist",t.alert.regionId??t.alert.geokey??"",t.alert.geokey??""])})}deriveFeatures(t){const n=(t.now%86400+86400)%86400,r=2*Math.PI*n/86400,s=Math.sin(r),o=Math.cos(r),u=Ee(t.updateNo/4),f=Ee(t.historicalAccuracy*.5+(1-t.falseAlarmRate)*.25+(1-t.diversionRate)*.15+t.accuracyTrend*.1);return[1,t.severity,t.urgency,t.ttl,t.freshness,t.regionSeverity,t.localReliability,t.floodFrequency,t.rainfallMean,t.rainfallVolatility,t.drainageRisk,t.shelterDemand,t.baseScoreNorm,t.falseAlarmRate,t.diversionRate,t.historicalAccuracy,t.leadTimeNorm,t.underestimationRate,t.overestimationRate,f,s,o,u,...t.hashes]}predict(t){const r=this.weights.reduce((s,o,u)=>s+o*t[u],0)/this.temperature;return 1/(1+Math.exp(-r))}train(t,n){const r=this.predict(t),s=n-r;for(let o=0;o<this.weights.length;o++){const u=s*t[o];this.g2[o]=this.decay*this.g2[o]+u*u;const f=this.learningRate/Math.sqrt(this.g2[o]+1e-6);this.weights[o]=(1-this.regularization)*this.weights[o]+f*u}}hashedFeatures(t){const n=this.hashBucketCount,r=new Array(n).fill(0);if(n<=0)return r;const s=Math.max(1,t.length);for(const o of t){if(!o)continue;const u=bg(o)%n;r[u]+=1/s}return r}baseScoreFromSample(t){return this.baseScoreNorm*.6+xr(t.severity)*3+(t.urgency==="Immediate"?2:0)}}function bg(e){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t=Math.imul(t,16777619);return t>>>0}function xr(e){return e==="Extreme"?1:e==="Severe"?.75:e==="Moderate"?.45:e==="Minor"?.25:.4}function Gp(e,t,n){return Math.max(e,Math.min(t,n))}function Ee(e){return Gp(0,1,e)}const _g=960,Rg=540,Cg={Urban:18,Suburban:12,Rural:8};function Ec(e){var ue;const t=Bg(e.scenario),n=Ng(e),r=new Map(n.regions.map(me=>[me.id,me])),s=new Map;for(const me of n.regions)s.set(me.id,{delivered:0,dropped:0,firstLatSum:0,firstRetrievals:0});const o=Math.max(1,Math.floor(e.deliveryRetryIntervalSec??0)),u=Math.max(1,Math.floor(e.deliveryMaxAttempts??1));let f;if(e.policy==="PriorityFresh"){const me=_n(`${e.seed}|weather`),je=Rn(me),xe=Xp(n,je),Pt=_n(`${e.seed}|anomaly`),cr=Rn(Pt),Tt=Pu(n,cr),$e=e.pfRandomize?Math.random:Rn(_n(`${e.seed}|pf`));f=new kg(n,xe,Tt,{explorationEpsilon:e.pfExplorationEpsilon,initialState:e.pfInitialState,hashBucketCount:e.pfHashBuckets,temperature:e.pfTemperature,decay:e.pfDecay,learningRate:e.pfLearningRate,regularization:e.pfRegularization,rng:$e}),(ue=e.pfTrainingSamples)!=null&&ue.length&&f.ingestHistoricalSamples(e.pfTrainingSamples)}const p=Rn(_n(e.seed)),y=Pg(e,t,n,p),k=Eg(e,f);let x=0,v=0,O=0,B=0,N=0,H=0,g=0,w=0,j=0,I=0;const $=new Map,D=new Map,W=[],Y=new Map,ee=new Map,le=new Map,pe=[],Ne=[],_e=[],Le=[],Ze=new Map;for(const me of y){const je=Math.floor(me.issuedAt);Ze.has(je)||Ze.set(je,[]),Ze.get(je).push(me)}const Lt=e.queryRatePerMin/60,hn=0,te=1,de=Math.max(1,Math.floor(e.durationSec/te));let re=hn;for(let me=0;me<de;me++,re+=te){const je=il(t,re),xe=Ze.get(Math.floor(re))??[];for(const $e of xe){Ne.push($e);const Me=$e.regionId??$e.geokey??"",qe=Ui(s,Me);pn($e,re)||(u>1?Le.push({alert:$e,nextAttemptAt:re+o,attemptsLeft:u-1}):(qe.dropped+=1,f&&f.observeDrop($e,re)))}if(Le.length)for(let $e=Le.length-1;$e>=0;$e--){const Me=Le[$e],qe=Me.alert;if(re>=qe.issuedAt+qe.ttlSec){const rn=qe.regionId??qe.geokey??"",Bt=Ui(s,rn);Bt.dropped+=1,f&&f.observeDrop(qe,re),Le.splice($e,1);continue}if(re>=Me.nextAttemptAt)if(pn(qe,re))Le.splice($e,1);else if(Me.attemptsLeft>1)Me.attemptsLeft-=1,Me.nextAttemptAt=re+o;else{const Bt=qe.regionId??qe.geokey??"",et=Ui(s,Bt);et.dropped+=1,f&&f.observeDrop(qe,re),Le.splice($e,1)}}const Pt=je.queryRateMul??1,cr=Lt*Pt;let Tt=zg(cr,p);for(;Tt-- >0;){const $e=Dg(k,re,p);if(!$e){O++;continue}const Me=k.get($e.id,re);if(Me){v++;const qe=Tu(Me,re);N+=qe,H++,qe<=0&&B++;const rn=Math.max(0,re-Me.issuedAt);f&&f.observeRetrieval(Me,{freshness:qe,latencySec:rn,servedAt:re,slaSec:t.targetFirstDeliverySec});const Bt=Me.threadKey??Me.id;if(!Y.has(Bt)){const et=Me.urgency==="Immediate"||Me.severity==="Extreme"||Me.severity==="Severe";Y.set(Bt,{t:re,actionable:et})}if(!le.has(Me.id)){const et=Math.max(0,re-Me.issuedAt);le.set(Me.id,et);const mn=Me.regionId??Me.geokey??"",Qt=Ui(s,mn);Qt.firstRetrievals+=1,Qt.firstLatSum+=et}}else O++,f&&f.observeDrop($e,re)}_e.push({t:re,cacheSize:k.size(),hits:v,misses:O})}const Re=v+O,G=Math.max(1,Y.size);let Te=0;const Be=t.targetFirstDeliverySec;for(const[,me]of Y)me.t<=Be&&Te++;const Ge=[...Y.values()].filter(me=>me.actionable).length,ge={cacheHitRate:Re?v/Re:0,deliveryRate:e.alerts?x/e.alerts:0,avgFreshness:H?N/H:0,staleAccessRate:Re?B/Re:0,redundancyIndex:x?g/x:0,actionabilityFirstRatio:Ge/G,timelinessConsistency:G?Te/G:0,pushesSent:w,pushSuppressRate:x?j/x:0,pushDuplicateRate:w?I/w:0,pushTimelyFirstRatio:D.size?Array.from(D.values()).filter(me=>me<=Be).length/D.size:0},rt=Array.from(s.entries()).map(([me,je])=>({regionId:me,delivered:je.delivered,dropped:je.dropped,firstRetrievals:je.firstRetrievals,avgFirstRetrievalLatencySec:je.firstRetrievals?je.firstLatSum/je.firstRetrievals:null}));return{metrics:ge,timeline:_e,info:`${e.policy} on ${e.scenario} | cache=${e.cacheSize} | alerts=${e.alerts} | reliability=${e.reliability} | regions=${n.regions.length}`,issuedAlerts:Ne,deliveredAlerts:pe,environment:n,regionStats:rt,scenario:e.scenario,baselineReliability:e.reliability,seed:e.seed,pfState:f?f.getState():void 0};function pn(me,je){const xe=me.regionId??me.geokey??"",Pt=r.get(xe),cr=il(t,je),Tt=(Pt==null?void 0:Pt.localFactor)??1,$e=Na(e.reliability*cr.reliability*Tt),Me=Ui(s,xe);if(p()<$e){if(x++,Me.delivered+=1,pe.push(me),me.threadKey){const Yt=(ee.get(me.threadKey)??0)+1;ee.set(me.threadKey,Yt),Yt>1&&g++}k.put(me,je);const qe=Math.max(0,Math.floor(e.pushRateLimitPerMin??0)),rn=Math.max(0,Math.floor(e.pushDedupWindowSec??0)),Bt=Na(e.pushThreshold??0),et=qe>0?$g(W,je,60)<qe:!1,mn=me.threadKey??`${me.eventType}:${xe}`,Qt=$.get(mn)??-1/0,Es=rn>0?je-Qt>rn:!0;let zn=0;if(f){const Yt=Tu(me,je),vn={now:je,freshness:Yt,baseScore:0};zn=f.score(me,vn).probability}const yn=me.urgency==="Immediate"||me.severity==="Extreme"||me.severity==="Severe";if(qe>0){const Yt=Na(e.pfExplorationEpsilon??0),vn=f&&Yt>0&&p()<Yt,ki=zn>=Bt||vn;et&&Es&&(ki||yn)?(w++,W.push(je),$.set(mn,je),D.has(mn)||D.set(mn,je),Qt!==-1/0&&I++):j++}return!0}return!1}}function Eg(e,t){return e.policy==="LRU"?new fg(e.cacheSize):e.policy==="TTLOnly"?new hg(e.cacheSize):e.policy==="PAFTinyLFU"?new yg(e.cacheSize):new pg(e.cacheSize,{wS:e.wS,wU:e.wU,wF:e.wF},t)}function Ng(e){const t=`${e.seed}|env|${e.scenario}`,n=Rn(_n(t)),r=Cg[e.scenario]??10;return Yp(n,_g,Rg,{regions:r})}function Pg(e,t,n,r){const s=[],o=e.durationSec,u=t.baseAlertRatePerMin/60;let f=0,p=0;const y=new Map;for(;s.length<e.alerts&&f<o;){const k=il(t,f),x=u*(k.alertRateMul??1),v=Math.max(1,Math.round(Ig(1/Math.max(x,1e-6),r)));f+=v;const O=Math.round(Math.max(120,Ag(t.meanTTL,t.meanTTL*.25,r))),B=Tg(n,r),N=(B==null?void 0:B.id)??"R0",H=Fg(r,B==null?void 0:B.severity),g=Mg(r),w=r(),j=w<.7?"Flood":w<.85?"Shelter":"Other",I=r()<.3&&y.size>0;let $=`${j}:${N}`;y.has($)||y.set($,0);let D=y.get($)+1;I||r()<.4&&($=`${j}:${N}:${Math.floor(r()*1e3)}`,y.set($,0),D=1),y.set($,D);const Y=Math.round((j==="Flood"?1800:j==="Shelter"?1200:900)*(1+(H==="Extreme"?.3:H==="Severe"?.15:0)));s.push({id:`A${++p}`,eventType:j,severity:H,urgency:g,issuedAt:Math.min(f,o-1),ttlSec:O,sender:"demo@aware.local",headline:`${H} ${j} Alert`,instruction:g==="Immediate"?"Move to higher ground":"Prepare to move if needed",geokey:N,regionId:N,sizeBytes:Y,threadKey:$,updateNo:D})}return s}function Tg(e,t){if(e.regions.length===0)return;const n=Math.floor(t()*e.regions.length);return e.regions[n]??e.regions[0]}function Mg(e){const t=e();return t<.45?"Immediate":t<.85?"Expected":t<.95?"Future":t<.98?"Past":"Unknown"}function Fg(e,t){const n=t==="Extreme"?.12:t==="Severe"?.06:0,r=e();return r<.05?"Unknown":r<.2+n?"Extreme":r<.55+n*.5?"Severe":r<.85?"Moderate":"Minor"}function zg(e,t){let n=Math.exp(-e),r=1,s=0;do s++,r*=t();while(r>n);return s-1}function Ag(e,t,n){let r=0,s=0;for(;r===0;)r=n();for(;s===0;)s=n();return Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*s)*t+e}function Ig(e,t){let n=t();return n<1e-8&&(n=1e-8),-e*Math.log(n)}function Tu(e,t){const n=Math.max(0,t-e.issuedAt),r=Math.exp(-n/Math.max(1,e.ttlSec));return Math.max(0,Math.min(1,r))}function Dg(e,t,n){const r=e.entries(t);if(r.length===0)return null;const s=r.map(f=>Lg(f.urgency)*Og(f.severity)*Tu(f,t)),o=s.reduce((f,p)=>f+p,0);if(o<=0)return r[Math.floor(n()*r.length)];let u=n()*o;for(let f=0;f<r.length;f++)if(u-=s[f],u<=0)return r[f];return r[r.length-1]}function Og(e){return e==="Extreme"?3:e==="Severe"?2:1}function Lg(e){return e==="Immediate"?3:e==="Expected"?2:1}function Bg(e){return e==="Urban"?Hp:e==="Suburban"?qp:Qp}function Na(e){return Math.max(0,Math.min(1,e))}function Ui(e,t){return e.has(t)||e.set(t,{delivered:0,dropped:0,firstLatSum:0,firstRetrievals:0}),e.get(t)}function $g(e,t,n){const r=t-n;let s=0;for(;s<e.length&&e[s]<r;)s++;return s>0&&e.splice(0,s),e.length}const Jp=[{name:"Budget Phone",cacheSize:32,description:"Low-end smartphone (limited memory)"},{name:"Standard Phone",cacheSize:128,description:"Modern mid-range smartphone"},{name:"High-End Phone",cacheSize:256,description:"Flagship smartphone"},{name:"Tablet/Laptop",cacheSize:512,description:"Tablet or laptop device"},{name:"Desktop PC",cacheSize:1024,description:"Desktop computer"}],Zp=[{name:"Perfect",reliability:1,description:"Perfect connectivity (100%)"},{name:"Excellent",reliability:.95,description:"Excellent network (95%)"},{name:"Good",reliability:.9,description:"Good network (90%)"},{name:"Fair",reliability:.85,description:"Fair network (85%)"},{name:"Poor",reliability:.7,description:"Poor network (70%)"},{name:"Very Poor",reliability:.6,description:"Very poor network (60%)"},{name:"Degraded",reliability:.5,description:"Degraded network (50%)"},{name:"Disaster",reliability:.3,description:"Disaster scenario (30%)"}];function Cs(e){const t=["LRU","TTLOnly","PriorityFresh","PAFTinyLFU"],n=[],r=e.seed;for(const o of t){const u={...e,policy:o},f=Ec(u);n.push({policy:o,result:f})}const s=Date.now();return{kind:"multi-policy",baseSeed:r,timestamp:s,cacheSize:e.cacheSize,scenario:e.scenario,reliability:e.reliability,durationSec:e.durationSec,queryRatePerMin:e.queryRatePerMin,runs:n,info:`Compared ${t.length} policies with seed "${r}" | cache=${e.cacheSize} | alerts=${e.alerts}`}}function Ug(e){const t=[];t.push("policy,seed,scenario,cacheSize,alerts,reliability,durationSec,queryRatePerMin,cacheHitRate,deliveryRate,avgFreshness,staleAccessRate,redundancyIndex,actionabilityFirstRatio,timelinessConsistency,pushesSent,pushSuppressRate,pushDuplicateRate,pushTimelyFirstRatio");for(const{policy:n,result:r}of e.runs){const s=r.metrics;t.push([n,r.seed,r.scenario,e.cacheSize.toString(),r.issuedAlerts.length.toString(),e.reliability.toFixed(3),e.durationSec.toString(),e.queryRatePerMin.toString(),s.cacheHitRate.toFixed(6),s.deliveryRate.toFixed(6),s.avgFreshness.toFixed(6),s.staleAccessRate.toFixed(6),s.redundancyIndex.toFixed(6),s.actionabilityFirstRatio.toFixed(6),s.timelinessConsistency.toFixed(6),s.pushesSent.toString(),s.pushSuppressRate.toFixed(6),s.pushDuplicateRate.toFixed(6),s.pushTimelyFirstRatio.toFixed(6)].join(","))}return t.join(`
`)}function Kg(e){const t=[];t.push("policy,time,cacheSize,hits,misses,hitRate");for(const{policy:n,result:r}of e.runs)for(const s of r.timeline){const o=s.hits+s.misses>0?s.hits/(s.hits+s.misses):0;t.push([n,s.t.toFixed(2),s.cacheSize.toString(),s.hits.toString(),s.misses.toString(),o.toFixed(6)].join(","))}return t.join(`
`)}function Wg(e,t=Jp){var r;const n=[];for(const s of t){const o={...e,cacheSize:s.cacheSize},u=Cs(o);n.push({deviceProfile:s,policyComparison:u})}return{kind:"device-comparison",baseSeed:e.seed,timestamp:Date.now(),scenario:e.scenario,reliability:e.reliability,durationSec:e.durationSec,queryRatePerMin:e.queryRatePerMin,comparisons:n,info:`Compared ${t.length} device profiles with ${((r=n[0])==null?void 0:r.policyComparison.runs.length)??4} policies each`}}function Vg(e){const t=[];t.push("device,policy,seed,scenario,cacheSize,alerts,reliability,durationSec,queryRatePerMin,cacheHitRate,deliveryRate,avgFreshness,staleAccessRate,redundancyIndex,actionabilityFirstRatio,timelinessConsistency,pushesSent,pushSuppressRate,pushDuplicateRate,pushTimelyFirstRatio");for(const{deviceProfile:n,policyComparison:r}of e.comparisons)for(const{policy:s,result:o}of r.runs){const u=o.metrics;t.push([n.name,s,o.seed,o.scenario,n.cacheSize.toString(),o.issuedAlerts.length.toString(),e.reliability.toFixed(3),e.durationSec.toString(),e.queryRatePerMin.toString(),u.cacheHitRate.toFixed(6),u.deliveryRate.toFixed(6),u.avgFreshness.toFixed(6),u.staleAccessRate.toFixed(6),u.redundancyIndex.toFixed(6),u.actionabilityFirstRatio.toFixed(6),u.timelinessConsistency.toFixed(6),u.pushesSent.toString(),u.pushSuppressRate.toFixed(6),u.pushDuplicateRate.toFixed(6),u.pushTimelyFirstRatio.toFixed(6)].join(","))}return t.join(`
`)}function Hg(e,t=Zp){var r;const n=[];for(const s of t){const o={...e,reliability:s.reliability},u=Cs(o);n.push({networkProfile:s,policyComparison:u})}return{kind:"network-comparison",baseSeed:e.seed,timestamp:Date.now(),scenario:e.scenario,cacheSize:e.cacheSize,durationSec:e.durationSec,queryRatePerMin:e.queryRatePerMin,comparisons:n,info:`Compared ${t.length} network conditions with ${((r=n[0])==null?void 0:r.policyComparison.runs.length)??4} policies each`}}function qg(e){const t=[];t.push("network,policy,seed,scenario,cacheSize,alerts,reliability,durationSec,queryRatePerMin,cacheHitRate,deliveryRate,avgFreshness,staleAccessRate,redundancyIndex,actionabilityFirstRatio,timelinessConsistency,pushesSent,pushSuppressRate,pushDuplicateRate,pushTimelyFirstRatio");for(const{networkProfile:n,policyComparison:r}of e.comparisons)for(const{policy:s,result:o}of r.runs){const u=o.metrics;t.push([n.name,s,o.seed,o.scenario,e.cacheSize.toString(),o.issuedAlerts.length.toString(),n.reliability.toFixed(3),e.durationSec.toString(),e.queryRatePerMin.toString(),u.cacheHitRate.toFixed(6),u.deliveryRate.toFixed(6),u.avgFreshness.toFixed(6),u.staleAccessRate.toFixed(6),u.redundancyIndex.toFixed(6),u.actionabilityFirstRatio.toFixed(6),u.timelinessConsistency.toFixed(6),u.pushesSent.toString(),u.pushSuppressRate.toFixed(6),u.pushDuplicateRate.toFixed(6),u.pushTimelyFirstRatio.toFixed(6)].join(","))}return t.join(`
`)}function Qg(e,t=Jp,n=Zp){var s;const r=[];for(const o of t)for(const u of n){const f={...e,cacheSize:o.cacheSize,reliability:u.reliability},p=Cs(f);r.push({deviceProfile:o,networkProfile:u,policyComparison:p})}return{kind:"combined-comparison",baseSeed:e.seed,timestamp:Date.now(),scenario:e.scenario,durationSec:e.durationSec,queryRatePerMin:e.queryRatePerMin,comparisons:r,info:`Compared ${t.length} devices × ${n.length} networks = ${r.length} scenarios with ${((s=r[0])==null?void 0:s.policyComparison.runs.length)??4} policies each (${r.length*4} total runs)`}}function Yg(e){const t=[];t.push("device,network,policy,seed,scenario,cacheSize,alerts,reliability,durationSec,queryRatePerMin,cacheHitRate,deliveryRate,avgFreshness,staleAccessRate,redundancyIndex,actionabilityFirstRatio,timelinessConsistency,pushesSent,pushSuppressRate,pushDuplicateRate,pushTimelyFirstRatio");for(const{deviceProfile:n,networkProfile:r,policyComparison:s}of e.comparisons)for(const{policy:o,result:u}of s.runs){const f=u.metrics;t.push([n.name,r.name,o,u.seed,u.scenario,n.cacheSize.toString(),u.issuedAlerts.length.toString(),r.reliability.toFixed(3),e.durationSec.toString(),e.queryRatePerMin.toString(),f.cacheHitRate.toFixed(6),f.deliveryRate.toFixed(6),f.avgFreshness.toFixed(6),f.staleAccessRate.toFixed(6),f.redundancyIndex.toFixed(6),f.actionabilityFirstRatio.toFixed(6),f.timelinessConsistency.toFixed(6),f.pushesSent.toString(),f.pushSuppressRate.toFixed(6),f.pushDuplicateRate.toFixed(6),f.pushTimelyFirstRatio.toFixed(6)].join(","))}return t.join(`
`)}const Xg=["Rural","Suburban","Urban"],Gg=[16,32,64,128,256,512,1024,2048];function Ki(e,t){return Math.floor(Math.random()*(t-e+1))+e}function an(e,t,n=3){const r=Math.random()*(t-e)+e,s=Math.pow(10,n);return Math.round(r*s)/s}function Pa(e){return e[Math.floor(Math.random()*e.length)]}function Jg(){const e=globalThis;return e.crypto&&typeof e.crypto.randomUUID=="function"?e.crypto.randomUUID():`rand-${Date.now().toString(36)}-${Math.random().toString(16).slice(2)}`}function Zg(e){const t=Math.random()<.6;return{scenario:Pa(Xg),policy:"PriorityFresh",cacheSize:Pa(Gg),alerts:Ki(80,2e3),reliability:an(.3,1,3),durationSec:Ki(300,3600),queryRatePerMin:Ki(10,300),seed:Jg(),wS:an(0,5,2),wU:an(0,5,2),wF:an(0,6,2),pushRateLimitPerMin:t?Ki(10,180):0,pushDedupWindowSec:t?Ki(10,600):0,pushThreshold:t?an(.1,.9,2):.5,pfExplorationEpsilon:an(0,.15,3),pfHashBuckets:Pa([64,128,256,512]),pfTemperature:an(.1,1.5,2),pfDecay:an(.85,1,3),pfLearningRate:an(.01,.3,3),pfRegularization:an(0,.15,3),seedMode:"Fixed",replicates:1}}function e0(e,t){const n=[],r=Math.max(1,Math.floor(e));for(let o=0;o<r;o++){const u=Zg(),f=Cs(u);n.push({options:u,comparison:f})}return{kind:"randomized-multi-policy",timestamp:Date.now(),count:r,runs:n,info:`Randomized ${r} multi-policy comparisons (all parameters randomized per run)`}}function t0(e){const n=[["runIndex","policy","seed","scenario","cacheSize","alerts","reliability","durationSec","queryRatePerMin","wS","wU","wF","pushRateLimitPerMin","pushDedupWindowSec","pushThreshold","pfExplorationEpsilon","pfHashBuckets","pfTemperature","pfDecay","pfLearningRate","pfRegularization","cacheHitRate","deliveryRate","avgFreshness","staleAccessRate","redundancyIndex","actionabilityFirstRatio","timelinessConsistency","pushesSent","pushSuppressRate","pushDuplicateRate","pushTimelyFirstRatio"].join(",")];return e.runs.forEach((r,s)=>{const{options:o,comparison:u}=r;u.runs.forEach(({policy:f,result:p})=>{const y=p.metrics;n.push([(s+1).toString(),f,p.seed,p.scenario,o.cacheSize.toString(),p.issuedAlerts.length.toString(),(u.reliability??o.reliability).toFixed(3),(u.durationSec??o.durationSec).toString(),(u.queryRatePerMin??o.queryRatePerMin).toString(),(o.wS??"").toString(),(o.wU??"").toString(),(o.wF??"").toString(),(o.pushRateLimitPerMin??0).toString(),(o.pushDedupWindowSec??0).toString(),(o.pushThreshold??0).toString(),(o.pfExplorationEpsilon??"").toString(),(o.pfHashBuckets??"").toString(),(o.pfTemperature??"").toString(),(o.pfDecay??"").toString(),(o.pfLearningRate??"").toString(),(o.pfRegularization??"").toString(),y.cacheHitRate.toFixed(6),y.deliveryRate.toFixed(6),y.avgFreshness.toFixed(6),y.staleAccessRate.toFixed(6),y.redundancyIndex.toFixed(6),y.actionabilityFirstRatio.toFixed(6),y.timelinessConsistency.toFixed(6),y.pushesSent.toString(),y.pushSuppressRate.toFixed(6),y.pushDuplicateRate.toFixed(6),y.pushTimelyFirstRatio.toFixed(6)].join(","))})}),n.join(`
`)}function n0(e){return"kind"in e&&e.kind==="multi-policy"}function r0(e){return"kind"in e&&e.kind==="device-comparison"}function i0(e){return"kind"in e&&e.kind==="network-comparison"}function s0(e){return"kind"in e&&e.kind==="combined-comparison"}function o0(e){return"kind"in e&&e.kind==="randomized-multi-policy"}function wr({result:e}){var B,N,H;if(!e)return null;const t=n0(e),n=r0(e),r=i0(e),s=s0(e),o=o0(e),u=o?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Randomized runs: ",e.count]}),a.jsxs("div",{children:["Total policy runs: ",e.count*4]}),a.jsxs("div",{children:["Timestamp: ",new Date(e.timestamp).toLocaleString()]})]}):null,f=J.useMemo(()=>{if(o)return t0(e);if(s)return Yg(e);if(r)return qg(e);if(n)return Vg(e);if(t)return Ug(e);const g=[];g.push("time,cacheSize,hits,misses,hitRate");for(const w of e.timeline){const j=w.hits+w.misses>0?w.hits/(w.hits+w.misses):0;g.push([w.t.toFixed(2),w.cacheSize.toString(),w.hits.toString(),w.misses.toString(),j.toFixed(4)].join(","))}return g.join(`
`)},[e,t,n,r]),p=J.useMemo(()=>t?Kg(e):null,[e,t]),y=J.useMemo(()=>JSON.stringify(o?{type:"randomized-multi-policy",timestamp:e.timestamp,count:e.count,runs:e.runs.map((g,w)=>({index:w+1,options:{scenario:g.options.scenario,cacheSize:g.options.cacheSize,alerts:g.options.alerts,reliability:g.options.reliability,durationSec:g.options.durationSec,queryRatePerMin:g.options.queryRatePerMin,wS:g.options.wS,wU:g.options.wU,wF:g.options.wF,pushRateLimitPerMin:g.options.pushRateLimitPerMin,pushDedupWindowSec:g.options.pushDedupWindowSec,pushThreshold:g.options.pushThreshold,pfExplorationEpsilon:g.options.pfExplorationEpsilon,pfHashBuckets:g.options.pfHashBuckets,pfTemperature:g.options.pfTemperature,pfDecay:g.options.pfDecay,pfLearningRate:g.options.pfLearningRate,pfRegularization:g.options.pfRegularization},policies:g.comparison.runs.map(({policy:j,result:I})=>({policy:j,metrics:I.metrics}))}))}:s?{type:"combined-comparison",baseSeed:e.baseSeed,timestamp:e.timestamp,scenario:e.scenario,comparisons:e.comparisons.map(({deviceProfile:g,networkProfile:w,policyComparison:j})=>({device:g.name,cacheSize:g.cacheSize,network:w.name,reliability:w.reliability,policies:j.runs.map(({policy:I,result:$})=>({policy:I,metrics:$.metrics}))}))}:r?{type:"network-comparison",baseSeed:e.baseSeed,timestamp:e.timestamp,scenario:e.scenario,comparisons:e.comparisons.map(({networkProfile:g,policyComparison:w})=>({network:g.name,reliability:g.reliability,policies:w.runs.map(({policy:j,result:I})=>({policy:j,metrics:I.metrics}))}))}:n?{type:"device-comparison",baseSeed:e.baseSeed,timestamp:e.timestamp,scenario:e.scenario,comparisons:e.comparisons.map(({deviceProfile:g,policyComparison:w})=>({device:g.name,cacheSize:g.cacheSize,policies:w.runs.map(({policy:j,result:I})=>({policy:j,metrics:I.metrics}))}))}:t?{type:"multi-policy",baseSeed:e.baseSeed,timestamp:e.timestamp,runs:e.runs.map(({policy:g,result:w})=>({policy:g,scenario:w.scenario,seed:w.seed,metrics:w.metrics,regionStats:w.regionStats}))}:{type:"single",scenario:e.scenario,baselineReliability:e.baselineReliability,seed:e.seed,metrics:e.metrics,regionStats:e.regionStats,timeline:e.timeline,issuedAlerts:e.issuedAlerts.map(g=>({id:g.id,regionId:g.regionId??g.geokey,severity:g.severity,urgency:g.urgency,issuedAt:g.issuedAt,ttlSec:g.ttlSec,eventType:g.eventType})),environment:{regions:e.environment.regions.map(g=>({id:g.id,severity:g.severity,localFactor:g.localFactor}))},pfState:e.pfState},null,2),[e,t,n,r,s]),k=()=>{if(!f)return;const g=new Blob([f],{type:"text/csv"}),w=URL.createObjectURL(g),j=document.createElement("a");j.href=w;const I=o?`randomized-comparison-${Date.now()}.csv`:s?`combined-comparison-${Date.now()}.csv`:r?`network-comparison-${Date.now()}.csv`:n?`device-comparison-${Date.now()}.csv`:t?`multi-policy-comparison-${Date.now()}.csv`:`simulation-data-${Date.now()}.csv`;j.download=I,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(w)},x=()=>{if(!p)return;const g=new Blob([p],{type:"text/csv"}),w=URL.createObjectURL(g),j=document.createElement("a");j.href=w,j.download=`multi-policy-timeline-${Date.now()}.csv`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(w)},v=()=>{if(!y)return;const g=new Blob([y],{type:"application/json"}),w=URL.createObjectURL(g),j=document.createElement("a");j.href=w,j.download=`simulation-data-${Date.now()}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(w)},O=async g=>{try{await navigator.clipboard.writeText(g),alert("Data copied to clipboard!")}catch(w){console.error("Failed to copy:",w),alert("Failed to copy to clipboard")}};return e?a.jsxs("div",{className:"card",style:{marginTop:12},children:[a.jsx("h4",{children:"Export Data for Figures"}),a.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:12},children:t?"Download policy comparison metrics and timelines for paper figures":"Download detailed timeline and metrics for paper figures"}),a.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[a.jsx("button",{onClick:k,style:{display:"flex",alignItems:"center",gap:6},children:t?"Download Metrics CSV":"Download CSV"}),t&&a.jsx("button",{onClick:x,style:{display:"flex",alignItems:"center",gap:6},children:"Download Timeline CSV"}),a.jsx("button",{onClick:v,style:{display:"flex",alignItems:"center",gap:6},children:"Download JSON"}),a.jsx("button",{onClick:()=>f&&O(f),style:{display:"flex",alignItems:"center",gap:6},children:"Copy CSV"}),a.jsx("button",{onClick:()=>y&&O(y),style:{display:"flex",alignItems:"center",gap:6},children:"Copy JSON"})]}),a.jsxs("details",{style:{marginTop:12},children:[a.jsx("summary",{style:{cursor:"pointer",fontSize:13,color:"#94a3b8"},children:"Show data preview"}),a.jsxs("div",{style:{marginTop:8},children:[a.jsxs("div",{style:{marginBottom:8},children:[a.jsx("strong",{children:"CSV Preview:"}),a.jsxs("pre",{style:{fontSize:10,background:"#0b132b",padding:8,borderRadius:4,maxHeight:200,overflow:"auto",border:"1px solid #2a3b63"},children:[f==null?void 0:f.split(`
`).slice(0,10).join(`
`),f&&f.split(`
`).length>10&&`
...`]})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"JSON Preview:"}),a.jsxs("pre",{style:{fontSize:10,background:"#0b132b",padding:8,borderRadius:4,maxHeight:200,overflow:"auto",border:"1px solid #2a3b63"},children:[y==null?void 0:y.split(`
`).slice(0,20).join(`
`),y&&y.split(`
`).length>20&&`
...`]})]})]})]}),a.jsx("div",{style:{marginTop:12,fontSize:12},children:a.jsx("div",{className:"muted",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Device × Network combinations: ",e.comparisons.length]}),a.jsxs("div",{children:["Total policy runs: ",e.comparisons.length*(((B=e.comparisons[0])==null?void 0:B.policyComparison.runs.length)??4)]}),a.jsxs("div",{children:["Base seed: ",e.baseSeed]}),a.jsxs("div",{children:["Scenario: ",e.scenario]})]}):r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Network conditions compared: ",e.comparisons.length]}),a.jsxs("div",{children:["Total policy runs: ",e.comparisons.length*(((N=e.comparisons[0])==null?void 0:N.policyComparison.runs.length)??4)]}),a.jsxs("div",{children:["Base seed: ",e.baseSeed]})]}):n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Devices compared: ",e.comparisons.length]}),a.jsxs("div",{children:["Total policy runs: ",e.comparisons.length*(((H=e.comparisons[0])==null?void 0:H.policyComparison.runs.length)??4)]}),a.jsxs("div",{children:["Base seed: ",e.baseSeed]})]}):t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Policies compared: ",e.runs.length]}),a.jsxs("div",{children:["Base seed: ",e.baseSeed]})]}):o?u:a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Timeline samples: ",e.timeline.length]}),a.jsxs("div",{children:["Alerts issued: ",e.issuedAlerts.length]}),a.jsxs("div",{children:["Regions: ",e.environment.regions.length]})]})})})]}):null}function Ta({result:e}){if(!e)return null;const t=e.timeline,n=t[t.length-1],r=Math.max(...t.map(k=>k.cacheSize)),s=t.reduce((k,x)=>k+x.cacheSize,0)/t.length;let o=0;for(let k=1;k<t.length;k++)t[k].cacheSize!==t[k-1].cacheSize&&o++;const u=o/t.length;let f=null;for(let k=0;k<t.length;k++)if(t[k].cacheSize>=128){f=t[k].t;break}const p=new Map;for(const k of t)p.set(k.cacheSize,(p.get(k.cacheSize)||0)+1);const y=Array.from(p.entries()).sort((k,x)=>x[1]-k[1]).slice(0,5);return a.jsxs("div",{className:"card",style:{marginTop:12},children:[a.jsx("h4",{children:"Policy Diagnostics"}),a.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:12},children:"Internal metrics to verify policy behavior and detect potential biases"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:8},children:[a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Final Cache Size"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:(n==null?void 0:n.cacheSize)??0})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Max Cache Size"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:r})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Avg Cache Size"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:s.toFixed(1)})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Cache Churn Rate"}),a.jsxs("div",{style:{fontSize:18,fontWeight:600},children:[(u*100).toFixed(1),"%"]}),a.jsx("div",{className:"muted",style:{fontSize:9},children:"size changes / samples"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Cache Fill Time"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:f!==null?`${f.toFixed(0)}s`:"Never"})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Total Requests"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:((n==null?void 0:n.hits)??0)+((n==null?void 0:n.misses)??0)})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Alerts Issued"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:e.issuedAlerts.length})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Alerts Delivered"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:e.deliveredAlerts.length})]}),a.jsxs("div",{className:"stat-card",children:[a.jsx("div",{className:"muted",style:{fontSize:11},children:"Dropped Alerts"}),a.jsx("div",{style:{fontSize:18,fontWeight:600},children:e.issuedAlerts.length-e.deliveredAlerts.length})]})]}),a.jsxs("div",{style:{marginTop:16},children:[a.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:13},children:"Cache Size Distribution"}),a.jsx("div",{style:{fontSize:12},children:y.map(([k,x])=>{const v=x/t.length*100;return a.jsxs("div",{style:{marginBottom:4},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:2},children:[a.jsxs("span",{children:["Size ",k,":"]}),a.jsxs("span",{children:[v.toFixed(1),"% (",x," samples)"]})]}),a.jsx("div",{style:{height:4,background:"#2a3b63",borderRadius:2,overflow:"hidden"},children:a.jsx("div",{style:{height:"100%",width:`${v}%`,background:"#5bc0be"}})})]},k)})})]}),a.jsxs("details",{style:{marginTop:12,fontSize:12},children:[a.jsx("summary",{style:{cursor:"pointer",color:"#94a3b8"},children:"How to interpret these metrics"}),a.jsxs("div",{style:{marginTop:8,color:"#9fb3d9",lineHeight:1.6},children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Cache Churn Rate:"})," High churn (>10%) means the policy is actively evicting. Low churn means the cache rarely fills."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cache Fill Time:"}),' When cache first reaches capacity. If "Never", cache is too large for workload.']}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cache Size Distribution:"})," If one size dominates (>80%), the cache is either always full or always empty - policies may not differ."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Dropped Alerts:"})," If this matches between policies, the workload is deterministic and not testing admission decisions."]})]})]}),u<.05&&a.jsxs("div",{style:{marginTop:12,padding:12,background:"#2a1810",border:"1px solid #ff6b6b",borderRadius:4,fontSize:13},children:[a.jsx("div",{style:{fontWeight:600,color:"#ff8787",marginBottom:4},children:"Low Cache Pressure"}),a.jsxs("div",{style:{color:"#ffb3b3"},children:["Cache churn is very low (",(u*100).toFixed(1),"%). This means the cache rarely evicts, so different policies may perform similarly. Try reducing cache size or increasing alert volume to stress-test policies."]})]}),s<50&&r<100&&a.jsxs("div",{style:{marginTop:12,padding:12,background:"#2a1810",border:"1px solid #ff6b6b",borderRadius:4,fontSize:13},children:[a.jsx("div",{style:{fontWeight:600,color:"#ff8787",marginBottom:4},children:"Cache Underutilization"}),a.jsxs("div",{style:{color:"#ffb3b3"},children:["Average cache size is only ",s.toFixed(0),", well below capacity. Policies may not have opportunities to make different eviction decisions. Consider increasing alert volume or reducing TTLs."]})]})]})}const Ma=Yi.lazy(()=>Wp(()=>import("./TimeChart-D9lw4Ubo.js"),[])),Vr=[{key:"cacheHitRate",label:"Cache Hit Rate",format:"percent"},{key:"deliveryRate",label:"Delivery Rate",format:"percent"},{key:"avgFreshness",label:"Avg Freshness",format:"number"},{key:"staleAccessRate",label:"Stale Access Rate",format:"percent"},{key:"redundancyIndex",label:"Redundancy Index",format:"percent"},{key:"actionabilityFirstRatio",label:"Actionability-First",format:"percent"},{key:"timelinessConsistency",label:"Timeliness Consistency",format:"percent"},{key:"pushesSent",label:"Pushes Sent",format:"number"},{key:"pushSuppressRate",label:"Push Suppress Rate",format:"percent"},{key:"pushDuplicateRate",label:"Push Duplicate Rate",format:"percent"},{key:"pushTimelyFirstRatio",label:"Push Timely First",format:"percent"}];function l0({result:e,onShowEnvironment:t}){var p;const{snapshot:n}=Cc(),r=J.useMemo(()=>!e||e.kind==="batch"||e.kind==="multi-policy"||e.kind==="device-comparison"||e.kind==="network-comparison"||e.kind==="combined-comparison"||e.kind==="randomized-multi-policy"?[]:[...e.result.regionStats].sort((k,x)=>x.delivered-k.delivered).slice(0,5),[e]);if(!e)return a.jsx("div",{className:"muted",children:"Run a simulation to see results."});if(e.kind==="randomized-multi-policy"){const y=e.count*4;return a.jsxs("div",{children:[a.jsx("h3",{children:"Randomized Multi-Policy Comparisons"}),n&&a.jsxs("div",{className:"muted",style:{marginBottom:6,fontSize:13},children:["Live environment: ",n.scenario," - seed ",n.seed]}),a.jsx("div",{className:"muted",style:{marginBottom:12},children:e.info}),a.jsx("div",{className:"muted",style:{marginBottom:12,fontSize:13},children:"Each run randomizes scenario, cache size, alerts, reliability, duration, query rate, PF weights, and push controls, then compares LRU, TTLOnly, PriorityFresh, and PAFTinyLFU under identical conditions."}),a.jsx(wr,{result:e}),a.jsxs("details",{style:{marginTop:12},children:[a.jsxs("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:["Show first 5 randomized setups (of ",e.count,")"]}),e.runs.slice(0,5).map((k,x)=>a.jsxs("div",{style:{marginTop:12,paddingLeft:12,borderLeft:"3px solid #14b8a6"},children:[a.jsxs("h4",{style:{marginBottom:4,color:"#14b8a6"},children:["Run #",x+1]}),a.jsxs("div",{className:"muted",style:{fontSize:12,marginBottom:8},children:["Scenario ",k.options.scenario," | cache ",k.options.cacheSize," | alerts ",k.options.alerts," | rel ",k.options.reliability.toFixed(2)," | duration ",k.options.durationSec,"s | qpm ",k.options.queryRatePerMin]}),a.jsx("div",{className:"metrics",style:{marginBottom:8,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8},children:["cacheHitRate","deliveryRate","actionabilityFirstRatio"].map(v=>{const O=v;return a.jsxs("div",{className:"metric",style:{padding:6},children:[a.jsx("h5",{style:{fontSize:10,marginBottom:3},children:v}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:2,fontSize:12},children:k.comparison.runs.map(({policy:B,result:N})=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxs("span",{style:{color:"#94a3b8",minWidth:80},children:[B,":"]}),a.jsx("span",{style:{fontWeight:"bold"},children:Wn(v==="cacheHitRate"||v.includes("Rate")||v.includes("Ratio")?"percent":"number",N.metrics[O])})]},B))})]},v)})})]},x))]}),a.jsxs("div",{className:"muted",style:{marginTop:12,padding:12,background:"#1a2744",borderRadius:4},children:[a.jsxs("div",{children:["Total policy runs: ",y]}),a.jsx("div",{children:"Tip: Export CSV and use your plotting scripts to analyze policy robustness across randomized conditions."})]})]})}if(e.kind==="device-comparison")return a.jsxs("div",{children:[a.jsx("h3",{children:"Device Profile Comparison"}),n&&a.jsxs("div",{className:"muted",style:{marginBottom:6,fontSize:13},children:["Live environment: ",n.scenario," - seed ",n.seed]}),a.jsx("div",{className:"muted",style:{marginBottom:12},children:e.info}),a.jsxs("div",{className:"muted",style:{marginBottom:12,fontSize:13},children:["Comparing all policies across ",e.comparisons.length," device types to analyze how cache size impacts performance."]}),a.jsx(wr,{result:e}),a.jsxs("details",{style:{marginTop:12},open:!0,children:[a.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Device Profiles & Results"}),e.comparisons.map(({deviceProfile:y,policyComparison:k})=>a.jsxs("div",{style:{marginTop:16,paddingLeft:12,borderLeft:"3px solid #22c55e"},children:[a.jsxs("h4",{style:{marginBottom:4,color:"#22c55e"},children:[y.name," (Cache: ",y.cacheSize," entries)"]}),a.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:8},children:y.description}),a.jsx("div",{className:"metrics",style:{marginBottom:12,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8},children:["cacheHitRate","actionabilityFirstRatio","timelinessConsistency","avgFreshness"].map(x=>{const v=Vr.find(O=>O.key===x);return v?a.jsxs("div",{className:"metric",style:{padding:8},children:[a.jsx("h5",{style:{fontSize:11,marginBottom:4},children:v.label}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:2,fontSize:12},children:k.runs.map(({policy:O,result:B})=>{const N=B.metrics[v.key],H=Wn(v.format,N),g=k.runs.map(I=>I.result.metrics[v.key]),w=Math.max(...g),j=N===w;return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxs("span",{style:{color:"#94a3b8",minWidth:80,fontSize:11},children:[O,":"]}),a.jsxs("span",{style:{fontWeight:j?"bold":"normal",color:j?"#22c55e":"inherit"},children:[H,j&&" ★"]})]},O)})})]},v.key):null})})]},y.name))]}),a.jsxs("div",{className:"muted",style:{marginTop:12,padding:12,background:"#1a2744",borderRadius:4},children:[a.jsx("strong",{children:"Analysis Tips:"}),a.jsxs("ul",{style:{marginTop:6,marginLeft:18,fontSize:13},children:[a.jsxs("li",{children:["Export as CSV and use ",a.jsx("code",{children:"plot_cache_size_comparison.py"})," to generate scaling curves"]}),a.jsx("li",{children:"Look for policies that maintain performance even with small caches"}),a.jsx("li",{children:"Identify the minimum cache size where performance plateaus"}),a.jsx("li",{children:"Compare efficiency: which policy delivers best results per cache entry?"})]})]})]});if(e.kind==="network-comparison")return a.jsxs("div",{children:[a.jsx("h3",{children:"Network Reliability Comparison"}),n&&a.jsxs("div",{className:"muted",style:{marginBottom:6,fontSize:13},children:["Live environment: ",n.scenario," - seed ",n.seed]}),a.jsx("div",{className:"muted",style:{marginBottom:12},children:e.info}),a.jsxs("div",{className:"muted",style:{marginBottom:12,fontSize:13},children:["Comparing all policies across ",e.comparisons.length," network conditions to analyze how policies handle degraded networks and disaster scenarios."]}),a.jsx(wr,{result:e}),a.jsxs("details",{style:{marginTop:12},open:!0,children:[a.jsx("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:"Network Conditions & Results"}),e.comparisons.map(({networkProfile:y,policyComparison:k})=>a.jsxs("div",{style:{marginTop:16,paddingLeft:12,borderLeft:"3px solid #f97316"},children:[a.jsxs("h4",{style:{marginBottom:4,color:"#f97316"},children:[y.name," (",(y.reliability*100).toFixed(0),"% reliability)"]}),a.jsx("div",{className:"muted",style:{fontSize:12,marginBottom:8},children:y.description}),a.jsx("div",{className:"metrics",style:{marginBottom:12,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:8},children:["deliveryRate","actionabilityFirstRatio","timelinessConsistency","cacheHitRate"].map(x=>{const v=Vr.find(O=>O.key===x);return v?a.jsxs("div",{className:"metric",style:{padding:8},children:[a.jsx("h5",{style:{fontSize:11,marginBottom:4},children:v.label}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:2,fontSize:12},children:k.runs.map(({policy:O,result:B})=>{const N=B.metrics[v.key],H=Wn(v.format,N),g=k.runs.map(I=>I.result.metrics[v.key]),w=Math.max(...g),j=N===w;return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxs("span",{style:{color:"#94a3b8",minWidth:80,fontSize:11},children:[O,":"]}),a.jsxs("span",{style:{fontWeight:j?"bold":"normal",color:j?"#f97316":"inherit"},children:[H,j&&" ★"]})]},O)})})]},v.key):null})})]},y.name))]}),a.jsxs("div",{className:"muted",style:{marginTop:12,padding:12,background:"#1a2744",borderRadius:4},children:[a.jsx("strong",{children:"Analysis Tips:"}),a.jsxs("ul",{style:{marginTop:6,marginLeft:18,fontSize:13},children:[a.jsxs("li",{children:["Export as CSV and use ",a.jsx("code",{children:"plot_network_reliability_comparison.py"})," to generate resilience curves"]}),a.jsx("li",{children:"Look for policies that maintain high delivery rates even under poor network conditions"}),a.jsx("li",{children:"Identify which policies benefit most from caching during network degradation"}),a.jsx("li",{children:"Compare cache hit rates: higher means better network resilience through caching"}),a.jsx("li",{children:"Perfect for disaster scenarios: shows which policy works best when networks fail"})]})]})]});if(e.kind==="combined-comparison"){const y=e.comparisons.length*(((p=e.comparisons[0])==null?void 0:p.policyComparison.runs.length)??4);return a.jsxs("div",{children:[a.jsx("h3",{children:"Combined Device × Network Comparison"}),n&&a.jsxs("div",{className:"muted",style:{marginBottom:6,fontSize:13},children:["Live environment: ",n.scenario," - seed ",n.seed]}),a.jsx("div",{className:"muted",style:{marginBottom:12},children:e.info}),a.jsxs("div",{className:"muted",style:{marginBottom:12,fontSize:13},children:["Full solution space: Testing all ",y," combinations to find optimal policies for every (device, network) scenario. This simulates real-world neighborhoods where users have different devices AND network conditions."]}),a.jsx(wr,{result:e}),a.jsxs("details",{style:{marginTop:12},children:[a.jsxs("summary",{style:{cursor:"pointer",fontWeight:"bold"},children:["All Device × Network Combinations (",e.comparisons.length," scenarios)"]}),e.comparisons.map(({deviceProfile:k,networkProfile:x,policyComparison:v},O)=>a.jsxs("div",{style:{marginTop:O===0?12:16,paddingLeft:12,borderLeft:"4px solid #dc2626"},children:[a.jsxs("h4",{style:{marginBottom:4,color:"#dc2626"},children:[k.name," + ",x.name]}),a.jsxs("div",{className:"muted",style:{fontSize:12,marginBottom:8},children:["Cache: ",k.cacheSize," entries | Network: ",(x.reliability*100).toFixed(0),"% reliability"]}),a.jsx("div",{className:"metrics",style:{marginBottom:12,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:8},children:["deliveryRate","actionabilityFirstRatio","cacheHitRate"].map(B=>{const N=Vr.find(w=>w.key===B);if(!N)return null;const H=v.runs.map(w=>w.result.metrics[N.key]),g=Math.max(...H);return a.jsxs("div",{className:"metric",style:{padding:6,fontSize:11},children:[a.jsx("h5",{style:{fontSize:10,marginBottom:3},children:N.label}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:1},children:v.runs.map(({policy:w,result:j})=>{const I=j.metrics[N.key],$=Wn(N.format,I),D=I===g;return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11},children:[a.jsxs("span",{style:{color:"#94a3b8",minWidth:70},children:[w,":"]}),a.jsxs("span",{style:{fontWeight:D?"bold":"normal",color:D?"#dc2626":"inherit"},children:[$,D&&" ★"]})]},w)})})]},N.key)})})]},`${k.name}-${x.name}`))]}),a.jsxs("div",{className:"muted",style:{marginTop:12,padding:12,background:"#1a2744",borderRadius:4},children:[a.jsx("strong",{children:"Analysis Tips:"}),a.jsxs("ul",{style:{marginTop:6,marginLeft:18,fontSize:13},children:[a.jsxs("li",{children:["Export as CSV and use ",a.jsx("code",{children:"plot_combined_comparison.py"})," to generate 3D surfaces and heatmaps"]}),a.jsx("li",{children:"Look for policies that perform well across ALL scenarios (robust generalists)"}),a.jsx("li",{children:"Identify device/network combinations where policy choice matters most"}),a.jsx("li",{children:'Use winner cubes to create decision trees: "Which policy for which scenario?"'}),a.jsx("li",{children:"Extreme scenarios reveal policy strengths: best-case performance vs disaster resilience"}),a.jsx("li",{children:"This is the ultimate real-world test: heterogeneous devices + unreliable networks"})]})]})]})}if(e.kind==="multi-policy")return a.jsxs("div",{children:[a.jsx("h3",{children:"Multi-Policy Comparison"}),n&&a.jsxs("div",{className:"muted",style:{marginBottom:6,fontSize:13},children:["Live environment: ",n.scenario," - seed ",n.seed]}),a.jsx("div",{className:"muted",style:{marginBottom:12},children:e.info}),a.jsx("div",{className:"metrics",style:{marginBottom:12},children:Vr.map(y=>a.jsxs("div",{className:"metric",children:[a.jsx("h4",{children:y.label}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4,fontSize:13},children:e.runs.map(({policy:k,result:x})=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxs("span",{style:{color:"#94a3b8",minWidth:100},children:[k,":"]}),a.jsx("span",{style:{fontWeight:"bold"},children:Wn(y.format,x.metrics[y.key])})]},k))})]},y.key))}),t&&e.runs[0]&&a.jsx("div",{style:{marginBottom:12},children:a.jsx("button",{onClick:()=>t(e.runs[0].result),children:"Show Environment"})}),a.jsx(wr,{result:e}),a.jsxs("details",{style:{marginTop:12},children:[a.jsx("summary",{style:{cursor:"pointer"},children:"Individual Policy Details"}),e.runs.map(({policy:y,result:k})=>a.jsxs("div",{style:{marginTop:12,paddingLeft:12,borderLeft:"2px solid #2a3b63"},children:[a.jsx("h4",{style:{marginBottom:8},children:y}),a.jsx(Yi.Suspense,{fallback:a.jsx("div",{className:"muted",children:"Loading chart..."}),children:a.jsx(Ma,{data:k.timeline})}),a.jsx(Ta,{result:k}),a.jsx(Ea,{result:k}),y==="PriorityFresh"&&a.jsx(Ca,{result:k})]},y))]})]});if(e.kind==="batch"){const y=e.runs[e.runs.length-1];return a.jsxs("div",{children:[a.jsx("h3",{children:"Batch Results"}),n&&a.jsxs("div",{className:"muted",style:{marginBottom:6,fontSize:13},children:["Live environment: ",n.scenario," - seed ",n.seed]}),a.jsxs("div",{className:"muted",style:{marginBottom:8},children:[e.info,". Showing timeline for seed ",y?y.seed:"n/a","."]}),a.jsxs("div",{style:{marginBottom:12,fontSize:13,color:"#9fb3d9"},children:[a.jsxs("span",{children:["Replicates: ",e.replicates]}),a.jsxs("span",{style:{marginLeft:16},children:["Seed mode: ",e.seedMode]})]}),t&&y&&a.jsx("div",{style:{marginBottom:12},children:a.jsx("button",{onClick:()=>t(y.result),children:"Show last run in Environment"})}),a.jsx("div",{className:"metrics",style:{marginBottom:12},children:Vr.map(k=>a.jsxs("div",{className:"metric",children:[a.jsx("h4",{children:k.label}),a.jsxs("div",{className:"val",children:[Wn(k.format,e.aggregate.mean[k.key]),a.jsxs("span",{style:{fontSize:12,color:"#9fb3d9"},children:[" ","+/- ",Wn(k.format,e.aggregate.stdev[k.key])]})]})]},k.key))}),e.runs.length>0&&a.jsxs("details",{style:{marginBottom:12},children:[a.jsx("summary",{style:{cursor:"pointer"},children:"Seeds used"}),a.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0},children:e.runs.map((k,x)=>a.jsxs("li",{style:{listStyle:"disc",color:"#d7e1f7"},children:["#",x+1,": ",k.seed]},k.seed))})]}),a.jsx(Yi.Suspense,{fallback:a.jsx("div",{className:"muted",children:"Loading chart..."}),children:a.jsx(Ma,{data:y?y.result.timeline:[]})}),y&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"muted",style:{marginTop:12,fontSize:13,fontStyle:"italic"},children:["Detailed analytics below are for the last run (seed: ",y.seed,")"]}),a.jsx(Ta,{result:y.result}),a.jsx(wr,{result:y.result}),a.jsx(Ea,{result:y.result}),a.jsx(Ca,{result:y.result})]})]})}if(e.kind!=="single")return null;const s=e.result,{metrics:o,timeline:u,info:f}=s;return a.jsxs("div",{children:[a.jsx("h3",{children:"Results"}),n&&a.jsxs("div",{className:"muted",style:{marginBottom:6,fontSize:13},children:["Live environment: ",n.scenario," - seed ",n.seed]}),t&&a.jsx("div",{style:{marginBottom:12},children:a.jsx("button",{onClick:()=>t(s),children:"Show in Environment"})}),a.jsx("div",{className:"metrics",style:{marginBottom:12},children:Vr.map(y=>a.jsxs("div",{className:"metric",children:[a.jsx("h4",{children:y.label}),a.jsx("div",{className:"val",children:Wn(y.format,o[y.key])})]},y.key))}),a.jsx(Yi.Suspense,{fallback:a.jsx("div",{className:"muted",children:"Loading chart..."}),children:a.jsx(Ma,{data:u})}),a.jsx("div",{className:"muted",style:{marginTop:8},children:f}),r.length>0&&a.jsxs("details",{style:{marginTop:12},children:[a.jsx("summary",{style:{cursor:"pointer"},children:"Region delivery stats (top 5)"}),a.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0},children:r.map(y=>a.jsxs("li",{style:{listStyle:"disc",color:"#d7e1f7",marginBottom:4},children:[y.regionId,": delivered ",y.delivered,", dropped ",y.dropped,", first retrievals ",y.firstRetrievals,", avg latency ",a0(y.avgFirstRetrievalLatencySec),"s"]},y.regionId))})]}),a.jsx(Ta,{result:s}),a.jsx(wr,{result:s}),a.jsx(Ea,{result:s}),a.jsx(Ca,{result:s})]})}function Wn(e,t){return Number.isFinite(t)?e==="percent"?`${(t*100).toFixed(1)}%`:t.toFixed(2):"n/a"}function a0(e){return e===null||!Number.isFinite(e)?"n/a":e.toFixed(1)}const Fa=["cacheHitRate","deliveryRate","avgFreshness","staleAccessRate","redundancyIndex","actionabilityFirstRatio","timelinessConsistency","pushesSent","pushSuppressRate","pushDuplicateRate","pushTimelyFirstRatio"];let jf=0;function u0(e,t){const{replicates:n,seedMode:r}=c0(t),s=[],o=e.seed;for(let f=0;f<n;f++){const p=d0(o,f,r),y=Ec({...e,seed:p});s.push({seed:p,result:y})}const u=h0(s.map(f=>f.result));return{kind:"batch",baseSeed:o,seedMode:r,replicates:n,runs:s,aggregate:u,info:`Aggregated ${n} run(s) using ${r} seeds derived from base seed "${o}"`}}function c0(e){const t=Math.max(1,Math.floor(e.replicates||1)),n=e.seedMode??"Fixed";return{replicates:t,seedMode:n}}function d0(e,t,n){return n==="Fixed"?e:n==="DeterministicJitter"?`${e}#${t+1}`:`${e}#${f0(t)}`}function f0(e){jf+=1;const t=typeof globalThis<"u"&&"crypto"in globalThis?globalThis.crypto:void 0;return t&&typeof t.randomUUID=="function"?t.randomUUID():`rand-${Date.now().toString(36)}-${e}-${jf}-${Math.random().toString(16).slice(2)}`}function h0(e){const t=e.length,n={},r={};for(const s of Fa)n[s]=t?e.reduce((o,u)=>o+(u.metrics[s]??0),0)/t:0;if(t<=1){for(const s of Fa)r[s]=0;return{mean:n,stdev:r}}for(const s of Fa){const o=e.reduce((u,f)=>{const p=(f.metrics[s]??0)-n[s];return u+p*p},0)/(t-1);r[s]=Math.sqrt(Math.max(o,0))}return{mean:n,stdev:r}}var em={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ud,function(){var n=function(i,l){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(c[h]=d[h])})(i,l)},r=function(){return(r=Object.assign||function(i){for(var l,c=1,d=arguments.length;c<d;c++)for(var h in l=arguments[c])Object.prototype.hasOwnProperty.call(l,h)&&(i[h]=l[h]);return i}).apply(this,arguments)};function s(i,l,c){for(var d,h=0,m=l.length;h<m;h++)!d&&h in l||((d=d||Array.prototype.slice.call(l,0,h))[h]=l[h]);return i.concat(d||Array.prototype.slice.call(l))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ud,u=Object.keys,f=Array.isArray;function p(i,l){return typeof l!="object"||u(l).forEach(function(c){i[c]=l[c]}),i}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var y=Object.getPrototypeOf,k={}.hasOwnProperty;function x(i,l){return k.call(i,l)}function v(i,l){typeof l=="function"&&(l=l(y(i))),(typeof Reflect>"u"?u:Reflect.ownKeys)(l).forEach(function(c){B(i,c,l[c])})}var O=Object.defineProperty;function B(i,l,c,d){O(i,l,p(c&&x(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function N(i){return{from:function(l){return i.prototype=Object.create(l.prototype),B(i.prototype,"constructor",i),{extend:v.bind(null,i.prototype)}}}}var H=Object.getOwnPropertyDescriptor,g=[].slice;function w(i,l,c){return g.call(i,l,c)}function j(i,l){return l(i)}function I(i){if(!i)throw new Error("Assertion Failed")}function $(i){o.setImmediate?setImmediate(i):setTimeout(i,0)}function D(i,l){if(typeof l=="string"&&x(i,l))return i[l];if(!l)return i;if(typeof l!="string"){for(var c=[],d=0,h=l.length;d<h;++d){var m=D(i,l[d]);c.push(m)}return c}var S=l.indexOf(".");if(S!==-1){var b=i[l.substr(0,S)];return b==null?void 0:D(b,l.substr(S+1))}}function W(i,l,c){if(i&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof l!="string"&&"length"in l){I(typeof c!="string"&&"length"in c);for(var d=0,h=l.length;d<h;++d)W(i,l[d],c[d])}else{var m,S,b=l.indexOf(".");b!==-1?(m=l.substr(0,b),(S=l.substr(b+1))===""?c===void 0?f(i)&&!isNaN(parseInt(m))?i.splice(m,1):delete i[m]:i[m]=c:W(b=!(b=i[m])||!x(i,m)?i[m]={}:b,S,c)):c===void 0?f(i)&&!isNaN(parseInt(l))?i.splice(l,1):delete i[l]:i[l]=c}}function Y(i){var l,c={};for(l in i)x(i,l)&&(c[l]=i[l]);return c}var ee=[].concat;function le(i){return ee.apply([],i)}var yn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(l){return l+i+"Array"})}))).filter(function(i){return o[i]}),pe=new Set(yn.map(function(i){return o[i]})),Ne=null;function _e(i){return Ne=new WeakMap,i=function l(c){if(!c||typeof c!="object")return c;var d=Ne.get(c);if(d)return d;if(f(c)){d=[],Ne.set(c,d);for(var h=0,m=c.length;h<m;++h)d.push(l(c[h]))}else if(pe.has(c.constructor))d=c;else{var S,b=y(c);for(S in d=b===Object.prototype?{}:Object.create(b),Ne.set(c,d),c)x(c,S)&&(d[S]=l(c[S]))}return d}(i),Ne=null,i}var Le={}.toString;function Ze(i){return Le.call(i).slice(8,-1)}var Lt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",hn=typeof Lt=="symbol"?function(i){var l;return i!=null&&(l=i[Lt])&&l.apply(i)}:function(){return null};function te(i,l){return l=i.indexOf(l),0<=l&&i.splice(l,1),0<=l}var de={};function re(i){var l,c,d,h;if(arguments.length===1){if(f(i))return i.slice();if(this===de&&typeof i=="string")return[i];if(h=hn(i)){for(c=[];!(d=h.next()).done;)c.push(d.value);return c}if(i==null)return[i];if(typeof(l=i.length)!="number")return[i];for(c=new Array(l);l--;)c[l]=i[l];return c}for(l=arguments.length,c=new Array(l);l--;)c[l]=arguments[l];return c}var Re=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},zn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(zn),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Te(i,l){this.name=i,this.message=l}function Be(i,l){return i+". Errors: "+Object.keys(l).map(function(c){return l[c].toString()}).filter(function(c,d,h){return h.indexOf(c)===d}).join(`
`)}function Ge(i,l,c,d){this.failures=l,this.failedKeys=d,this.successCount=c,this.message=Be(i,l)}function ge(i,l){this.name="BulkError",this.failures=Object.keys(l).map(function(c){return l[c]}),this.failuresByPos=l,this.message=Be(i,this.failures)}N(Te).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(Ge).from(Te),N(ge).from(Te);var rt=$t.reduce(function(i,l){return i[l]=l+"Error",i},{}),pn=Te,ue=$t.reduce(function(i,l){var c=l+"Error";function d(h,m){this.name=c,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=G[l]||c,this.inner=null)}return N(d).from(pn),i[l]=d,i},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var me=zn.reduce(function(i,l){return i[l+"Error"]=ue[l],i},{}),je=$t.reduce(function(i,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(i[l+"Error"]=ue[l]),i},{});function xe(){}function Pt(i){return i}function cr(i,l){return i==null||i===Pt?l:function(c){return l(i(c))}}function Tt(i,l){return function(){i.apply(this,arguments),l.apply(this,arguments)}}function $e(i,l){return i===xe?l:function(){var c=i.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=l.apply(this,arguments);return d&&(this.onsuccess=this.onsuccess?Tt(d,this.onsuccess):d),h&&(this.onerror=this.onerror?Tt(h,this.onerror):h),m!==void 0?m:c}}function Me(i,l){return i===xe?l:function(){i.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Tt(c,this.onsuccess):c),d&&(this.onerror=this.onerror?Tt(d,this.onerror):d)}}function qe(i,l){return i===xe?l:function(c){var d=i.apply(this,arguments);p(c,d);var h=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,c=l.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Tt(h,this.onsuccess):h),m&&(this.onerror=this.onerror?Tt(m,this.onerror):m),d===void 0?c===void 0?void 0:c:p(d,c)}}function rn(i,l){return i===xe?l:function(){return l.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function Bt(i,l){return i===xe?l:function(){var c=i.apply(this,arguments);if(c&&typeof c.then=="function"){for(var d=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return c.then(function(){return l.apply(d,m)})}return l.apply(this,arguments)}}je.ModifyError=Ge,je.DexieError=Te,je.BulkError=ge;var et=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function mn(i){et=i}var Qt={},Es=100,yn=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,y(i),i];var l=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[l,y(l),i]}(),zn=yn[0],$t=yn[1],yn=yn[2],$t=$t&&$t.then,An=zn&&zn.constructor,Yt=!!yn,vn=function(i,l){bi.push([i,l]),Ns&&(queueMicrotask(lm),Ns=!1)},ki=!0,Ns=!0,dr=[],Ps=[],kl=Pt,In={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xe,pgp:!1,env:{},finalize:xe},ce=In,bi=[],fr=0,Ts=[];function se(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=ce;if(typeof i!="function"){if(i!==Qt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&_l(this,this._value))}this._state=null,this._value=null,++l.ref,function c(d,h){try{h(function(m){if(d._state===null){if(m===d)throw new TypeError("A promise cannot be resolved with itself.");var S=d._lib&&Ir();m&&typeof m.then=="function"?c(d,function(b,R){m instanceof se?m._then(b,R):m.then(b,R)}):(d._state=!0,d._value=m,Mc(d)),S&&Dr()}},_l.bind(null,d))}catch(m){_l(d,m)}}(this,i)}var bl={get:function(){var i=ce,l=As;function c(d,h){var m=this,S=!i.global&&(i!==ce||l!==As),b=S&&!On(),R=new se(function(E,T){Rl(m,new Tc(zc(d,i,S,b),zc(h,i,S,b),E,T,i))});return this._consoleTask&&(R._consoleTask=this._consoleTask),R}return c.prototype=Qt,c},set:function(i){B(this,"then",i&&i.prototype===Qt?bl:{get:function(){return i},set:bl.set})}};function Tc(i,l,c,d,h){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof l=="function"?l:null,this.resolve=c,this.reject=d,this.psd=h}function _l(i,l){var c,d;Ps.push(l),i._state===null&&(c=i._lib&&Ir(),l=kl(l),i._state=!1,i._value=l,d=i,dr.some(function(h){return h._value===d._value})||dr.push(d),Mc(i),c&&Dr())}function Mc(i){var l=i._listeners;i._listeners=[];for(var c=0,d=l.length;c<d;++c)Rl(i,l[c]);var h=i._PSD;--h.ref||h.finalize(),fr===0&&(++fr,vn(function(){--fr==0&&Cl()},[]))}function Rl(i,l){if(i._state!==null){var c=i._state?l.onFulfilled:l.onRejected;if(c===null)return(i._state?l.resolve:l.reject)(i._value);++l.psd.ref,++fr,vn(om,[c,i,l])}else i._listeners.push(l)}function om(i,l,c){try{var d,h=l._value;!l._state&&Ps.length&&(Ps=[]),d=et&&l._consoleTask?l._consoleTask.run(function(){return i(h)}):i(h),l._state||Ps.indexOf(h)!==-1||function(m){for(var S=dr.length;S;)if(dr[--S]._value===m._value)return dr.splice(S,1)}(l),c.resolve(d)}catch(m){c.reject(m)}finally{--fr==0&&Cl(),--c.psd.ref||c.psd.finalize()}}function lm(){hr(In,function(){Ir()&&Dr()})}function Ir(){var i=ki;return Ns=ki=!1,i}function Dr(){var i,l,c;do for(;0<bi.length;)for(i=bi,bi=[],c=i.length,l=0;l<c;++l){var d=i[l];d[0].apply(null,d[1])}while(0<bi.length);Ns=ki=!0}function Cl(){var i=dr;dr=[],i.forEach(function(d){d._PSD.onunhandled.call(null,d._value,d)});for(var l=Ts.slice(0),c=l.length;c;)l[--c]()}function Ms(i){return new se(Qt,!1,i)}function De(i,l){var c=ce;return function(){var d=Ir(),h=ce;try{return Ln(c,!0),i.apply(this,arguments)}catch(m){l&&l(m)}finally{Ln(h,!1),d&&Dr()}}}v(se.prototype,{then:bl,_then:function(i,l){Rl(this,new Tc(null,null,i,l,ce))},catch:function(i){if(arguments.length===1)return this.then(null,i);var l=i,c=arguments[1];return typeof l=="function"?this.then(null,function(d){return(d instanceof l?c:Ms)(d)}):this.then(null,function(d){return(d&&d.name===l?c:Ms)(d)})},finally:function(i){return this.then(function(l){return se.resolve(i()).then(function(){return l})},function(l){return se.resolve(i()).then(function(){return Ms(l)})})},timeout:function(i,l){var c=this;return i<1/0?new se(function(d,h){var m=setTimeout(function(){return h(new ue.Timeout(l))},i);c.then(d,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&B(se.prototype,Symbol.toStringTag,"Dexie.Promise"),In.env=Fc(),v(se,{all:function(){var i=re.apply(null,arguments).map(Is);return new se(function(l,c){i.length===0&&l([]);var d=i.length;i.forEach(function(h,m){return se.resolve(h).then(function(S){i[m]=S,--d||l(i)},c)})})},resolve:function(i){return i instanceof se?i:i&&typeof i.then=="function"?new se(function(l,c){i.then(l,c)}):new se(Qt,!0,i)},reject:Ms,race:function(){var i=re.apply(null,arguments).map(Is);return new se(function(l,c){i.map(function(d){return se.resolve(d).then(l,c)})})},PSD:{get:function(){return ce},set:function(i){return ce=i}},totalEchoes:{get:function(){return As}},newPSD:Dn,usePSD:hr,scheduler:{get:function(){return vn},set:function(i){vn=i}},rejectionMapper:{get:function(){return kl},set:function(i){kl=i}},follow:function(i,l){return new se(function(c,d){return Dn(function(h,m){var S=ce;S.unhandleds=[],S.onunhandled=m,S.finalize=Tt(function(){var b,R=this;b=function(){R.unhandleds.length===0?h():m(R.unhandleds[0])},Ts.push(function E(){b(),Ts.splice(Ts.indexOf(E),1)}),++fr,vn(function(){--fr==0&&Cl()},[])},S.finalize),i()},l,c,d)})}}),An&&(An.allSettled&&B(se,"allSettled",function(){var i=re.apply(null,arguments).map(Is);return new se(function(l){i.length===0&&l([]);var c=i.length,d=new Array(c);i.forEach(function(h,m){return se.resolve(h).then(function(S){return d[m]={status:"fulfilled",value:S}},function(S){return d[m]={status:"rejected",reason:S}}).then(function(){return--c||l(d)})})})}),An.any&&typeof AggregateError<"u"&&B(se,"any",function(){var i=re.apply(null,arguments).map(Is);return new se(function(l,c){i.length===0&&c(new AggregateError([]));var d=i.length,h=new Array(d);i.forEach(function(m,S){return se.resolve(m).then(function(b){return l(b)},function(b){h[S]=b,--d||c(new AggregateError(h))})})})}),An.withResolvers&&(se.withResolvers=An.withResolvers));var it={awaits:0,echoes:0,id:0},am=0,Fs=[],zs=0,As=0,um=0;function Dn(i,l,c,d){var h=ce,m=Object.create(h);return m.parent=h,m.ref=0,m.global=!1,m.id=++um,In.env,m.env=Yt?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject}:{},l&&p(m,l),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},d=hr(m,i,c,d),m.ref===0&&m.finalize(),d}function Or(){return it.id||(it.id=++am),++it.awaits,it.echoes+=Es,it.id}function On(){return!!it.awaits&&(--it.awaits==0&&(it.id=0),it.echoes=it.awaits*Es,!0)}function Is(i){return it.echoes&&i&&i.constructor===An?(Or(),i.then(function(l){return On(),l},function(l){return On(),Qe(l)})):i}function cm(){var i=Fs[Fs.length-1];Fs.pop(),Ln(i,!1)}function Ln(i,l){var c,d=ce;(l?!it.echoes||zs++&&i===ce:!zs||--zs&&i===ce)||queueMicrotask(l?(function(h){++As,it.echoes&&--it.echoes!=0||(it.echoes=it.awaits=it.id=0),Fs.push(ce),Ln(h,!0)}).bind(null,i):cm),i!==ce&&(ce=i,d===In&&(In.env=Fc()),Yt&&(c=In.env.Promise,l=i.env,(d.global||i.global)&&(Object.defineProperty(o,"Promise",l.PromiseProp),c.all=l.all,c.race=l.race,c.resolve=l.resolve,c.reject=l.reject,l.allSettled&&(c.allSettled=l.allSettled),l.any&&(c.any=l.any))))}function Fc(){var i=o.Promise;return Yt?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function hr(i,l,c,d,h){var m=ce;try{return Ln(i,!0),l(c,d,h)}finally{Ln(m,!1)}}function zc(i,l,c,d){return typeof i!="function"?i:function(){var h=ce;c&&Or(),Ln(l,!0);try{return i.apply(this,arguments)}finally{Ln(h,!1),d&&queueMicrotask(On)}}}function El(i){Promise===An&&it.echoes===0?zs===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+$t).indexOf("[native code]")===-1&&(Or=On=xe);var Qe=se.reject,pr="￿",gn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ac="String expected.",Lr=[],Ds="__dbnames",Nl="readonly",Pl="readwrite";function mr(i,l){return i?l?function(){return i.apply(this,arguments)&&l.apply(this,arguments)}:i:l}var Ic={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Os(i){return typeof i!="string"||/\./.test(i)?function(l){return l}:function(l){return l[i]===void 0&&i in l&&delete(l=_e(l))[i],l}}function Dc(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Se(i,l){try{var c=Oc(i),d=Oc(l);if(c!==d)return c==="Array"?1:d==="Array"?-1:c==="binary"?1:d==="binary"?-1:c==="string"?1:d==="string"?-1:c==="Date"?1:d!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return l<i?1:i<l?-1:0;case"binary":return function(h,m){for(var S=h.length,b=m.length,R=S<b?S:b,E=0;E<R;++E)if(h[E]!==m[E])return h[E]<m[E]?-1:1;return S===b?0:S<b?-1:1}(Lc(i),Lc(l));case"Array":return function(h,m){for(var S=h.length,b=m.length,R=S<b?S:b,E=0;E<R;++E){var T=Se(h[E],m[E]);if(T!==0)return T}return S===b?0:S<b?-1:1}(i,l)}}catch{}return NaN}function Oc(i){var l=typeof i;return l!="object"?l:ArrayBuffer.isView(i)?"binary":(i=Ze(i),i==="ArrayBuffer"?"binary":i)}function Lc(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}function Ls(i,l,c){var d=i.schema.yProps;return d?(l&&0<c.numFailures&&(l=l.filter(function(h,m){return!c.failures[m]})),Promise.all(d.map(function(h){return h=h.updatesTable,l?i.db.table(h).where("k").anyOf(l).delete():i.db.table(h).clear()})).then(function(){return c})):c}var Bc=(ze.prototype._trans=function(i,l,c){var d=this._tx||ce.trans,h=this.name,m=et&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function S(E,T,_){if(!_.schema[h])throw new ue.NotFound("Table "+h+" not part of transaction");return l(_.idbtrans,_)}var b=Ir();try{var R=d&&d.db._novip===this.db._novip?d===ce.trans?d._promise(i,S,c):Dn(function(){return d._promise(i,S,c)},{trans:d,transless:ce.transless||ce}):function E(T,_,z,C){if(T.idbdb&&(T._state.openComplete||ce.letThrough||T._vip)){var P=T._createTransaction(_,z,T._dbSchema);try{P.create(),T._state.PR1398_maxLoop=3}catch(F){return F.name===rt.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return E(T,_,z,C)})):Qe(F)}return P._promise(_,function(F,M){return Dn(function(){return ce.trans=P,C(F,M,P)})}).then(function(F){if(_==="readwrite")try{P.idbtrans.commit()}catch{}return _==="readonly"?F:P._completion.then(function(){return F})})}if(T._state.openComplete)return Qe(new ue.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return Qe(new ue.DatabaseClosed);T.open().catch(xe)}return T._state.dbReadyPromise.then(function(){return E(T,_,z,C)})}(this.db,i,[this.name],S);return m&&(R._consoleTask=m,R=R.catch(function(E){return console.trace(E),Qe(E)})),R}finally{b&&Dr()}},ze.prototype.get=function(i,l){var c=this;return i&&i.constructor===Object?this.where(i).first(l):i==null?Qe(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(d){return c.core.get({trans:d,key:i}).then(function(h){return c.hook.reading.fire(h)})}).then(l)},ze.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(f(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var l=u(i);if(l.length===1)return this.where(l[0]).equals(i[l[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&l.every(function(E){return 0<=b.keyPath.indexOf(E)})){for(var R=0;R<l.length;++R)if(l.indexOf(b.keyPath[R])===-1)return!1;return!0}return!1}).sort(function(b,R){return b.keyPath.length-R.keyPath.length})[0];if(c&&this.db._maxKey!==pr){var m=c.keyPath.slice(0,l.length);return this.where(m).equals(m.map(function(R){return i[R]}))}!c&&et&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var d=this.schema.idxByName;function h(b,R){return Se(b,R)===0}var S=l.reduce(function(_,R){var E=_[0],T=_[1],_=d[R],z=i[R];return[E||_,E||!_?mr(T,_&&_.multi?function(C){return C=D(C,R),f(C)&&C.some(function(P){return h(z,P)})}:function(C){return h(z,D(C,R))}):T]},[null,null]),m=S[0],S=S[1];return m?this.where(m.name).equals(i[m.keyPath]).filter(S):c?this.filter(S):this.where(l).equals("")},ze.prototype.filter=function(i){return this.toCollection().and(i)},ze.prototype.count=function(i){return this.toCollection().count(i)},ze.prototype.offset=function(i){return this.toCollection().offset(i)},ze.prototype.limit=function(i){return this.toCollection().limit(i)},ze.prototype.each=function(i){return this.toCollection().each(i)},ze.prototype.toArray=function(i){return this.toCollection().toArray(i)},ze.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ze.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,f(i)?"[".concat(i.join("+"),"]"):i))},ze.prototype.reverse=function(){return this.toCollection().reverse()},ze.prototype.mapToClass=function(i){var l,c=this.db,d=this.name;function h(){return l!==null&&l.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof Dc&&(function(R,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function T(){this.constructor=R}n(R,E),R.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}(h,l=i),Object.defineProperty(h.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),h.prototype.table=function(){return d},i=h);for(var m=new Set,S=i.prototype;S;S=y(S))Object.getOwnPropertyNames(S).forEach(function(R){return m.add(R)});function b(R){if(!R)return R;var E,T=Object.create(i.prototype);for(E in R)if(!m.has(E))try{T[E]=R[E]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),i},ze.prototype.defineClass=function(){return this.mapToClass(function(i){p(this,i)})},ze.prototype.add=function(i,l){var c=this,d=this.schema.primKey,h=d.auto,m=d.keyPath,S=i;return m&&h&&(S=Os(m)(i)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"add",keys:l!=null?[l]:null,values:[S]})}).then(function(b){return b.numFailures?se.reject(b.failures[0]):b.lastResult}).then(function(b){if(m)try{W(i,m,b)}catch{}return b})},ze.prototype.update=function(i,l){return typeof i!="object"||f(i)?this.where(":id").equals(i).modify(l):(i=D(i,this.schema.primKey.keyPath),i===void 0?Qe(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(l))},ze.prototype.put=function(i,l){var c=this,d=this.schema.primKey,h=d.auto,m=d.keyPath,S=i;return m&&h&&(S=Os(m)(i)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"put",values:[S],keys:l!=null?[l]:null})}).then(function(b){return b.numFailures?se.reject(b.failures[0]):b.lastResult}).then(function(b){if(m)try{W(i,m,b)}catch{}return b})},ze.prototype.delete=function(i){var l=this;return this._trans("readwrite",function(c){return l.core.mutate({trans:c,type:"delete",keys:[i]}).then(function(d){return Ls(l,[i],d)}).then(function(d){return d.numFailures?se.reject(d.failures[0]):void 0})})},ze.prototype.clear=function(){var i=this;return this._trans("readwrite",function(l){return i.core.mutate({trans:l,type:"deleteRange",range:Ic}).then(function(c){return Ls(i,null,c)})}).then(function(l){return l.numFailures?se.reject(l.failures[0]):void 0})},ze.prototype.bulkGet=function(i){var l=this;return this._trans("readonly",function(c){return l.core.getMany({keys:i,trans:c}).then(function(d){return d.map(function(h){return l.hook.reading.fire(h)})})})},ze.prototype.bulkAdd=function(i,l,c){var d=this,h=Array.isArray(l)?l:void 0,m=(c=c||(h?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(S){var E=d.schema.primKey,b=E.auto,E=E.keyPath;if(E&&h)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var R=i.length,E=E&&b?i.map(Os(E)):i;return d.core.mutate({trans:S,type:"add",keys:h,values:E,wantResults:m}).then(function(P){var _=P.numFailures,z=P.results,C=P.lastResult,P=P.failures;if(_===0)return m?z:C;throw new ge("".concat(d.name,".bulkAdd(): ").concat(_," of ").concat(R," operations failed"),P)})})},ze.prototype.bulkPut=function(i,l,c){var d=this,h=Array.isArray(l)?l:void 0,m=(c=c||(h?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(S){var E=d.schema.primKey,b=E.auto,E=E.keyPath;if(E&&h)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==i.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var R=i.length,E=E&&b?i.map(Os(E)):i;return d.core.mutate({trans:S,type:"put",keys:h,values:E,wantResults:m}).then(function(P){var _=P.numFailures,z=P.results,C=P.lastResult,P=P.failures;if(_===0)return m?z:C;throw new ge("".concat(d.name,".bulkPut(): ").concat(_," of ").concat(R," operations failed"),P)})})},ze.prototype.bulkUpdate=function(i){var l=this,c=this.core,d=i.map(function(S){return S.key}),h=i.map(function(S){return S.changes}),m=[];return this._trans("readwrite",function(S){return c.getMany({trans:S,keys:d,cache:"clone"}).then(function(b){var R=[],E=[];i.forEach(function(_,z){var C=_.key,P=_.changes,F=b[z];if(F){for(var M=0,A=Object.keys(P);M<A.length;M++){var L=A[M],U=P[L];if(L===l.schema.primKey.keyPath){if(Se(U,C)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else W(F,L,U)}m.push(z),R.push(C),E.push(F)}});var T=R.length;return c.mutate({trans:S,type:"put",keys:R,values:E,updates:{keys:d,changeSpecs:h}}).then(function(_){var z=_.numFailures,C=_.failures;if(z===0)return T;for(var P=0,F=Object.keys(C);P<F.length;P++){var M,A=F[P],L=m[Number(A)];L!=null&&(M=C[A],delete C[A],C[L]=M)}throw new ge("".concat(l.name,".bulkUpdate(): ").concat(z," of ").concat(T," operations failed"),C)})})})},ze.prototype.bulkDelete=function(i){var l=this,c=i.length;return this._trans("readwrite",function(d){return l.core.mutate({trans:d,type:"delete",keys:i}).then(function(h){return Ls(l,i,h)})}).then(function(S){var h=S.numFailures,m=S.lastResult,S=S.failures;if(h===0)return m;throw new ge("".concat(l.name,".bulkDelete(): ").concat(h," of ").concat(c," operations failed"),S)})},ze);function ze(){}function _i(i){function l(S,b){if(b){for(var R=arguments.length,E=new Array(R-1);--R;)E[R-1]=arguments[R];return c[S].subscribe.apply(null,E),i}if(typeof S=="string")return c[S]}var c={};l.addEventType=m;for(var d=1,h=arguments.length;d<h;++d)m(arguments[d]);return l;function m(S,b,R){if(typeof S!="object"){var E;b=b||rn;var T={subscribers:[],fire:R=R||xe,subscribe:function(_){T.subscribers.indexOf(_)===-1&&(T.subscribers.push(_),T.fire=b(T.fire,_))},unsubscribe:function(_){T.subscribers=T.subscribers.filter(function(z){return z!==_}),T.fire=T.subscribers.reduce(b,R)}};return c[S]=l[S]=T}u(E=S).forEach(function(_){var z=E[_];if(f(z))m(_,E[_][0],E[_][1]);else{if(z!=="asap")throw new ue.InvalidArgument("Invalid event config");var C=m(_,Pt,function(){for(var P=arguments.length,F=new Array(P);P--;)F[P]=arguments[P];C.subscribers.forEach(function(M){$(function(){M.apply(null,F)})})})}})}}function Ri(i,l){return N(l).from({prototype:i}),l}function Br(i,l){return!(i.filter||i.algorithm||i.or)&&(l?i.justLimit:!i.replayFilter)}function Tl(i,l){i.filter=mr(i.filter,l)}function Ml(i,l,c){var d=i.replayFilter;i.replayFilter=d?function(){return mr(d(),l())}:l,i.justLimit=c&&!d}function Bs(i,l){if(i.isPrimKey)return l.primaryKey;var c=l.getIndexByKeyPath(i.index);if(!c)throw new ue.Schema("KeyPath "+i.index+" on object store "+l.name+" is not indexed");return c}function $c(i,l,c){var d=Bs(i,l.schema);return l.openCursor({trans:c,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:d,range:i.range}})}function $s(i,l,c,d){var h=i.replayFilter?mr(i.filter,i.replayFilter()):i.filter;if(i.or){var m={},S=function(b,R,E){var T,_;h&&!h(R,E,function(z){return R.stop(z)},function(z){return R.fail(z)})||((_=""+(T=R.primaryKey))=="[object ArrayBuffer]"&&(_=""+new Uint8Array(T)),x(m,_)||(m[_]=!0,l(b,R,E)))};return Promise.all([i.or._iterate(S,c),Uc($c(i,d,c),i.algorithm,S,!i.keysOnly&&i.valueMapper)])}return Uc($c(i,d,c),mr(i.algorithm,h),l,!i.keysOnly&&i.valueMapper)}function Uc(i,l,c,d){var h=De(d?function(m,S,b){return c(d(m),S,b)}:c);return i.then(function(m){if(m)return m.start(function(){var S=function(){return m.continue()};l&&!l(m,function(b){return S=b},function(b){m.stop(b),S=xe},function(b){m.fail(b),S=xe})||h(m.value,m,function(b){return S=b}),S()})})}var Ci=(Kc.prototype.execute=function(i){var l=this["@@propmod"];if(l.add!==void 0){var c=l.add;if(f(c))return s(s([],f(i)?i:[],!0),c).sort();if(typeof c=="number")return(Number(i)||0)+c;if(typeof c=="bigint")try{return BigInt(i)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(l.remove!==void 0){var d=l.remove;if(f(d))return f(i)?i.filter(function(h){return!d.includes(h)}).sort():[];if(typeof d=="number")return Number(i)-d;if(typeof d=="bigint")try{return BigInt(i)-d}catch{return BigInt(0)-d}throw new TypeError("Invalid subtrahend ".concat(d))}return c=(c=l.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof i=="string"&&i.startsWith(c)?l.replacePrefix[1]+i.substring(c.length):i},Kc);function Kc(i){this["@@propmod"]=i}var dm=(Ce.prototype._read=function(i,l){var c=this._ctx;return c.error?c.table._trans(null,Qe.bind(null,c.error)):c.table._trans("readonly",i).then(l)},Ce.prototype._write=function(i){var l=this._ctx;return l.error?l.table._trans(null,Qe.bind(null,l.error)):l.table._trans("readwrite",i,"locked")},Ce.prototype._addAlgorithm=function(i){var l=this._ctx;l.algorithm=mr(l.algorithm,i)},Ce.prototype._iterate=function(i,l){return $s(this._ctx,i,l,this._ctx.table.core)},Ce.prototype.clone=function(i){var l=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return i&&p(c,i),l._ctx=c,l},Ce.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ce.prototype.each=function(i){var l=this._ctx;return this._read(function(c){return $s(l,i,c,l.table.core)})},Ce.prototype.count=function(i){var l=this;return this._read(function(c){var d=l._ctx,h=d.table.core;if(Br(d,!0))return h.count({trans:c,query:{index:Bs(d,h.schema),range:d.range}}).then(function(S){return Math.min(S,d.limit)});var m=0;return $s(d,function(){return++m,!1},c,h).then(function(){return m})}).then(i)},Ce.prototype.sortBy=function(i,l){var c=i.split(".").reverse(),d=c[0],h=c.length-1;function m(R,E){return E?m(R[c[E]],E-1):R[d]}var S=this._ctx.dir==="next"?1:-1;function b(R,E){return Se(m(R,h),m(E,h))*S}return this.toArray(function(R){return R.sort(b)}).then(l)},Ce.prototype.toArray=function(i){var l=this;return this._read(function(c){var d=l._ctx;if(d.dir==="next"&&Br(d,!0)&&0<d.limit){var h=d.valueMapper,m=Bs(d,d.table.core.schema);return d.table.core.query({trans:c,limit:d.limit,values:!0,query:{index:m,range:d.range}}).then(function(b){return b=b.result,h?b.map(h):b})}var S=[];return $s(d,function(b){return S.push(b)},c,d.table.core).then(function(){return S})},i)},Ce.prototype.offset=function(i){var l=this._ctx;return i<=0||(l.offset+=i,Br(l)?Ml(l,function(){var c=i;return function(d,h){return c===0||(c===1?--c:h(function(){d.advance(c),c=0}),!1)}}):Ml(l,function(){var c=i;return function(){return--c<0}})),this},Ce.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),Ml(this._ctx,function(){var l=i;return function(c,d,h){return--l<=0&&d(h),0<=l}},!0),this},Ce.prototype.until=function(i,l){return Tl(this._ctx,function(c,d,h){return!i(c.value)||(d(h),l)}),this},Ce.prototype.first=function(i){return this.limit(1).toArray(function(l){return l[0]}).then(i)},Ce.prototype.last=function(i){return this.reverse().first(i)},Ce.prototype.filter=function(i){var l;return Tl(this._ctx,function(c){return i(c.value)}),(l=this._ctx).isMatch=mr(l.isMatch,i),this},Ce.prototype.and=function(i){return this.filter(i)},Ce.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},Ce.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ce.prototype.desc=function(){return this.reverse()},Ce.prototype.eachKey=function(i){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,d){i(d.key,d)})},Ce.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},Ce.prototype.eachPrimaryKey=function(i){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,d){i(d.primaryKey,d)})},Ce.prototype.keys=function(i){var l=this._ctx;l.keysOnly=!l.isMatch;var c=[];return this.each(function(d,h){c.push(h.key)}).then(function(){return c}).then(i)},Ce.prototype.primaryKeys=function(i){var l=this._ctx;if(l.dir==="next"&&Br(l,!0)&&0<l.limit)return this._read(function(d){var h=Bs(l,l.table.core.schema);return l.table.core.query({trans:d,values:!1,limit:l.limit,query:{index:h,range:l.range}})}).then(function(d){return d.result}).then(i);l.keysOnly=!l.isMatch;var c=[];return this.each(function(d,h){c.push(h.primaryKey)}).then(function(){return c}).then(i)},Ce.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},Ce.prototype.firstKey=function(i){return this.limit(1).keys(function(l){return l[0]}).then(i)},Ce.prototype.lastKey=function(i){return this.reverse().firstKey(i)},Ce.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var l={};return Tl(this._ctx,function(h){var d=h.primaryKey.toString(),h=x(l,d);return l[d]=!0,!h}),this},Ce.prototype.modify=function(i){var l=this,c=this._ctx;return this._write(function(d){var h,m,S;S=typeof i=="function"?i:(h=u(i),m=h.length,function(A){for(var L=!1,U=0;U<m;++U){var K=h[U],V=i[K],Z=D(A,K);V instanceof Ci?(W(A,K,V.execute(Z)),L=!0):Z!==V&&(W(A,K,V),L=!0)}return L});var b=c.table.core,_=b.schema.primaryKey,R=_.outbound,E=_.extractKey,T=200,_=l.db._options.modifyChunkSize;_&&(T=typeof _=="object"?_[b.name]||_["*"]||200:_);function z(A,K){var U=K.failures,K=K.numFailures;P+=A-K;for(var V=0,Z=u(U);V<Z.length;V++){var Q=Z[V];C.push(U[Q])}}var C=[],P=0,F=[],M=i===Wc;return l.clone().primaryKeys().then(function(A){function L(K){var V=Math.min(T,A.length-K),Z=A.slice(K,K+V);return(M?Promise.resolve([]):b.getMany({trans:d,keys:Z,cache:"immutable"})).then(function(Q){var X=[],ie=[],ne=R?[]:null,oe=M?Z:[];if(!M)for(var ye=0;ye<V;++ye){var ke=Q[ye],he={value:_e(ke),primKey:A[K+ye]};S.call(he,he.value,he)!==!1&&(he.value==null?oe.push(A[K+ye]):R||Se(E(ke),E(he.value))===0?(ie.push(he.value),R&&ne.push(A[K+ye])):(oe.push(A[K+ye]),X.push(he.value)))}return Promise.resolve(0<X.length&&b.mutate({trans:d,type:"add",values:X}).then(function(Ve){for(var fe in Ve.failures)oe.splice(parseInt(fe),1);z(X.length,Ve)})).then(function(){return(0<ie.length||U&&typeof i=="object")&&b.mutate({trans:d,type:"put",keys:ne,values:ie,criteria:U,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<K}).then(function(Ve){return z(ie.length,Ve)})}).then(function(){return(0<oe.length||U&&M)&&b.mutate({trans:d,type:"delete",keys:oe,criteria:U,isAdditionalChunk:0<K}).then(function(Ve){return Ls(c.table,oe,Ve)}).then(function(Ve){return z(oe.length,Ve)})}).then(function(){return A.length>K+V&&L(K+T)})})}var U=Br(c)&&c.limit===1/0&&(typeof i!="function"||M)&&{index:c.index,range:c.range};return L(0).then(function(){if(0<C.length)throw new Ge("Error modifying one or more objects",C,P,F);return A.length})})})},Ce.prototype.delete=function(){var i=this._ctx,l=i.range;return!Br(i)||i.table.schema.yProps||!i.isPrimKey&&l.type!==3?this.modify(Wc):this._write(function(c){var d=i.table.core.schema.primaryKey,h=l;return i.table.core.count({trans:c,query:{index:d,range:h}}).then(function(m){return i.table.core.mutate({trans:c,type:"deleteRange",range:h}).then(function(R){var b=R.failures,R=R.numFailures;if(R)throw new Ge("Could not delete some values",Object.keys(b).map(function(E){return b[E]}),m-R);return m-R})})})},Ce);function Ce(){}var Wc=function(i,l){return l.value=null};function fm(i,l){return i<l?-1:i===l?0:1}function hm(i,l){return l<i?-1:i===l?0:1}function Mt(i,l,c){return i=i instanceof Hc?new i.Collection(i):i,i._ctx.error=new(c||TypeError)(l),i}function $r(i){return new i.Collection(i,function(){return Vc("")}).limit(0)}function Us(i,l,c,d){var h,m,S,b,R,E,T,_=c.length;if(!c.every(function(P){return typeof P=="string"}))return Mt(i,Ac);function z(P){h=P==="next"?function(M){return M.toUpperCase()}:function(M){return M.toLowerCase()},m=P==="next"?function(M){return M.toLowerCase()}:function(M){return M.toUpperCase()},S=P==="next"?fm:hm;var F=c.map(function(M){return{lower:m(M),upper:h(M)}}).sort(function(M,A){return S(M.lower,A.lower)});b=F.map(function(M){return M.upper}),R=F.map(function(M){return M.lower}),T=(E=P)==="next"?"":d}z("next"),i=new i.Collection(i,function(){return Bn(b[0],R[_-1]+d)}),i._ondirectionchange=function(P){z(P)};var C=0;return i._addAlgorithm(function(P,F,M){var A=P.key;if(typeof A!="string")return!1;var L=m(A);if(l(L,R,C))return!0;for(var U=null,K=C;K<_;++K){var V=function(Z,Q,X,ie,ne,oe){for(var ye=Math.min(Z.length,ie.length),ke=-1,he=0;he<ye;++he){var Ve=Q[he];if(Ve!==ie[he])return ne(Z[he],X[he])<0?Z.substr(0,he)+X[he]+X.substr(he+1):ne(Z[he],ie[he])<0?Z.substr(0,he)+ie[he]+X.substr(he+1):0<=ke?Z.substr(0,ke)+Q[ke]+X.substr(ke+1):null;ne(Z[he],Ve)<0&&(ke=he)}return ye<ie.length&&oe==="next"?Z+X.substr(Z.length):ye<Z.length&&oe==="prev"?Z.substr(0,X.length):ke<0?null:Z.substr(0,ke)+ie[ke]+X.substr(ke+1)}(A,L,b[K],R[K],S,E);V===null&&U===null?C=K+1:(U===null||0<S(U,V))&&(U=V)}return F(U!==null?function(){P.continue(U+T)}:M),!1}),i}function Bn(i,l,c,d){return{type:2,lower:i,upper:l,lowerOpen:c,upperOpen:d}}function Vc(i){return{type:1,lower:i,upper:i}}var Hc=(Object.defineProperty(st.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),st.prototype.between=function(i,l,c,d){c=c!==!1,d=d===!0;try{return 0<this._cmp(i,l)||this._cmp(i,l)===0&&(c||d)&&(!c||!d)?$r(this):new this.Collection(this,function(){return Bn(i,l,!c,!d)})}catch{return Mt(this,gn)}},st.prototype.equals=function(i){return i==null?Mt(this,gn):new this.Collection(this,function(){return Vc(i)})},st.prototype.above=function(i){return i==null?Mt(this,gn):new this.Collection(this,function(){return Bn(i,void 0,!0)})},st.prototype.aboveOrEqual=function(i){return i==null?Mt(this,gn):new this.Collection(this,function(){return Bn(i,void 0,!1)})},st.prototype.below=function(i){return i==null?Mt(this,gn):new this.Collection(this,function(){return Bn(void 0,i,!1,!0)})},st.prototype.belowOrEqual=function(i){return i==null?Mt(this,gn):new this.Collection(this,function(){return Bn(void 0,i)})},st.prototype.startsWith=function(i){return typeof i!="string"?Mt(this,Ac):this.between(i,i+pr,!0,!0)},st.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):Us(this,function(l,c){return l.indexOf(c[0])===0},[i],pr)},st.prototype.equalsIgnoreCase=function(i){return Us(this,function(l,c){return l===c[0]},[i],"")},st.prototype.anyOfIgnoreCase=function(){var i=re.apply(de,arguments);return i.length===0?$r(this):Us(this,function(l,c){return c.indexOf(l)!==-1},i,"")},st.prototype.startsWithAnyOfIgnoreCase=function(){var i=re.apply(de,arguments);return i.length===0?$r(this):Us(this,function(l,c){return c.some(function(d){return l.indexOf(d)===0})},i,pr)},st.prototype.anyOf=function(){var i=this,l=re.apply(de,arguments),c=this._cmp;try{l.sort(c)}catch{return Mt(this,gn)}if(l.length===0)return $r(this);var d=new this.Collection(this,function(){return Bn(l[0],l[l.length-1])});d._ondirectionchange=function(m){c=m==="next"?i._ascending:i._descending,l.sort(c)};var h=0;return d._addAlgorithm(function(m,S,b){for(var R=m.key;0<c(R,l[h]);)if(++h===l.length)return S(b),!1;return c(R,l[h])===0||(S(function(){m.continue(l[h])}),!1)}),d},st.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},st.prototype.noneOf=function(){var i=re.apply(de,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return Mt(this,gn)}var l=i.reduce(function(c,d){return c?c.concat([[c[c.length-1][1],d]]):[[-1/0,d]]},null);return l.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},st.prototype.inAnyRange=function(A,l){var c=this,d=this._cmp,h=this._ascending,m=this._descending,S=this._min,b=this._max;if(A.length===0)return $r(this);if(!A.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&h(L[0],L[1])<=0}))return Mt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var R=!l||l.includeLowers!==!1,E=l&&l.includeUppers===!0,T,_=h;function z(L,U){return _(L[0],U[0])}try{(T=A.reduce(function(L,U){for(var K=0,V=L.length;K<V;++K){var Z=L[K];if(d(U[0],Z[1])<0&&0<d(U[1],Z[0])){Z[0]=S(Z[0],U[0]),Z[1]=b(Z[1],U[1]);break}}return K===V&&L.push(U),L},[])).sort(z)}catch{return Mt(this,gn)}var C=0,P=E?function(L){return 0<h(L,T[C][1])}:function(L){return 0<=h(L,T[C][1])},F=R?function(L){return 0<m(L,T[C][0])}:function(L){return 0<=m(L,T[C][0])},M=P,A=new this.Collection(this,function(){return Bn(T[0][0],T[T.length-1][1],!R,!E)});return A._ondirectionchange=function(L){_=L==="next"?(M=P,h):(M=F,m),T.sort(z)},A._addAlgorithm(function(L,U,K){for(var V,Z=L.key;M(Z);)if(++C===T.length)return U(K),!1;return!P(V=Z)&&!F(V)||(c._cmp(Z,T[C][1])===0||c._cmp(Z,T[C][0])===0||U(function(){_===h?L.continue(T[C][0]):L.continue(T[C][1])}),!1)}),A},st.prototype.startsWithAnyOf=function(){var i=re.apply(de,arguments);return i.every(function(l){return typeof l=="string"})?i.length===0?$r(this):this.inAnyRange(i.map(function(l){return[l,l+pr]})):Mt(this,"startsWithAnyOf() only works with strings")},st);function st(){}function sn(i){return De(function(l){return Ei(l),i(l.target.error),!1})}function Ei(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var Ni="storagemutated",Fl="x-storagemutated-1",$n=_i(null,Ni),pm=(on.prototype._lock=function(){return I(!ce.global),++this._reculock,this._reculock!==1||ce.global||(ce.lockOwnerFor=this),this},on.prototype._unlock=function(){if(I(!ce.global),--this._reculock==0)for(ce.global||(ce.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{hr(i[1],i[0])}catch{}}return this},on.prototype._locked=function(){return this._reculock&&ce.lockOwnerFor!==this},on.prototype.create=function(i){var l=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;if(I(!this.idbtrans),!i&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(d);case"MissingAPIError":throw new ue.MissingAPI(d.message,d);default:throw new ue.OpenFailed(d)}if(!this.active)throw new ue.TransactionInactive;return I(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=De(function(h){Ei(h),l._reject(i.error)}),i.onabort=De(function(h){Ei(h),l.active&&l._reject(new ue.Abort(i.error)),l.active=!1,l.on("abort").fire(h)}),i.oncomplete=De(function(){l.active=!1,l._resolve(),"mutatedParts"in i&&$n.storagemutated.fire(i.mutatedParts)}),this},on.prototype._promise=function(i,l,c){var d=this;if(i==="readwrite"&&this.mode!=="readwrite")return Qe(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return Qe(new ue.TransactionInactive);if(this._locked())return new se(function(m,S){d._blockedFuncs.push([function(){d._promise(i,l,c).then(m,S)},ce])});if(c)return Dn(function(){var m=new se(function(S,b){d._lock();var R=l(S,b,d);R&&R.then&&R.then(S,b)});return m.finally(function(){return d._unlock()}),m._lib=!0,m});var h=new se(function(m,S){var b=l(m,S,d);b&&b.then&&b.then(m,S)});return h._lib=!0,h},on.prototype._root=function(){return this.parent?this.parent._root():this},on.prototype.waitFor=function(i){var l,c=this._root(),d=se.resolve(i);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return d}):(c._waitingFor=d,c._waitingQueue=[],l=c.idbtrans.objectStore(c.storeNames[0]),function m(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(l.get(-1/0).onsuccess=m)}());var h=c._waitingFor;return new se(function(m,S){d.then(function(b){return c._waitingQueue.push(De(m.bind(null,b)))},function(b){return c._waitingQueue.push(De(S.bind(null,b)))}).finally(function(){c._waitingFor===h&&(c._waitingFor=null)})})},on.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},on.prototype.table=function(i){var l=this._memoizedTables||(this._memoizedTables={});if(x(l,i))return l[i];var c=this.schema[i];if(!c)throw new ue.NotFound("Table "+i+" not part of transaction");return c=new this.db.Table(i,c,this),c.core=this.db.core.table(i),l[i]=c},on);function on(){}function zl(i,l,c,d,h,m,S,b){return{name:i,keyPath:l,unique:c,multi:d,auto:h,compound:m,src:(c&&!S?"&":"")+(d?"*":"")+(h?"++":"")+qc(l),type:b}}function qc(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function Al(i,l,c){return{name:i,primKey:l,indexes:c,mappedClass:null,idxByName:(d=function(h){return[h.name,h]},c.reduce(function(h,m,S){return S=d(m,S),S&&(h[S[0]]=S[1]),h},{}))};var d}var Pi=function(i){try{return i.only([[]]),Pi=function(){return[[]]},[[]]}catch{return Pi=function(){return pr},pr}};function Il(i){return i==null?function(){}:typeof i=="string"?(l=i).split(".").length===1?function(c){return c[l]}:function(c){return D(c,l)}:function(c){return D(c,i)};var l}function Qc(i){return[].slice.call(i)}var mm=0;function Ti(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function ym(i,l,R){function d(M){if(M.type===3)return null;if(M.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=M.lower,P=M.upper,F=M.lowerOpen,M=M.upperOpen;return C===void 0?P===void 0?null:l.upperBound(P,!!M):P===void 0?l.lowerBound(C,!!F):l.bound(C,P,!!F,!!M)}function h(z){var C,P=z.name;return{name:P,schema:z,mutate:function(F){var M=F.trans,A=F.type,L=F.keys,U=F.values,K=F.range;return new Promise(function(V,Z){V=De(V);var Q=M.objectStore(P),X=Q.keyPath==null,ie=A==="put"||A==="add";if(!ie&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var ne,oe=(L||U||{length:1}).length;if(L&&U&&L.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(oe===0)return V({numFailures:0,failures:{},results:[],lastResult:void 0});function ye(gt){++Ve,Ei(gt)}var ke=[],he=[],Ve=0;if(A==="deleteRange"){if(K.type===4)return V({numFailures:Ve,failures:he,results:[],lastResult:void 0});K.type===3?ke.push(ne=Q.clear()):ke.push(ne=Q.delete(d(K)))}else{var X=ie?X?[U,L]:[U,null]:[L,null],fe=X[0],ft=X[1];if(ie)for(var ht=0;ht<oe;++ht)ke.push(ne=ft&&ft[ht]!==void 0?Q[A](fe[ht],ft[ht]):Q[A](fe[ht])),ne.onerror=ye;else for(ht=0;ht<oe;++ht)ke.push(ne=Q[A](fe[ht])),ne.onerror=ye}function eo(gt){gt=gt.target.result,ke.forEach(function(gr,ea){return gr.error!=null&&(he[ea]=gr.error)}),V({numFailures:Ve,failures:he,results:A==="delete"?L:ke.map(function(gr){return gr.result}),lastResult:gt})}ne.onerror=function(gt){ye(gt),eo(gt)},ne.onsuccess=eo})},getMany:function(F){var M=F.trans,A=F.keys;return new Promise(function(L,U){L=De(L);for(var K,V=M.objectStore(P),Z=A.length,Q=new Array(Z),X=0,ie=0,ne=function(ke){ke=ke.target,Q[ke._pos]=ke.result,++ie===X&&L(Q)},oe=sn(U),ye=0;ye<Z;++ye)A[ye]!=null&&((K=V.get(A[ye]))._pos=ye,K.onsuccess=ne,K.onerror=oe,++X);X===0&&L(Q)})},get:function(F){var M=F.trans,A=F.key;return new Promise(function(L,U){L=De(L);var K=M.objectStore(P).get(A);K.onsuccess=function(V){return L(V.target.result)},K.onerror=sn(U)})},query:(C=E,function(F){return new Promise(function(M,A){M=De(M);var L,U,K,X=F.trans,V=F.values,Z=F.limit,ne=F.query,Q=Z===1/0?void 0:Z,ie=ne.index,ne=ne.range,X=X.objectStore(P),ie=ie.isPrimaryKey?X:X.index(ie.name),ne=d(ne);if(Z===0)return M({result:[]});C?((Q=V?ie.getAll(ne,Q):ie.getAllKeys(ne,Q)).onsuccess=function(oe){return M({result:oe.target.result})},Q.onerror=sn(A)):(L=0,U=!V&&"openKeyCursor"in ie?ie.openKeyCursor(ne):ie.openCursor(ne),K=[],U.onsuccess=function(oe){var ye=U.result;return ye?(K.push(V?ye.value:ye.primaryKey),++L===Z?M({result:K}):void ye.continue()):M({result:K})},U.onerror=sn(A))})}),openCursor:function(F){var M=F.trans,A=F.values,L=F.query,U=F.reverse,K=F.unique;return new Promise(function(V,Z){V=De(V);var ie=L.index,Q=L.range,X=M.objectStore(P),X=ie.isPrimaryKey?X:X.index(ie.name),ie=U?K?"prevunique":"prev":K?"nextunique":"next",ne=!A&&"openKeyCursor"in X?X.openKeyCursor(d(Q),ie):X.openCursor(d(Q),ie);ne.onerror=sn(Z),ne.onsuccess=De(function(oe){var ye,ke,he,Ve,fe=ne.result;fe?(fe.___id=++mm,fe.done=!1,ye=fe.continue.bind(fe),ke=(ke=fe.continuePrimaryKey)&&ke.bind(fe),he=fe.advance.bind(fe),Ve=function(){throw new Error("Cursor not stopped")},fe.trans=M,fe.stop=fe.continue=fe.continuePrimaryKey=fe.advance=function(){throw new Error("Cursor not started")},fe.fail=De(Z),fe.next=function(){var ft=this,ht=1;return this.start(function(){return ht--?ft.continue():ft.stop()}).then(function(){return ft})},fe.start=function(ft){function ht(){if(ne.result)try{ft()}catch(gt){fe.fail(gt)}else fe.done=!0,fe.start=function(){throw new Error("Cursor behind last entry")},fe.stop()}var eo=new Promise(function(gt,gr){gt=De(gt),ne.onerror=sn(gr),fe.fail=gr,fe.stop=function(ea){fe.stop=fe.continue=fe.continuePrimaryKey=fe.advance=Ve,gt(ea)}});return ne.onsuccess=De(function(gt){ne.onsuccess=ht,ht()}),fe.continue=ye,fe.continuePrimaryKey=ke,fe.advance=he,ht(),eo},V(fe)):V(null)},Z)})},count:function(F){var M=F.query,A=F.trans,L=M.index,U=M.range;return new Promise(function(K,V){var Z=A.objectStore(P),Q=L.isPrimaryKey?Z:Z.index(L.name),Z=d(U),Q=Z?Q.count(Z):Q.count();Q.onsuccess=De(function(X){return K(X.target.result)}),Q.onerror=sn(V)})}}}var m,S,b,T=(S=R,b=Qc((m=i).objectStoreNames),{schema:{name:m.name,tables:b.map(function(z){return S.objectStore(z)}).map(function(z){var C=z.keyPath,M=z.autoIncrement,P=f(C),F={},M={name:z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C==null,compound:P,keyPath:C,autoIncrement:M,unique:!0,extractKey:Il(C)},indexes:Qc(z.indexNames).map(function(A){return z.index(A)}).map(function(K){var L=K.name,U=K.unique,V=K.multiEntry,K=K.keyPath,V={name:L,compound:f(K),keyPath:K,unique:U,multiEntry:V,extractKey:Il(K)};return F[Ti(K)]=V}),getIndexByKeyPath:function(A){return F[Ti(A)]}};return F[":id"]=M.primaryKey,C!=null&&(F[Ti(C)]=M.primaryKey),M})},hasGetAll:0<b.length&&"getAll"in S.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),R=T.schema,E=T.hasGetAll,T=R.tables.map(h),_={};return T.forEach(function(z){return _[z.name]=z}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(z){if(!_[z])throw new Error("Table '".concat(z,"' not found"));return _[z]},MIN_KEY:-1/0,MAX_KEY:Pi(l),schema:R}}function vm(i,l,c,d){var h=c.IDBKeyRange;return c.indexedDB,{dbcore:(d=ym(l,h,d),i.dbcore.reduce(function(m,S){return S=S.create,r(r({},m),S(m))},d))}}function Ks(i,d){var c=d.db,d=vm(i._middlewares,c,i._deps,d);i.core=d.dbcore,i.tables.forEach(function(h){var m=h.name;i.core.schema.tables.some(function(S){return S.name===m})&&(h.core=i.core.table(m),i[m]instanceof i.Table&&(i[m].core=h.core))})}function Ws(i,l,c,d){c.forEach(function(h){var m=d[h];l.forEach(function(S){var b=function R(E,T){return H(E,T)||(E=y(E))&&R(E,T)}(S,h);(!b||"value"in b&&b.value===void 0)&&(S===i.Transaction.prototype||S instanceof i.Transaction?B(S,h,{get:function(){return this.table(h)},set:function(R){O(this,h,{value:R,writable:!0,configurable:!0,enumerable:!0})}}):S[h]=new i.Table(h,m))})})}function Dl(i,l){l.forEach(function(c){for(var d in c)c[d]instanceof i.Table&&delete c[d]})}function gm(i,l){return i._cfg.version-l._cfg.version}function xm(i,l,c,d){var h=i._dbSchema;c.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Al("$meta",Xc("")[0],[]),i._storeNames.push("$meta"));var m=i._createTransaction("readwrite",i._storeNames,h);m.create(c),m._completion.catch(d);var S=m._reject.bind(m),b=ce.transless||ce;Dn(function(){return ce.trans=m,ce.transless=b,l!==0?(Ks(i,c),E=l,((R=m).storeNames.includes("$meta")?R.table("$meta").get("version").then(function(T){return T??E}):se.resolve(E)).then(function(T){return z=T,C=m,P=c,F=[],T=(_=i)._versions,M=_._dbSchema=Hs(0,_.idbdb,P),(T=T.filter(function(A){return A._cfg.version>=z})).length!==0?(T.forEach(function(A){F.push(function(){var L=M,U=A._cfg.dbschema;qs(_,L,P),qs(_,U,P),M=_._dbSchema=U;var K=Ol(L,U);K.add.forEach(function(ie){Ll(P,ie[0],ie[1].primKey,ie[1].indexes)}),K.change.forEach(function(ie){if(ie.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var ne=P.objectStore(ie.name);ie.add.forEach(function(oe){return Vs(ne,oe)}),ie.change.forEach(function(oe){ne.deleteIndex(oe.name),Vs(ne,oe)}),ie.del.forEach(function(oe){return ne.deleteIndex(oe)})});var V=A._cfg.contentUpgrade;if(V&&A._cfg.version>z){Ks(_,P),C._memoizedTables={};var Z=Y(U);K.del.forEach(function(ie){Z[ie]=L[ie]}),Dl(_,[_.Transaction.prototype]),Ws(_,[_.Transaction.prototype],u(Z),Z),C.schema=Z;var Q,X=Re(V);return X&&Or(),K=se.follow(function(){var ie;(Q=V(C))&&X&&(ie=On.bind(null,null),Q.then(ie,ie))}),Q&&typeof Q.then=="function"?se.resolve(Q):K.then(function(){return Q})}}),F.push(function(L){var U,K,V=A._cfg.dbschema;U=V,K=L,[].slice.call(K.db.objectStoreNames).forEach(function(Z){return U[Z]==null&&K.db.deleteObjectStore(Z)}),Dl(_,[_.Transaction.prototype]),Ws(_,[_.Transaction.prototype],_._storeNames,_._dbSchema),C.schema=_._dbSchema}),F.push(function(L){_.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(_.idbdb.version/10)===A._cfg.version?(_.idbdb.deleteObjectStore("$meta"),delete _._dbSchema.$meta,_._storeNames=_._storeNames.filter(function(U){return U!=="$meta"})):L.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return F.length?se.resolve(F.shift()(C.idbtrans)).then(A):se.resolve()}().then(function(){Yc(M,P)})):se.resolve();var _,z,C,P,F,M}).catch(S)):(u(h).forEach(function(T){Ll(c,T,h[T].primKey,h[T].indexes)}),Ks(i,c),void se.follow(function(){return i.on.populate.fire(m)}).catch(S));var R,E})}function wm(i,l){Yc(i._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var c=Hs(0,i.idbdb,l);qs(i,i._dbSchema,l);for(var d=0,h=Ol(c,i._dbSchema).change;d<h.length;d++){var m=function(S){if(S.change.length||S.recreate)return console.warn("Unable to patch indexes of table ".concat(S.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=l.objectStore(S.name);S.add.forEach(function(R){et&&console.debug("Dexie upgrade patch: Creating missing index ".concat(S.name,".").concat(R.src)),Vs(b,R)})}(h[d]);if(typeof m=="object")return m.value}}function Ol(i,l){var c,d={del:[],add:[],change:[]};for(c in i)l[c]||d.del.push(c);for(c in l){var h=i[c],m=l[c];if(h){var S={name:c,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)S.recreate=!0,d.change.push(S);else{var b=h.idxByName,R=m.idxByName,E=void 0;for(E in b)R[E]||S.del.push(E);for(E in R){var T=b[E],_=R[E];T?T.src!==_.src&&S.change.push(_):S.add.push(_)}(0<S.del.length||0<S.add.length||0<S.change.length)&&d.change.push(S)}}else d.add.push([c,m])}return d}function Ll(i,l,c,d){var h=i.db.createObjectStore(l,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return d.forEach(function(m){return Vs(h,m)}),h}function Yc(i,l){u(i).forEach(function(c){l.db.objectStoreNames.contains(c)||(et&&console.debug("Dexie: Creating missing table",c),Ll(l,c,i[c].primKey,i[c].indexes))})}function Vs(i,l){i.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function Hs(i,l,c){var d={};return w(l.objectStoreNames,0).forEach(function(h){for(var m=c.objectStore(h),S=zl(qc(E=m.keyPath),E||"",!0,!1,!!m.autoIncrement,E&&typeof E!="string",!0),b=[],R=0;R<m.indexNames.length;++R){var T=m.index(m.indexNames[R]),E=T.keyPath,T=zl(T.name,E,!!T.unique,!!T.multiEntry,!1,E&&typeof E!="string",!1);b.push(T)}d[h]=Al(h,S,b)}),d}function qs(i,l,c){for(var d=c.db.objectStoreNames,h=0;h<d.length;++h){var m=d[h],S=c.objectStore(m);i._hasGetAll="getAll"in S;for(var b=0;b<S.indexNames.length;++b){var R=S.indexNames[b],E=S.index(R).keyPath,T=typeof E=="string"?E:"["+w(E).join("+")+"]";!l[m]||(E=l[m].idxByName[T])&&(E.name=R,delete l[m].idxByName[T],l[m].idxByName[R]=E)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function Xc(i){return i.split(",").map(function(l,c){var m=l.split(":"),d=(h=m[1])===null||h===void 0?void 0:h.trim(),h=(l=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return zl(h,m||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),f(m),c===0,d)})}var Sm=(Ur.prototype._createTableSchema=Al,Ur.prototype._parseIndexSyntax=Xc,Ur.prototype._parseStoresSpec=function(i,l){var c=this;u(i).forEach(function(d){if(i[d]!==null){var h=c._parseIndexSyntax(i[d]),m=h.shift();if(!m)throw new ue.Schema("Invalid schema for table "+d+": "+i[d]);if(m.unique=!0,m.multi)throw new ue.Schema("Primary key cannot be multiEntry*");h.forEach(function(S){if(S.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!S.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")}),h=c._createTableSchema(d,m,h),l[d]=h}})},Ur.prototype.stores=function(c){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,c):c;var c=l._versions,d={},h={};return c.forEach(function(m){p(d,m._cfg.storesSource),h=m._cfg.dbschema={},m._parseStoresSpec(d,h)}),l._dbSchema=h,Dl(l,[l._allTables,l,l.Transaction.prototype]),Ws(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],u(h),h),l._storeNames=u(h),this},Ur.prototype.upgrade=function(i){return this._cfg.contentUpgrade=Bt(this._cfg.contentUpgrade||xe,i),this},Ur);function Ur(){}function Bl(i,l){var c=i._dbNamesDB;return c||(c=i._dbNamesDB=new xn(Ds,{addons:[],indexedDB:i,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function $l(i){return i&&typeof i.databases=="function"}function Ul(i){return Dn(function(){return ce.letThrough=!0,i()})}function Kl(i){return!("from"in i)}var dt=function(i,l){if(!this){var c=new dt;return i&&"d"in i&&p(c,i),c}p(this,arguments.length?{d:1,from:i,to:1<arguments.length?l:i}:{d:0})};function Mi(i,l,c){var d=Se(l,c);if(!isNaN(d)){if(0<d)throw RangeError();if(Kl(i))return p(i,{from:l,to:c,d:1});var h=i.l,d=i.r;if(Se(c,i.from)<0)return h?Mi(h,l,c):i.l={from:l,to:c,d:1,l:null,r:null},Jc(i);if(0<Se(l,i.to))return d?Mi(d,l,c):i.r={from:l,to:c,d:1,l:null,r:null},Jc(i);Se(l,i.from)<0&&(i.from=l,i.l=null,i.d=d?d.d+1:1),0<Se(c,i.to)&&(i.to=c,i.r=null,i.d=i.l?i.l.d+1:1),c=!i.r,h&&!i.l&&Fi(i,h),d&&c&&Fi(i,d)}}function Fi(i,l){Kl(l)||function c(d,R){var m=R.from,S=R.to,b=R.l,R=R.r;Mi(d,m,S),b&&c(d,b),R&&c(d,R)}(i,l)}function Gc(i,l){var c=Qs(l),d=c.next();if(d.done)return!1;for(var h=d.value,m=Qs(i),S=m.next(h.from),b=S.value;!d.done&&!S.done;){if(Se(b.from,h.to)<=0&&0<=Se(b.to,h.from))return!0;Se(h.from,b.from)<0?h=(d=c.next(b.from)).value:b=(S=m.next(h.from)).value}return!1}function Qs(i){var l=Kl(i)?null:{s:0,n:i};return{next:function(c){for(var d=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,d)for(;l.n.l&&Se(c,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!d||Se(c,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Jc(i){var l,c,d=(((l=i.r)===null||l===void 0?void 0:l.d)||0)-(((c=i.l)===null||c===void 0?void 0:c.d)||0),h=1<d?"r":d<-1?"l":"";h&&(l=h=="r"?"l":"r",c=r({},i),d=i[h],i.from=d.from,i.to=d.to,i[h]=d[h],c[h]=d[l],(i[l]=c).d=Zc(c)),i.d=Zc(i)}function Zc(c){var l=c.r,c=c.l;return(l?c?Math.max(l.d,c.d):l.d:c?c.d:0)+1}function Ys(i,l){return u(l).forEach(function(c){i[c]?Fi(i[c],l[c]):i[c]=function d(h){var m,S,b={};for(m in h)x(h,m)&&(S=h[m],b[m]=!S||typeof S!="object"||pe.has(S.constructor)?S:d(S));return b}(l[c])}),i}function Wl(i,l){return i.all||l.all||Object.keys(i).some(function(c){return l[c]&&Gc(l[c],i[c])})}v(dt.prototype,(($t={add:function(i){return Fi(this,i),this},addKey:function(i){return Mi(this,i,i),this},addKeys:function(i){var l=this;return i.forEach(function(c){return Mi(l,c,c)}),this},hasKey:function(i){var l=Qs(this).next(i).value;return l&&Se(l.from,i)<=0&&0<=Se(l.to,i)}})[Lt]=function(){return Qs(this)},$t));var yr={},Vl={},Hl=!1;function Xs(i){Ys(Vl,i),Hl||(Hl=!0,setTimeout(function(){Hl=!1,ql(Vl,!(Vl={}))},0))}function ql(i,l){l===void 0&&(l=!1);var c=new Set;if(i.all)for(var d=0,h=Object.values(yr);d<h.length;d++)ed(S=h[d],i,c,l);else for(var m in i){var S,b=/^idb\:\/\/(.*)\/(.*)\//.exec(m);b&&(m=b[1],b=b[2],(S=yr["idb://".concat(m,"/").concat(b)])&&ed(S,i,c,l))}c.forEach(function(R){return R()})}function ed(i,l,c,d){for(var h=[],m=0,S=Object.entries(i.queries.query);m<S.length;m++){for(var b=S[m],R=b[0],E=[],T=0,_=b[1];T<_.length;T++){var z=_[T];Wl(l,z.obsSet)?z.subscribers.forEach(function(M){return c.add(M)}):d&&E.push(z)}d&&h.push([R,E])}if(d)for(var C=0,P=h;C<P.length;C++){var F=P[C],R=F[0],E=F[1];i.queries.query[R]=E}}function jm(i){var l=i._state,c=i._deps.indexedDB;if(l.isBeingOpened||i.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?Qe(l.dbOpenError):i});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var d=l.openCanceller,h=Math.round(10*i.verno),m=!1;function S(){if(l.openCanceller!==d)throw new ue.DatabaseClosed("db.open() was cancelled")}function b(){return new se(function(z,C){if(S(),!c)throw new ue.MissingAPI;var P=i.name,F=l.autoSchema||!h?c.open(P):c.open(P,h);if(!F)throw new ue.MissingAPI;F.onerror=sn(C),F.onblocked=De(i._fireOnBlocked),F.onupgradeneeded=De(function(M){var A;T=F.transaction,l.autoSchema&&!i._options.allowEmptyDB?(F.onerror=Ei,T.abort(),F.result.close(),(A=c.deleteDatabase(P)).onsuccess=A.onerror=De(function(){C(new ue.NoSuchDatabase("Database ".concat(P," doesnt exist")))})):(T.onerror=sn(C),M=M.oldVersion>Math.pow(2,62)?0:M.oldVersion,_=M<1,i.idbdb=F.result,m&&wm(i,T),xm(i,M/10,T,C))},C),F.onsuccess=De(function(){T=null;var M,A,L,U,K,V=i.idbdb=F.result,Z=w(V.objectStoreNames);if(0<Z.length)try{var Q=V.transaction((U=Z).length===1?U[0]:U,"readonly");if(l.autoSchema)A=V,L=Q,(M=i).verno=A.version/10,L=M._dbSchema=Hs(0,A,L),M._storeNames=w(A.objectStoreNames,0),Ws(M,[M._allTables],u(L),L);else if(qs(i,i._dbSchema,Q),((K=Ol(Hs(0,(K=i).idbdb,Q),K._dbSchema)).add.length||K.change.some(function(X){return X.add.length||X.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),V.close(),h=V.version+1,m=!0,z(b());Ks(i,Q)}catch{}Lr.push(i),V.onversionchange=De(function(X){l.vcFired=!0,i.on("versionchange").fire(X)}),V.onclose=De(function(X){i.on("close").fire(X)}),_&&(K=i._deps,Q=P,V=K.indexedDB,K=K.IDBKeyRange,$l(V)||Q===Ds||Bl(V,K).put({name:Q}).catch(xe)),z()},C)}).catch(function(z){switch(z==null?void 0:z.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<h)return h=0,b()}return se.reject(z)})}var R,E=l.dbReadyResolve,T=null,_=!1;return se.race([d,(typeof navigator>"u"?se.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(z){function C(){return indexedDB.databases().finally(z)}R=setInterval(C,100),C()}).finally(function(){return clearInterval(R)}):Promise.resolve()).then(b)]).then(function(){return S(),l.onReadyBeingFired=[],se.resolve(Ul(function(){return i.on.ready.fire(i.vip)})).then(function z(){if(0<l.onReadyBeingFired.length){var C=l.onReadyBeingFired.reduce(Bt,xe);return l.onReadyBeingFired=[],se.resolve(Ul(function(){return C(i.vip)})).then(z)}})}).finally(function(){l.openCanceller===d&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(z){l.dbOpenError=z;try{T&&T.abort()}catch{}return d===l.openCanceller&&i._close(),Qe(z)}).finally(function(){l.openComplete=!0,E()}).then(function(){var z;return _&&(z={},i.tables.forEach(function(C){C.schema.indexes.forEach(function(P){P.name&&(z["idb://".concat(i.name,"/").concat(C.name,"/").concat(P.name)]=new dt(-1/0,[[[]]]))}),z["idb://".concat(i.name,"/").concat(C.name,"/")]=z["idb://".concat(i.name,"/").concat(C.name,"/:dels")]=new dt(-1/0,[[[]]])}),$n(Ni).fire(z),ql(z,!0)),i})}function Ql(i){function l(m){return i.next(m)}var c=h(l),d=h(function(m){return i.throw(m)});function h(m){return function(R){var b=m(R),R=b.value;return b.done?R:R&&typeof R.then=="function"?R.then(c,d):f(R)?Promise.all(R).then(c,d):c(R)}}return h(l)()}function Gs(i,l,c){for(var d=f(i)?i.slice():[i],h=0;h<c;++h)d.push(l);return d}var km={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(l){var c=i.table(l),d=c.schema,h={},m=[];function S(_,z,C){var P=Ti(_),F=h[P]=h[P]||[],M=_==null?0:typeof _=="string"?1:_.length,A=0<z,A=r(r({},C),{name:A?"".concat(P,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:A,keyTail:z,keyLength:M,extractKey:Il(_),unique:!A&&C.unique});return F.push(A),A.isPrimaryKey||m.push(A),1<M&&S(M===2?_[0]:_.slice(0,M-1),z+1,C),F.sort(function(L,U){return L.keyTail-U.keyTail}),A}l=S(d.primaryKey.keyPath,0,d.primaryKey),h[":id"]=[l];for(var b=0,R=d.indexes;b<R.length;b++){var E=R[b];S(E.keyPath,0,E)}function T(_){var z,C=_.query.index;return C.isVirtual?r(r({},_),{query:{index:C.lowLevelIndex,range:(z=_.query.range,C=C.keyTail,{type:z.type===1?2:z.type,lower:Gs(z.lower,z.lowerOpen?i.MAX_KEY:i.MIN_KEY,C),lowerOpen:!0,upper:Gs(z.upper,z.upperOpen?i.MIN_KEY:i.MAX_KEY,C),upperOpen:!0})}}):_}return r(r({},c),{schema:r(r({},d),{primaryKey:l,indexes:m,getIndexByKeyPath:function(_){return(_=h[Ti(_)])&&_[0]}}),count:function(_){return c.count(T(_))},query:function(_){return c.query(T(_))},openCursor:function(_){var z=_.query.index,C=z.keyTail,P=z.isVirtual,F=z.keyLength;return P?c.openCursor(T(_)).then(function(A){return A&&M(A)}):c.openCursor(_);function M(A){return Object.create(A,{continue:{value:function(L){L!=null?A.continue(Gs(L,_.reverse?i.MAX_KEY:i.MIN_KEY,C)):_.unique?A.continue(A.key.slice(0,F).concat(_.reverse?i.MIN_KEY:i.MAX_KEY,C)):A.continue()}},continuePrimaryKey:{value:function(L,U){A.continuePrimaryKey(Gs(L,i.MAX_KEY,C),U)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var L=A.key;return F===1?L[0]:L.slice(0,F)}},value:{get:function(){return A.value}}})}}})}})}};function Yl(i,l,c,d){return c=c||{},d=d||"",u(i).forEach(function(h){var m,S,b;x(l,h)?(m=i[h],S=l[h],typeof m=="object"&&typeof S=="object"&&m&&S?(b=Ze(m))!==Ze(S)?c[d+h]=l[h]:b==="Object"?Yl(m,S,c,d+h+"."):m!==S&&(c[d+h]=l[h]):m!==S&&(c[d+h]=l[h])):c[d+h]=void 0}),u(l).forEach(function(h){x(i,h)||(c[d+h]=l[h])}),c}function Xl(i,l){return l.type==="delete"?l.keys:l.keys||l.values.map(i.extractKey)}var bm={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(l){var c=i.table(l),d=c.schema.primaryKey;return r(r({},c),{mutate:function(h){var m=ce.trans,S=m.table(l).hook,b=S.deleting,R=S.creating,E=S.updating;switch(h.type){case"add":if(R.fire===xe)break;return m._promise("readwrite",function(){return T(h)},!0);case"put":if(R.fire===xe&&E.fire===xe)break;return m._promise("readwrite",function(){return T(h)},!0);case"delete":if(b.fire===xe)break;return m._promise("readwrite",function(){return T(h)},!0);case"deleteRange":if(b.fire===xe)break;return m._promise("readwrite",function(){return function _(z,C,P){return c.query({trans:z,values:!1,query:{index:d,range:C},limit:P}).then(function(F){var M=F.result;return T({type:"delete",keys:M,trans:z}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):M.length<P?{failures:[],numFailures:0,lastResult:void 0}:_(z,r(r({},C),{lower:M[M.length-1],lowerOpen:!0}),P)})})}(h.trans,h.range,1e4)},!0)}return c.mutate(h);function T(_){var z,C,P,F=ce.trans,M=_.keys||Xl(d,_);if(!M)throw new Error("Keys missing");return(_=_.type==="add"||_.type==="put"?r(r({},_),{keys:M}):r({},_)).type!=="delete"&&(_.values=s([],_.values)),_.keys&&(_.keys=s([],_.keys)),z=c,P=M,((C=_).type==="add"?Promise.resolve([]):z.getMany({trans:C.trans,keys:P,cache:"immutable"})).then(function(A){var L=M.map(function(U,K){var V,Z,Q,X=A[K],ie={onerror:null,onsuccess:null};return _.type==="delete"?b.fire.call(ie,U,X,F):_.type==="add"||X===void 0?(V=R.fire.call(ie,U,_.values[K],F),U==null&&V!=null&&(_.keys[K]=U=V,d.outbound||W(_.values[K],d.keyPath,U))):(V=Yl(X,_.values[K]),(Z=E.fire.call(ie,V,U,X,F))&&(Q=_.values[K],Object.keys(Z).forEach(function(ne){x(Q,ne)?Q[ne]=Z[ne]:W(Q,ne,Z[ne])}))),ie});return c.mutate(_).then(function(U){for(var K=U.failures,V=U.results,Z=U.numFailures,U=U.lastResult,Q=0;Q<M.length;++Q){var X=(V||M)[Q],ie=L[Q];X==null?ie.onerror&&ie.onerror(K[Q]):ie.onsuccess&&ie.onsuccess(_.type==="put"&&A[Q]?_.values[Q]:X)}return{failures:K,results:V,numFailures:Z,lastResult:U}}).catch(function(U){return L.forEach(function(K){return K.onerror&&K.onerror(U)}),Promise.reject(U)})})}}})}})}};function td(i,l,c){try{if(!l||l.keys.length<i.length)return null;for(var d=[],h=0,m=0;h<l.keys.length&&m<i.length;++h)Se(l.keys[h],i[m])===0&&(d.push(c?_e(l.values[h]):l.values[h]),++m);return d.length===i.length?d:null}catch{return null}}var _m={stack:"dbcore",level:-1,create:function(i){return{table:function(l){var c=i.table(l);return r(r({},c),{getMany:function(d){if(!d.cache)return c.getMany(d);var h=td(d.keys,d.trans._cache,d.cache==="clone");return h?se.resolve(h):c.getMany(d).then(function(m){return d.trans._cache={keys:d.keys,values:d.cache==="clone"?_e(m):m},m})},mutate:function(d){return d.type!=="add"&&(d.trans._cache=null),c.mutate(d)}})}}}};function nd(i,l){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function rd(i,l){switch(i){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Rm={stack:"dbcore",level:0,name:"Observability",create:function(i){var l=i.schema.name,c=new dt(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(d,h,m){if(ce.subscr&&h!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ce.querier));return i.transaction(d,h,m)},table:function(d){var h=i.table(d),m=h.schema,S=m.primaryKey,_=m.indexes,b=S.extractKey,R=S.outbound,E=S.autoIncrement&&_.filter(function(C){return C.compound&&C.keyPath.includes(S.keyPath)}),T=r(r({},h),{mutate:function(C){function P(ne){return ne="idb://".concat(l,"/").concat(d,"/").concat(ne),U[ne]||(U[ne]=new dt)}var F,M,A,L=C.trans,U=C.mutatedParts||(C.mutatedParts={}),K=P(""),V=P(":dels"),Z=C.type,ie=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[Xl(S,C).filter(function(ne){return ne}),C.values]:[],Q=ie[0],X=ie[1],ie=C.trans._cache;return f(Q)?(K.addKeys(Q),(ie=Z==="delete"||Q.length===X.length?td(Q,ie):null)||V.addKeys(Q),(ie||X)&&(F=P,M=ie,A=X,m.indexes.forEach(function(ne){var oe=F(ne.name||"");function ye(he){return he!=null?ne.extractKey(he):null}function ke(he){return ne.multiEntry&&f(he)?he.forEach(function(Ve){return oe.addKey(Ve)}):oe.addKey(he)}(M||A).forEach(function(he,ft){var fe=M&&ye(M[ft]),ft=A&&ye(A[ft]);Se(fe,ft)!==0&&(fe!=null&&ke(fe),ft!=null&&ke(ft))})}))):Q?(X={from:(X=Q.lower)!==null&&X!==void 0?X:i.MIN_KEY,to:(X=Q.upper)!==null&&X!==void 0?X:i.MAX_KEY},V.add(X),K.add(X)):(K.add(c),V.add(c),m.indexes.forEach(function(ne){return P(ne.name).add(c)})),h.mutate(C).then(function(ne){return!Q||C.type!=="add"&&C.type!=="put"||(K.addKeys(ne.results),E&&E.forEach(function(oe){for(var ye=C.values.map(function(fe){return oe.extractKey(fe)}),ke=oe.keyPath.findIndex(function(fe){return fe===S.keyPath}),he=0,Ve=ne.results.length;he<Ve;++he)ye[he][ke]=ne.results[he];P(oe.name).addKeys(ye)})),L.mutatedParts=Ys(L.mutatedParts||{},U),ne})}}),_=function(P){var F=P.query,P=F.index,F=F.range;return[P,new dt((P=F.lower)!==null&&P!==void 0?P:i.MIN_KEY,(F=F.upper)!==null&&F!==void 0?F:i.MAX_KEY)]},z={get:function(C){return[S,new dt(C.key)]},getMany:function(C){return[S,new dt().addKeys(C.keys)]},count:_,query:_,openCursor:_};return u(z).forEach(function(C){T[C]=function(P){var F=ce.subscr,M=!!F,A=nd(ce,h)&&rd(C,P)?P.obsSet={}:F;if(M){var L=function(X){return X="idb://".concat(l,"/").concat(d,"/").concat(X),A[X]||(A[X]=new dt)},U=L(""),K=L(":dels"),F=z[C](P),M=F[0],F=F[1];if((C==="query"&&M.isPrimaryKey&&!P.values?K:L(M.name||"")).add(F),!M.isPrimaryKey){if(C!=="count"){var V=C==="query"&&R&&P.values&&h.query(r(r({},P),{values:!1}));return h[C].apply(this,arguments).then(function(X){if(C==="query"){if(R&&P.values)return V.then(function(ye){return ye=ye.result,U.addKeys(ye),X});var ie=P.values?X.result.map(b):X.result;(P.values?U:K).addKeys(ie)}else if(C==="openCursor"){var ne=X,oe=P.values;return ne&&Object.create(ne,{key:{get:function(){return K.addKey(ne.primaryKey),ne.key}},primaryKey:{get:function(){var ye=ne.primaryKey;return K.addKey(ye),ye}},value:{get:function(){return oe&&U.addKey(ne.primaryKey),ne.value}}})}return X})}K.add(c)}}return h[C].apply(this,arguments)}}),T}})}};function id(i,l,c){if(c.numFailures===0)return l;if(l.type==="deleteRange")return null;var d=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1;return c.numFailures===d?null:(l=r({},l),f(l.keys)&&(l.keys=l.keys.filter(function(h,m){return!(m in c.failures)})),"values"in l&&f(l.values)&&(l.values=l.values.filter(function(h,m){return!(m in c.failures)})),l)}function Gl(i,l){return c=i,((d=l).lower===void 0||(d.lowerOpen?0<Se(c,d.lower):0<=Se(c,d.lower)))&&(i=i,(l=l).upper===void 0||(l.upperOpen?Se(i,l.upper)<0:Se(i,l.upper)<=0));var c,d}function sd(i,l,z,d,h,m){if(!z||z.length===0)return i;var S=l.query.index,b=S.multiEntry,R=l.query.range,E=d.schema.primaryKey.extractKey,T=S.extractKey,_=(S.lowLevelIndex||S).extractKey,z=z.reduce(function(C,P){var F=C,M=[];if(P.type==="add"||P.type==="put")for(var A=new dt,L=P.values.length-1;0<=L;--L){var U,K=P.values[L],V=E(K);A.hasKey(V)||(U=T(K),(b&&f(U)?U.some(function(ne){return Gl(ne,R)}):Gl(U,R))&&(A.addKey(V),M.push(K)))}switch(P.type){case"add":var Z=new dt().addKeys(l.values?C.map(function(oe){return E(oe)}):C),F=C.concat(l.values?M.filter(function(oe){return oe=E(oe),!Z.hasKey(oe)&&(Z.addKey(oe),!0)}):M.map(function(oe){return E(oe)}).filter(function(oe){return!Z.hasKey(oe)&&(Z.addKey(oe),!0)}));break;case"put":var Q=new dt().addKeys(P.values.map(function(oe){return E(oe)}));F=C.filter(function(oe){return!Q.hasKey(l.values?E(oe):oe)}).concat(l.values?M:M.map(function(oe){return E(oe)}));break;case"delete":var X=new dt().addKeys(P.keys);F=C.filter(function(oe){return!X.hasKey(l.values?E(oe):oe)});break;case"deleteRange":var ie=P.range;F=C.filter(function(oe){return!Gl(E(oe),ie)})}return F},i);return z===i?i:(z.sort(function(C,P){return Se(_(C),_(P))||Se(E(C),E(P))}),l.limit&&l.limit<1/0&&(z.length>l.limit?z.length=l.limit:i.length===l.limit&&z.length<l.limit&&(h.dirty=!0)),m?Object.freeze(z):z)}function od(i,l){return Se(i.lower,l.lower)===0&&Se(i.upper,l.upper)===0&&!!i.lowerOpen==!!l.lowerOpen&&!!i.upperOpen==!!l.upperOpen}function Cm(i,l){return function(c,d,h,m){if(c===void 0)return d!==void 0?-1:0;if(d===void 0)return 1;if((d=Se(c,d))===0){if(h&&m)return 0;if(h)return 1;if(m)return-1}return d}(i.lower,l.lower,i.lowerOpen,l.lowerOpen)<=0&&0<=function(c,d,h,m){if(c===void 0)return d!==void 0?1:0;if(d===void 0)return-1;if((d=Se(c,d))===0){if(h&&m)return 0;if(h)return-1;if(m)return 1}return d}(i.upper,l.upper,i.upperOpen,l.upperOpen)}function Em(i,l,c,d){i.subscribers.add(c),d.addEventListener("abort",function(){var h,m;i.subscribers.delete(c),i.subscribers.size===0&&(h=i,m=l,setTimeout(function(){h.subscribers.size===0&&te(m,h)},3e3))})}var Nm={stack:"dbcore",level:0,name:"Cache",create:function(i){var l=i.schema.name;return r(r({},i),{transaction:function(c,d,h){var m,S,b=i.transaction(c,d,h);return d==="readwrite"&&(S=(m=new AbortController).signal,h=function(R){return function(){if(m.abort(),d==="readwrite"){for(var E=new Set,T=0,_=c;T<_.length;T++){var z=_[T],C=yr["idb://".concat(l,"/").concat(z)];if(C){var P=i.table(z),F=C.optimisticOps.filter(function(oe){return oe.trans===b});if(b._explicit&&R&&b.mutatedParts)for(var M=0,A=Object.values(C.queries.query);M<A.length;M++)for(var L=0,U=(Z=A[M]).slice();L<U.length;L++)Wl((Q=U[L]).obsSet,b.mutatedParts)&&(te(Z,Q),Q.subscribers.forEach(function(oe){return E.add(oe)}));else if(0<F.length){C.optimisticOps=C.optimisticOps.filter(function(oe){return oe.trans!==b});for(var K=0,V=Object.values(C.queries.query);K<V.length;K++)for(var Z,Q,X,ie=0,ne=(Z=V[K]).slice();ie<ne.length;ie++)(Q=ne[ie]).res!=null&&b.mutatedParts&&(R&&!Q.dirty?(X=Object.isFrozen(Q.res),X=sd(Q.res,Q.req,F,P,Q,X),Q.dirty?(te(Z,Q),Q.subscribers.forEach(function(oe){return E.add(oe)})):X!==Q.res&&(Q.res=X,Q.promise=se.resolve({result:X}))):(Q.dirty&&te(Z,Q),Q.subscribers.forEach(function(oe){return E.add(oe)})))}}}E.forEach(function(oe){return oe()})}}},b.addEventListener("abort",h(!1),{signal:S}),b.addEventListener("error",h(!1),{signal:S}),b.addEventListener("complete",h(!0),{signal:S})),b},table:function(c){var d=i.table(c),h=d.schema.primaryKey;return r(r({},d),{mutate:function(m){var S=ce.trans;if(h.outbound||S.db._options.cache==="disabled"||S.explicit||S.idbtrans.mode!=="readwrite")return d.mutate(m);var b=yr["idb://".concat(l,"/").concat(c)];return b?(S=d.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Xl(h,m).some(function(R){return R==null}))?(b.optimisticOps.push(m),m.mutatedParts&&Xs(m.mutatedParts),S.then(function(R){0<R.numFailures&&(te(b.optimisticOps,m),(R=id(0,m,R))&&b.optimisticOps.push(R),m.mutatedParts&&Xs(m.mutatedParts))}),S.catch(function(){te(b.optimisticOps,m),m.mutatedParts&&Xs(m.mutatedParts)})):S.then(function(R){var E=id(0,r(r({},m),{values:m.values.map(function(T,_){var z;return R.failures[_]?T:(T=(z=h.keyPath)!==null&&z!==void 0&&z.includes(".")?_e(T):r({},T),W(T,h.keyPath,R.results[_]),T)})}),R);b.optimisticOps.push(E),queueMicrotask(function(){return m.mutatedParts&&Xs(m.mutatedParts)})}),S):d.mutate(m)},query:function(m){if(!nd(ce,d)||!rd("query",m))return d.query(m);var S=((E=ce.trans)===null||E===void 0?void 0:E.db._options.cache)==="immutable",_=ce,b=_.requery,R=_.signal,E=function(P,F,M,A){var L=yr["idb://".concat(P,"/").concat(F)];if(!L)return[];if(!(F=L.queries[M]))return[null,!1,L,null];var U=F[(A.query?A.query.index.name:null)||""];if(!U)return[null,!1,L,null];switch(M){case"query":var K=U.find(function(V){return V.req.limit===A.limit&&V.req.values===A.values&&od(V.req.query.range,A.query.range)});return K?[K,!0,L,U]:[U.find(function(V){return("limit"in V.req?V.req.limit:1/0)>=A.limit&&(!A.values||V.req.values)&&Cm(V.req.query.range,A.query.range)}),!1,L,U];case"count":return K=U.find(function(V){return od(V.req.query.range,A.query.range)}),[K,!!K,L,U]}}(l,c,"query",m),T=E[0],_=E[1],z=E[2],C=E[3];return T&&_?T.obsSet=m.obsSet:(_=d.query(m).then(function(P){var F=P.result;if(T&&(T.res=F),S){for(var M=0,A=F.length;M<A;++M)Object.freeze(F[M]);Object.freeze(F)}else P.result=_e(F);return P}).catch(function(P){return C&&T&&te(C,T),Promise.reject(P)}),T={obsSet:m.obsSet,promise:_,subscribers:new Set,type:"query",req:m,dirty:!1},C?C.push(T):(C=[T],(z=z||(yr["idb://".concat(l,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=C)),Em(T,C,b,R),T.promise.then(function(P){return{result:sd(P.result,m,z==null?void 0:z.optimisticOps,d,T,S)}})}})}})}};function Js(i,l){return new Proxy(i,{get:function(c,d,h){return d==="db"?l:Reflect.get(c,d,h)}})}var xn=(Ye.prototype.version=function(i){if(isNaN(i)||i<.1)throw new ue.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var l=this._versions,c=l.filter(function(d){return d._cfg.version===i})[0];return c||(c=new this.Version(i),l.push(c),l.sort(gm),c.stores({}),this._state.autoSchema=!1,c)},Ye.prototype._whenReady=function(i){var l=this;return this.idbdb&&(this._state.openComplete||ce.letThrough||this._vip)?i():new se(function(c,d){if(l._state.openComplete)return d(new ue.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void d(new ue.DatabaseClosed);l.open().catch(xe)}l._state.dbReadyPromise.then(c,d)}).then(i)},Ye.prototype.use=function(i){var l=i.stack,c=i.create,d=i.level,h=i.name;return h&&this.unuse({stack:l,name:h}),i=this._middlewares[l]||(this._middlewares[l]=[]),i.push({stack:l,create:c,level:d??10,name:h}),i.sort(function(m,S){return m.level-S.level}),this},Ye.prototype.unuse=function(i){var l=i.stack,c=i.name,d=i.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(h){return d?h.create!==d:!!c&&h.name!==c})),this},Ye.prototype.open=function(){var i=this;return hr(In,function(){return jm(i)})},Ye.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var i=this._state,l=Lr.indexOf(this);if(0<=l&&Lr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new se(function(c){i.dbReadyResolve=c}),i.openCanceller=new se(function(c,d){i.cancelOpen=d}))},Ye.prototype.close=function(c){var l=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,c=this._state;l?(c.isBeingOpened&&c.cancelOpen(new ue.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new ue.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},Ye.prototype.delete=function(i){var l=this;i===void 0&&(i={disableAutoOpen:!0});var c=0<arguments.length&&typeof arguments[0]!="object",d=this._state;return new se(function(h,m){function S(){l.close(i);var b=l._deps.indexedDB.deleteDatabase(l.name);b.onsuccess=De(function(){var R,E,T;R=l._deps,E=l.name,T=R.indexedDB,R=R.IDBKeyRange,$l(T)||E===Ds||Bl(T,R).delete(E).catch(xe),h()}),b.onerror=sn(m),b.onblocked=l._fireOnBlocked}if(c)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");d.isBeingOpened?d.dbReadyPromise.then(S):S()})},Ye.prototype.backendDB=function(){return this.idbdb},Ye.prototype.isOpen=function(){return this.idbdb!==null},Ye.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},Ye.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ye.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ye.prototype,"tables",{get:function(){var i=this;return u(this._allTables).map(function(l){return i._allTables[l]})},enumerable:!1,configurable:!0}),Ye.prototype.transaction=function(){var i=(function(l,c,d){var h=arguments.length;if(h<2)throw new ue.InvalidArgument("Too few arguments");for(var m=new Array(h-1);--h;)m[h-1]=arguments[h];return d=m.pop(),[l,le(m),d]}).apply(this,arguments);return this._transaction.apply(this,i)},Ye.prototype._transaction=function(i,l,c){var d=this,h=ce.trans;h&&h.db===this&&i.indexOf("!")===-1||(h=null);var m,S,b=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(S=l.map(function(E){if(E=E instanceof d.Table?E.name:E,typeof E!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return E}),i=="r"||i===Nl)m=Nl;else{if(i!="rw"&&i!=Pl)throw new ue.InvalidArgument("Invalid transaction mode: "+i);m=Pl}if(h){if(h.mode===Nl&&m===Pl){if(!b)throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&S.forEach(function(E){if(h&&h.storeNames.indexOf(E)===-1){if(!b)throw new ue.SubTransaction("Table "+E+" not included in parent transaction.");h=null}}),b&&h&&!h.active&&(h=null)}}catch(E){return h?h._promise(null,function(T,_){_(E)}):Qe(E)}var R=(function E(T,_,z,C,P){return se.resolve().then(function(){var F=ce.transless||ce,M=T._createTransaction(_,z,T._dbSchema,C);if(M.explicit=!0,F={trans:M,transless:F},C)M.idbtrans=C.idbtrans;else try{M.create(),M.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch(U){return U.name===rt.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return E(T,_,z,null,P)})):Qe(U)}var A,L=Re(P);return L&&Or(),F=se.follow(function(){var U;(A=P.call(M,M))&&(L?(U=On.bind(null,null),A.then(U,U)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=Ql(A)))},F),(A&&typeof A.then=="function"?se.resolve(A).then(function(U){return M.active?U:Qe(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):F.then(function(){return A})).then(function(U){return C&&M._resolve(),M._completion.then(function(){return U})}).catch(function(U){return M._reject(U),Qe(U)})})}).bind(null,this,m,S,h,c);return h?h._promise(m,R,"lock"):ce.trans?hr(ce.transless,function(){return d._whenReady(R)}):this._whenReady(R)},Ye.prototype.table=function(i){if(!x(this._allTables,i))throw new ue.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},Ye);function Ye(i,l){var c=this;this._middlewares={},this.verno=0;var d=Ye.dependencies;this._options=l=r({addons:Ye.addons,autoOpen:!0,indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},d=l.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,m,S,b,R,E={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xe,dbReadyPromise:null,cancelOpen:xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};E.dbReadyPromise=new se(function(_){E.dbReadyResolve=_}),E.openCanceller=new se(function(_,z){E.cancelOpen=z}),this._state=E,this.name=i,this.on=_i(this,"populate","blocked","versionchange","close",{ready:[Bt,xe]}),this.once=function(_,z){var C=function(){for(var P=[],F=0;F<arguments.length;F++)P[F]=arguments[F];c.on(_).unsubscribe(C),z.apply(c,P)};return c.on(_,C)},this.on.ready.subscribe=j(this.on.ready.subscribe,function(_){return function(z,C){Ye.vip(function(){var P,F=c._state;F.openComplete?(F.dbOpenError||se.resolve().then(z),C&&_(z)):F.onReadyBeingFired?(F.onReadyBeingFired.push(z),C&&_(z)):(_(z),P=c,C||_(function M(){P.on.ready.unsubscribe(z),P.on.ready.unsubscribe(M)}))})}}),this.Collection=(h=this,Ri(dm.prototype,function(A,M){this.db=h;var C=Ic,P=null;if(M)try{C=M()}catch(L){P=L}var F=A._ctx,M=F.table,A=M.hook.reading.fire;this._ctx={table:M,index:F.index,isPrimKey:!F.index||M.schema.primKey.keyPath&&F.index===M.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:P,or:F.or,valueMapper:A!==Pt?A:null}})),this.Table=(m=this,Ri(Bc.prototype,function(_,z,C){this.db=m,this._tx=C,this.name=_,this.schema=z,this.hook=m._allTables[_]?m._allTables[_].hook:_i(null,{creating:[$e,xe],reading:[cr,Pt],updating:[qe,xe],deleting:[Me,xe]})})),this.Transaction=(S=this,Ri(pm.prototype,function(_,z,C,P,F){var M=this;_!=="readonly"&&z.forEach(function(A){A=(A=C[A])===null||A===void 0?void 0:A.yProps,A&&(z=z.concat(A.map(function(L){return L.updatesTable})))}),this.db=S,this.mode=_,this.storeNames=z,this.schema=C,this.chromeTransactionDurability=P,this.idbtrans=null,this.on=_i(this,"complete","error","abort"),this.parent=F||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se(function(A,L){M._resolve=A,M._reject=L}),this._completion.then(function(){M.active=!1,M.on.complete.fire()},function(A){var L=M.active;return M.active=!1,M.on.error.fire(A),M.parent?M.parent._reject(A):L&&M.idbtrans&&M.idbtrans.abort(),Qe(A)})})),this.Version=(b=this,Ri(Sm.prototype,function(_){this.db=b,this._cfg={version:_,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(R=this,Ri(Hc.prototype,function(_,z,C){if(this.db=R,this._ctx={table:_,index:z===":id"?null:z,or:C},this._cmp=this._ascending=Se,this._descending=function(P,F){return Se(F,P)},this._max=function(P,F){return 0<Se(P,F)?P:F},this._min=function(P,F){return Se(P,F)<0?P:F},this._IDBKeyRange=R._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})),this.on("versionchange",function(_){0<_.newVersion?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(_){!_.newVersion||_.newVersion<_.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(_.oldVersion/10))}),this._maxKey=Pi(l.IDBKeyRange),this._createTransaction=function(_,z,C,P){return new c.Transaction(_,z,C,c._options.chromeTransactionDurability,P)},this._fireOnBlocked=function(_){c.on("blocked").fire(_),Lr.filter(function(z){return z.name===c.name&&z!==c&&!z._state.vcFired}).map(function(z){return z.on("versionchange").fire(_)})},this.use(_m),this.use(Nm),this.use(Rm),this.use(km),this.use(bm);var T=new Proxy(this,{get:function(_,z,C){if(z==="_vip")return!0;if(z==="table")return function(F){return Js(c.table(F),T)};var P=Reflect.get(_,z,C);return P instanceof Bc?Js(P,T):z==="tables"?P.map(function(F){return Js(F,T)}):z==="_createTransaction"?function(){return Js(P.apply(this,arguments),T)}:P}});this.vip=T,d.forEach(function(_){return _(c)})}var Zs,$t=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Pm=(Jl.prototype.subscribe=function(i,l,c){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:l,complete:c})},Jl.prototype[$t]=function(){return this},Jl);function Jl(i){this._subscribe=i}try{Zs={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Zs={indexedDB:null,IDBKeyRange:null}}function ld(i){var l,c=!1,d=new Pm(function(h){var m=Re(i),S,b=!1,R={},E={},T={get closed(){return b},unsubscribe:function(){b||(b=!0,S&&S.abort(),_&&$n.storagemutated.unsubscribe(C))}};h.start&&h.start(T);var _=!1,z=function(){return El(P)},C=function(F){Ys(R,F),Wl(E,R)&&z()},P=function(){var F,M,A;!b&&Zs.indexedDB&&(R={},F={},S&&S.abort(),S=new AbortController,A=function(L){var U=Ir();try{m&&Or();var K=Dn(i,L);return K=m?K.finally(On):K}finally{U&&Dr()}}(M={subscr:F,signal:S.signal,requery:z,querier:i,trans:null}),Promise.resolve(A).then(function(L){c=!0,l=L,b||M.signal.aborted||(R={},function(U){for(var K in U)if(x(U,K))return;return 1}(E=F)||_||($n(Ni,C),_=!0),El(function(){return!b&&h.next&&h.next(L)}))},function(L){c=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||b||El(function(){b||h.error&&h.error(L)})}))};return setTimeout(z,0),T});return d.hasValue=function(){return c},d.getValue=function(){return l},d}var vr=xn;function Zl(i){var l=Un;try{Un=!0,$n.storagemutated.fire(i),ql(i,!0)}finally{Un=l}}v(vr,r(r({},je),{delete:function(i){return new vr(i,{addons:[]}).delete()},exists:function(i){return new vr(i,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return l=vr.dependencies,c=l.indexedDB,l=l.IDBKeyRange,($l(c)?Promise.resolve(c.databases()).then(function(d){return d.map(function(h){return h.name}).filter(function(h){return h!==Ds})}):Bl(c,l).toCollection().primaryKeys()).then(i)}catch{return Qe(new ue.MissingAPI)}var l,c},defineClass:function(){return function(i){p(this,i)}},ignoreTransaction:function(i){return ce.trans?hr(ce.transless,i):i()},vip:Ul,async:function(i){return function(){try{var l=Ql(i.apply(this,arguments));return l&&typeof l.then=="function"?l:se.resolve(l)}catch(c){return Qe(c)}}},spawn:function(i,l,c){try{var d=Ql(i.apply(c,l||[]));return d&&typeof d.then=="function"?d:se.resolve(d)}catch(h){return Qe(h)}},currentTransaction:{get:function(){return ce.trans||null}},waitFor:function(i,l){return l=se.resolve(typeof i=="function"?vr.ignoreTransaction(i):i).timeout(l||6e4),ce.trans?ce.trans.waitFor(l):l},Promise:se,debug:{get:function(){return et},set:function(i){mn(i)}},derive:N,extend:p,props:v,override:j,Events:_i,on:$n,liveQuery:ld,extendObservabilitySet:Ys,getByKeyPath:D,setByKeyPath:W,delByKeyPath:function(i,l){typeof l=="string"?W(i,l,void 0):"length"in l&&[].map.call(l,function(c){W(i,c,void 0)})},shallowClone:Y,deepClone:_e,getObjectDiff:Yl,cmp:Se,asap:$,minKey:-1/0,addons:[],connections:Lr,errnames:rt,dependencies:Zs,cache:yr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(i){return parseInt(i)}).reduce(function(i,l,c){return i+l/Math.pow(10,2*c)})})),vr.maxKey=Pi(vr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&($n(Ni,function(i){Un||(i=new CustomEvent(Fl,{detail:i}),Un=!0,dispatchEvent(i),Un=!1)}),addEventListener(Fl,function(i){i=i.detail,Un||Zl(i)}));var Kr,Un=!1,ad=function(){};return typeof BroadcastChannel<"u"&&((ad=function(){(Kr=new BroadcastChannel(Fl)).onmessage=function(i){return i.data&&Zl(i.data)}})(),typeof Kr.unref=="function"&&Kr.unref(),$n(Ni,function(i){Un||Kr.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!xn.disableBfCache&&i.persisted){et&&console.debug("Dexie: handling persisted pagehide"),Kr!=null&&Kr.close();for(var l=0,c=Lr;l<c.length;l++)c[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!xn.disableBfCache&&i.persisted&&(et&&console.debug("Dexie: handling persisted pageshow"),ad(),Zl({all:new dt(-1/0,[[]])}))})),se.rejectionMapper=function(i,l){return!i||i instanceof Te||i instanceof TypeError||i instanceof SyntaxError||!i.name||!me[i.name]?i:(l=new me[i.name](l||i.message,i),"stack"in i&&B(l,"stack",{get:function(){return this.inner.stack}}),l)},mn(et),r(xn,Object.freeze({__proto__:null,Dexie:xn,liveQuery:ld,Entity:Dc,cmp:Se,PropModification:Ci,replacePrefix:function(i,l){return new Ci({replacePrefix:[i,l]})},add:function(i){return new Ci({add:i})},remove:function(i){return new Ci({remove:i})},default:xn,RangeSet:dt,mergeRanges:Fi,rangesOverlap:Gc}),{default:xn}),xn})})(em);var p0=em.exports;const Mu=Pf(p0),kf=Symbol.for("Dexie"),sl=globalThis[kf]||(globalThis[kf]=Mu);if(Mu.semVer!==sl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Mu.semVer} and ${sl.semVer}`);const{liveQuery:U0,mergeRanges:K0,rangesOverlap:W0,RangeSet:V0,cmp:H0,Entity:q0,PropModification:Q0,replacePrefix:Y0,add:X0,remove:G0,DexieYProvider:J0}=sl;class m0 extends sl{constructor(){super("awareDB");ve(this,"reports");ve(this,"shelters");ve(this,"runs");ve(this,"kvs");this.version(1).stores({reports:"id, issuedAt, expiresAt, severity, urgency, geokey, eventType",shelters:"id, geokey, status, updatedAt, name",runs:"id, timestamp, scenario, policy, seed, experimentName",kvs:"key"})}}const Mn=new m0;async function y0(e){return Mn.reports.bulkPut(e)}async function v0(e){return Mn.shelters.bulkPut(e)}async function Hr(e){return Mn.runs.put(e)}const za=10;function g0({onReplay:e}){const[t,n]=J.useState([]),r=e??(()=>{}),[s,o]=J.useState(1),u=J.useCallback(async()=>{const N=await Mn.runs.orderBy("timestamp").reverse().toArray();n(N),o(1)},[]);J.useEffect(()=>{u()},[u]);const f=Math.max(1,Math.ceil(t.length/za)),p=Math.min(s,f),y=J.useMemo(()=>{const N=(p-1)*za;return t.slice(N,N+za)},[t,p]);async function k(){await Mn.runs.clear(),await u()}function x(){const N=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),H=URL.createObjectURL(N);xo(H,`aware-runs-${Date.now()}.json`)}function v(){const H=[["id","timestamp","scenario","policy","seed","seedMode","replicateIndex","replicates","batchId","samplesCount","cacheHitRate","deliveryRate","avgFreshness","staleAccessRate","redundancyIndex","actionabilityFirstRatio","timelinessConsistency","pushesSent","pushSuppressRate","pushDuplicateRate","pushTimelyFirstRatio"].join(",")];for(const j of t){const I=j.metrics||{};H.push([j.id,j.timestamp,j.scenario,j.policy,j.seed,j.seedMode??"",j.replicateIndex??"",j.replicates??"",j.batchId??"",j.samplesCount,I.cacheHitRate??"",I.deliveryRate??"",I.avgFreshness??"",I.staleAccessRate??"",I.redundancyIndex??"",I.actionabilityFirstRatio??"",I.timelinessConsistency??"",I.pushesSent??"",I.pushSuppressRate??"",I.pushDuplicateRate??"",I.pushTimelyFirstRatio??""].join(","))}const g=new Blob([H.join(`
`)],{type:"text/csv"}),w=URL.createObjectURL(g);xo(w,`aware-runs-${Date.now()}.csv`)}function O(){const H=[["runId","timestamp","scenario","policy","seed","alertId","eventType","severity","urgency","issuedAt","ttlSec","regionId","geokey","threadKey","updateNo","sizeBytes","delivered"].join(",")];for(const j of t){const I=j.fullResults;if(!I)continue;const $=I.issuedAlerts??[],D=new Set((I.deliveredAlerts??[]).map(W=>W.id));for(const W of $){const Y=D.has(W.id)?"true":"false";H.push([j.id,j.timestamp,j.scenario,j.policy,j.seed,W.id,W.eventType,W.severity,W.urgency,W.issuedAt,W.ttlSec,W.regionId??"",W.geokey??"",W.threadKey??"",W.updateNo??"",W.sizeBytes??"",Y].join(","))}}const g=new Blob([H.join(`
`)],{type:"text/csv"}),w=URL.createObjectURL(g);xo(w,`aware-alerts-${Date.now()}.csv`)}function B(){const H=[["runId","timestamp","scenario","policy","seed","alertId","eventType","severity","urgency","issuedAt","ttlSec","regionId","geokey","threadKey","updateNo","sizeBytes"].join(",")];for(const j of t){const I=j.fullResults;if(!I)continue;const $=I.deliveredAlerts??[];for(const D of $)H.push([j.id,j.timestamp,j.scenario,j.policy,j.seed,D.id,D.eventType,D.severity,D.urgency,D.issuedAt,D.ttlSec,D.regionId??"",D.geokey??"",D.threadKey??"",D.updateNo??"",D.sizeBytes??""].join(","))}const g=new Blob([H.join(`
`)],{type:"text/csv"}),w=URL.createObjectURL(g);xo(w,`aware-delivered-alerts-${Date.now()}.csv`)}return a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,flexWrap:"wrap"},children:[a.jsx("h3",{style:{margin:0},children:"Runs History"}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:x,children:"Export JSON"}),a.jsx("button",{onClick:v,children:"Export CSV"}),a.jsx("button",{onClick:O,disabled:t.length===0,children:"Export Alerts CSV"}),a.jsx("button",{onClick:B,disabled:t.length===0,children:"Export Delivered Alerts CSV"}),a.jsx("button",{onClick:k,disabled:t.length===0,children:"Clear runs"})]})]}),a.jsx("div",{style:{overflow:"auto",marginTop:12},children:a.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx(xt,{children:"ID"}),a.jsx(xt,{children:"Time"}),a.jsx(xt,{children:"Scenario"}),a.jsx(xt,{children:"Policy"}),a.jsx(xt,{children:"Seed"}),a.jsx(xt,{children:"Mode"}),a.jsx(xt,{children:"Rep"}),a.jsx(xt,{children:"Hit%"}),a.jsx(xt,{children:"Delivery%"}),a.jsx(xt,{children:"Fresh"}),a.jsx(xt,{children:"Stale%"}),a.jsx(xt,{children:"Redund%"}),a.jsx(xt,{children:"ActFirst%"}),a.jsx(xt,{children:"TimeCons%"}),a.jsx(xt,{children:"Env"})]})}),a.jsx("tbody",{children:y.map(N=>{var H,g,w,j,I,$,D;return a.jsxs("tr",{style:{borderTop:"1px solid #314462"},children:[a.jsx(wt,{mono:!0,children:N.id}),a.jsx(wt,{children:new Date(N.timestamp).toLocaleString()}),a.jsx(wt,{children:N.scenario}),a.jsx(wt,{children:N.policy}),a.jsx(wt,{mono:!0,children:N.seed}),a.jsx(wt,{children:N.seedMode??""}),a.jsx(wt,{children:typeof N.replicateIndex=="number"&&typeof N.replicates=="number"?`${N.replicateIndex}/${N.replicates}`:""}),a.jsx(wt,{children:qr((H=N.metrics)==null?void 0:H.cacheHitRate)}),a.jsx(wt,{children:qr((g=N.metrics)==null?void 0:g.deliveryRate)}),a.jsx(wt,{children:x0((w=N.metrics)==null?void 0:w.avgFreshness)}),a.jsx(wt,{children:qr((j=N.metrics)==null?void 0:j.staleAccessRate)}),a.jsx(wt,{children:qr((I=N.metrics)==null?void 0:I.redundancyIndex)}),a.jsx(wt,{children:qr(($=N.metrics)==null?void 0:$.actionabilityFirstRatio)}),a.jsx(wt,{children:qr((D=N.metrics)==null?void 0:D.timelinessConsistency)}),a.jsx(wt,{children:a.jsx("button",{onClick:()=>r(N),disabled:!N.fullResults,children:"Show"})})]},N.id)})})]})}),a.jsx(w0,{page:p,pageCount:f,onPageChange:o})]})}function xo(e,t){const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(e)}function qr(e){return typeof e!="number"?"":`${(e*100).toFixed(1)}%`}function x0(e){return typeof e!="number"?"":e.toFixed(2)}function xt({children:e}){return a.jsx("th",{style:{textAlign:"left",padding:"6px 8px",color:"#9fb3d9"},children:e})}function wt({children:e,mono:t}){return a.jsx("td",{style:{padding:"6px 8px",fontFamily:t?'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace':void 0},children:e})}function w0({page:e,pageCount:t,onPageChange:n}){return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},children:[a.jsxs("span",{className:"muted",children:["Page ",e," / ",t]}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:()=>n(Math.max(1,e-1)),disabled:e<=1,children:"Previous"}),a.jsx("button",{onClick:()=>n(Math.min(t,e+1)),disabled:e>=t,children:"Next"})]})]})}const Aa=10;function S0(){const[e,t]=J.useState([]),[n,r]=J.useState(1),s=Math.max(1,Math.ceil(e.length/Aa)),o=Math.min(n,s),u=J.useMemo(()=>{const y=(o-1)*Aa;return e.slice(y,y+Aa)},[e,o]);async function f(y=!1){const k=Math.floor(Date.now()/1e3),x=await Mn.reports.filter(v=>v.issuedAt<=k&&k<v.expiresAt).toArray();x.sort((v,O)=>bf(O)-bf(v)||O.issuedAt-v.issuedAt),t(x),y&&r(1)}async function p(){await Mn.reports.clear(),await f(!0)}return J.useEffect(()=>{f(!0)},[]),J.useEffect(()=>{r(y=>Math.max(1,Math.min(y,s)))},[s]),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,flexWrap:"wrap"},children:[a.jsx("h3",{style:{margin:0},children:"Active Alerts"}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:()=>f(!1),children:"Refresh"}),a.jsx("button",{onClick:p,disabled:e.length===0,children:"Clear alerts"})]})]}),e.length===0?a.jsx("div",{className:"muted",style:{marginTop:8},children:"No active alerts currently."}):a.jsxs(a.Fragment,{children:[a.jsx("ul",{style:{listStyle:"none",margin:12,marginLeft:0,padding:0},children:u.map(y=>a.jsxs("li",{className:"card",style:{marginBottom:8},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("strong",{children:y.headline??`${y.severity} ${y.eventType}`}),a.jsx("span",{className:"muted",children:y.geokey})]}),a.jsx("div",{className:"muted",style:{marginTop:4},children:y.instruction}),a.jsxs("div",{className:"muted",style:{marginTop:6,fontSize:12},children:["Severity: ",y.severity," | Urgency: ",y.urgency," | Issued: ",y.issuedAt,"s | Expires: ",y.expiresAt,"s"]})]},y.id))}),a.jsx(j0,{page:o,pageCount:s,onPageChange:r})]})]})}function bf(e){const t=e.severity==="Extreme"?4:e.severity==="Severe"?3:e.severity==="Moderate"?2:e.severity==="Minor"?1:2,n=e.urgency==="Immediate"?3:e.urgency==="Expected"?2:e.urgency==="Future"?1.5:e.urgency==="Past"?.5:1.5;return t*3+n*2}function j0({page:e,pageCount:t,onPageChange:n}){return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:8},children:[a.jsxs("span",{className:"muted",children:["Page ",e," / ",t]}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:()=>n(Math.max(1,e-1)),disabled:e<=1,children:"Previous"}),a.jsx("button",{onClick:()=>n(Math.min(t,e+1)),disabled:e>=t,children:"Next"})]})]})}const Ia=10;function k0(){const[e,t]=J.useState([]),[n,r]=J.useState(!1),[s,o]=J.useState(1),u=Math.max(1,Math.ceil(e.length/Ia)),f=Math.min(s,u),p=J.useMemo(()=>{const x=(f-1)*Ia;return e.slice(x,x+Ia)},[e,f]);async function y(){if(!(await Mn.shelters.count()>0))try{const O=await(await fetch("/api/shelters/index.json")).json();await v0(O)}catch{}}async function k(x=!1){await y();const v=await Mn.shelters.orderBy("name").toArray();t(v),x&&o(1),r(!0)}return J.useEffect(()=>{k(!0)},[]),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,flexWrap:"wrap"},children:[a.jsx("h3",{style:{margin:0},children:"Nearby Shelters"}),a.jsx("button",{onClick:()=>k(!1),children:"Refresh"})]}),n?e.length===0?a.jsx("div",{className:"muted",style:{marginTop:8},children:"No shelters available."}):a.jsxs(a.Fragment,{children:[a.jsx("ul",{style:{listStyle:"none",margin:12,marginLeft:0,padding:0},children:p.map(x=>a.jsxs("li",{className:"card",style:{marginBottom:8},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx("strong",{children:x.name}),a.jsx("span",{className:"muted",children:x.status.toUpperCase()})]}),a.jsx("div",{className:"muted",style:{marginTop:4},children:x.address??`${x.coordinates[1].toFixed(4)}, ${x.coordinates[0].toFixed(4)}`}),x.capacity!==void 0&&a.jsxs("div",{className:"muted",style:{marginTop:6,fontSize:12},children:["Capacity: ",x.capacity]})]},x.id))}),a.jsx(b0,{page:f,pageCount:u,onPageChange:o})]}):a.jsx("div",{className:"muted",style:{marginTop:8},children:"Loading..."})]})}function b0({page:e,pageCount:t,onPageChange:n}){return a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:8},children:[a.jsxs("span",{className:"muted",children:["Page ",e," / ",t]}),a.jsxs("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{onClick:()=>n(Math.max(1,e-1)),disabled:e<=1,children:"Previous"}),a.jsx("button",{onClick:()=>n(Math.min(t,e+1)),disabled:e>=t,children:"Next"})]})]})}const _0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_MAPBOX_TOKEN:"pk.eyJ1IjoiZmxvb2R3YXRjaHV2YSIsImEiOiJjbDFiMWkxdnUwaHcwM2txcm85NXd0NXAwIn0.cK3s5a8MgDyCsDjsRO2Gzw",VITE_MAPBOX_USERNAME:"floodwatchuva",VITE_WEATHER_API_KEY:"0d6fa86f72a04f0595d44624220804"};function Fo(e){var r;const t=typeof import.meta<"u"?_0:void 0;if(!t||!(e in t))return"";const n=t[e];return typeof n=="string"?n.trim():((r=n==null?void 0:n.toString)==null?void 0:r.call(n).trim())??""}function tm(){return Fo("VITE_WEATHER_API_KEY")}function Nc(){return{token:Fo("VITE_MAPBOX_TOKEN"),username:Fo("VITE_MAPBOX_USERNAME")||void 0,style:Fo("VITE_MAPBOX_STYLE")||void 0}}function nm(){return tm()?{configured:!0,hint:"Weather provider configured (VITE_WEATHER_API_KEY detected)."}:{configured:!1,hint:"Set VITE_WEATHER_API_KEY to enable live weather ingest."}}function rm(){const{token:e,username:t,style:n}=Nc();return e?n?{configured:!0,hint:`Mapbox ready (style ${n}).`}:t?{configured:!0,hint:`Mapbox token ready (default mapbox/streets-v12; set VITE_MAPBOX_STYLE for ${t}/style-id).`}:{configured:!0,hint:"Mapbox token ready (defaulting to mapbox/streets-v12)."}:{configured:!1,hint:"Set VITE_MAPBOX_TOKEN for map overlays."}}function R0({region:e,weatherData:t,anomalyData:n,stats:r}){return e?a.jsxs("div",{className:"regional-profile",style:{padding:12,backgroundColor:"#1a2842",borderRadius:6},children:[a.jsxs("h4",{style:{marginTop:0,marginBottom:12},children:["Region ",e.id]}),a.jsxs("div",{className:"profile-section",children:[a.jsx("h5",{children:"Geography & Infrastructure"}),a.jsxs("div",{className:"profile-grid",children:[a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Severity Class:"}),a.jsx("span",{className:`severity-badge ${e.severity.toLowerCase()}`,children:e.severity})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Local Reliability:"}),a.jsxs("span",{className:"profile-value",children:[e.localFactor.toFixed(2),"x"]}),a.jsx("span",{className:"profile-hint",children:e.localFactor>1.1?"(High)":e.localFactor<.9?"(Low)":"(Normal)"})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Center:"}),a.jsxs("span",{className:"profile-value",children:["(",e.center[0].toFixed(0),", ",e.center[1].toFixed(0),")"]})]})]})]}),t&&a.jsxs("div",{className:"profile-section",children:[a.jsx("h5",{children:"Weather & Hydrology"}),a.jsxs("div",{className:"profile-grid",children:[a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Flood Frequency:"}),a.jsxs("span",{className:"profile-value",children:[(t.floodFrequency*100).toFixed(0),"%"]}),a.jsx("div",{className:"profile-bar",children:a.jsx("div",{className:"profile-bar-fill",style:{width:`${t.floodFrequency*100}%`,backgroundColor:"#f59e0b"}})})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Mean Rainfall:"}),a.jsxs("span",{className:"profile-value",children:[t.rainfallMeanMm.toFixed(0),"mm"]})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Rainfall Volatility:"}),a.jsxs("span",{className:"profile-value",children:[(t.rainfallVolatility*100).toFixed(0),"%"]}),a.jsx("div",{className:"profile-bar",children:a.jsx("div",{className:"profile-bar-fill",style:{width:`${t.rainfallVolatility*100}%`,backgroundColor:"#3b82f6"}})})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Drainage Quality:"}),a.jsxs("span",{className:"profile-value",children:[(t.drainageScore*100).toFixed(0),"%"]}),a.jsx("div",{className:"profile-bar",children:a.jsx("div",{className:"profile-bar-fill",style:{width:`${t.drainageScore*100}%`,backgroundColor:"#10b981"}})})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Shelter Demand:"}),a.jsxs("span",{className:"profile-value",children:[(t.shelterDemandIndex*100).toFixed(0),"%"]})]})]})]}),n&&a.jsxs("div",{className:"profile-section",children:[a.jsx("h5",{children:"Historical Patterns & Anomalies"}),a.jsxs("div",{className:"profile-grid",children:[a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"False Alarm Rate:"}),a.jsxs("span",{className:"profile-value warn",children:[(n.falseAlarmRate*100).toFixed(1),"%"]}),a.jsx("div",{className:"profile-bar",children:a.jsx("div",{className:"profile-bar-fill",style:{width:`${n.falseAlarmRate*100}%`,backgroundColor:"#ef4444"}})})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Last-Min Diversion:"}),a.jsxs("span",{className:"profile-value warn",children:[(n.lastMinuteDiversionRate*100).toFixed(1),"%"]}),a.jsx("div",{className:"profile-bar",children:a.jsx("div",{className:"profile-bar-fill",style:{width:`${n.lastMinuteDiversionRate*100}%`,backgroundColor:"#f97316"}})}),a.jsx("span",{className:"profile-hint",children:"storms divert away unexpectedly"})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Historical Accuracy:"}),a.jsxs("span",{className:"profile-value success",children:[(n.historicalAccuracy*100).toFixed(1),"%"]}),a.jsx("div",{className:"profile-bar",children:a.jsx("div",{className:"profile-bar-fill",style:{width:`${n.historicalAccuracy*100}%`,backgroundColor:"#22c55e"}})})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Typical Lead Time:"}),a.jsxs("span",{className:"profile-value",children:[Math.floor(n.typicalLeadTimeSec/60),"min"]})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Underestimation:"}),a.jsxs("span",{className:"profile-value",children:[(n.underestimationRate*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Overestimation:"}),a.jsxs("span",{className:"profile-value",children:[(n.overestimationRate*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Accuracy Trend:"}),a.jsx("span",{className:`profile-value ${n.accuracyTrend>1.05?"success":n.accuracyTrend<.95?"warn":""}`,children:n.accuracyTrend>1.05?"↑ Improving":n.accuracyTrend<.95?"↓ Degrading":"→ Stable"})]})]})]}),r&&a.jsxs("div",{className:"profile-section",children:[a.jsx("h5",{children:"Simulation Performance"}),a.jsxs("div",{className:"profile-grid",children:[a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Delivered:"}),a.jsx("span",{className:"profile-value success",children:r.delivered})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Dropped:"}),a.jsx("span",{className:"profile-value warn",children:r.dropped})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"First Retrievals:"}),a.jsx("span",{className:"profile-value",children:r.firstRetrievals})]}),a.jsxs("div",{className:"profile-item",children:[a.jsx("span",{className:"profile-label",children:"Avg Latency:"}),a.jsx("span",{className:"profile-value",children:r.avgFirstRetrievalLatencySec!==null?`${r.avgFirstRetrievalLatencySec.toFixed(1)}s`:"n/a"})]})]})]}),a.jsx("style",{children:`
        .regional-profile .profile-section {
          margin-bottom: 16px;
        }
        .regional-profile .profile-section:last-child {
          margin-bottom: 0;
        }
        .regional-profile h5 {
          margin: 0 0 8px 0;
          font-size: 13px;
          color: #9fb3d9;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }
        .regional-profile .profile-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 12px;
          font-size: 13px;
        }
        .regional-profile .profile-item {
          display: flex;
          flex-direction: column;
          gap: 4px;
        }
        .regional-profile .profile-label {
          color: #9fb3d9;
          font-size: 12px;
        }
        .regional-profile .profile-value {
          color: #d7e1f7;
          font-weight: 600;
        }
        .regional-profile .profile-value.success {
          color: #22c55e;
        }
        .regional-profile .profile-value.warn {
          color: #f59e0b;
        }
        .regional-profile .profile-hint {
          color: #6b7280;
          font-size: 11px;
        }
        .regional-profile .profile-bar {
          height: 4px;
          background: #0f172a;
          border-radius: 2px;
          overflow: hidden;
        }
        .regional-profile .profile-bar-fill {
          height: 100%;
          transition: width 0.3s ease;
        }
        .severity-badge {
          padding: 2px 6px;
          border-radius: 3px;
          font-size: 11px;
          font-weight: 600;
          text-transform: uppercase;
        }
        .severity-badge.extreme { background: #dc2626; color: white; }
        .severity-badge.severe { background: #ea580c; color: white; }
        .severity-badge.moderate { background: #f59e0b; color: white; }
        .severity-badge.minor { background: #84cc16; color: white; }
      `})]}):a.jsxs("div",{className:"regional-profile",children:[a.jsx("h4",{children:"Regional Profile"}),a.jsx("div",{className:"muted",children:"Select a region to view its characteristics."})]})}const _f=420,Rf=600;function C0({scenario:e="Urban",baselineReliability:t=.9}){const{snapshot:n,activeTimeSec:r,setActiveTimeSec:s}=Cc(),[o,u]=J.useState(n?"live":"custom"),[f,p]=J.useState(!0),[y,k]=J.useState("env-demo"),[x,v]=J.useState(10),[O,B]=J.useState(0),[N,H]=J.useState(null),[g,w]=J.useState(null),j=J.useRef(null);J.useEffect(()=>{n&&u("live")},[n]);const I=J.useMemo(()=>({weather:nm(),map:rm()}),[]),$=o==="live"&&n?n.scenario:e,D=o==="live"&&n?n.baselineReliability:t,W=J.useMemo(()=>$==="Rural"?Qp:$==="Suburban"?qp:Hp,[$]);function Y(G,Te,Be){const Ge=f?y:String(Date.now()+Math.random());Be&&!f&&k(Ge);const ge=Rn(_n(Ge)),rt=Yp(ge,G,Te,{regions:x});H(rt)}J.useEffect(()=>{if(o!=="custom")return;const G=j.current;if(!G)return;const Te=()=>{const Ge=G.getBoundingClientRect();Y(Math.max(Rf,Ge.width-4),_f)};Te();const Be=new ResizeObserver(Te);return Be.observe(G),()=>Be.disconnect()},[o,f,y,x]);const ee=o==="live"&&n?n.environment:N,le=o==="live"?r:O,pe=n&&n.timeline.length?n.timeline[n.timeline.length-1].t:0,Ne=o==="live"&&n?Math.max(60,pe):1800,_e=J.useMemo(()=>il(W,le),[W,le]),Le=Pc(D*_e.reliability),Ze=J.useMemo(()=>!n||o!=="live"?null:new Map(n.regionStats.map(G=>[G.regionId,G])),[n,o]),Lt=J.useMemo(()=>!n||o!=="live"?[]:[...n.regionStats].sort((G,Te)=>Te.delivered-G.delivered).slice(0,5),[n,o]);function hn(G){o==="live"?s(G):B(G)}const te=J.useMemo(()=>ee?ee.regions.map(G=>G.id):[],[ee]);J.useEffect(()=>{var G;!g&&((G=ee==null?void 0:ee.regions)!=null&&G.length)&&w(ee.regions[0].id)},[ee,g]);const de=J.useMemo(()=>{if(!(n!=null&&n.issuedAlerts)||!ee||!g)return[];const G=le,Te=ge=>Math.exp(-Math.max(0,G-ge.issuedAt)/Math.max(1,ge.ttlSec)),Be=ge=>ge==="Extreme"?4:ge==="Severe"?3:ge==="Moderate"?2:ge==="Minor"?1:0,Ge=ge=>ge==="Immediate"?4:ge==="Expected"?3:ge==="Future"?2:ge==="Past"?1:0;return n.issuedAlerts.filter(ge=>(ge.regionId??ge.geokey)===g).slice().sort((ge,rt)=>{const pn=Ge(ge.urgency),ue=Ge(rt.urgency);if(pn!==ue)return ue-pn;const me=Be(ge.severity),je=Be(rt.severity);return me!==je?je-me:Te(rt)-Te(ge)})},[n,ee,g,le]),re=J.useMemo(()=>{if(!ee||!n||!g)return null;const G=ee.regions.find(xe=>xe.id===g);if(!G)return null;const Te=_n(`${n.seed}|weather`),Be=Rn(Te),Ge=Xp(ee,Be),ge=_n(`${n.seed}|anomaly`),rt=Rn(ge),pn=Pu(ee,rt),ue=Ge.get(g),me=pn.get(g),je=Ze==null?void 0:Ze.get(g);return{region:G,weatherData:ue,anomalyData:me,stats:je}},[ee,n,g,Ze]),Re=J.useMemo(()=>{if(!ee||!n)return new Map;const G=_n(`${n.seed}|anomaly`),Te=Rn(G);return Pu(ee,Te)},[ee,n]);return a.jsxs("div",{children:[a.jsx("h3",{children:"Environment"}),n&&a.jsx("div",{className:"row",children:a.jsxs("div",{children:[a.jsx("label",{children:"Source"}),a.jsxs("select",{value:o,onChange:G=>u(G.target.value),children:[a.jsx("option",{value:"live",children:"Last run"}),a.jsx("option",{value:"custom",children:"Custom sandbox"})]})]})}),o==="custom"&&a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Deterministic"}),a.jsxs("select",{value:f?"yes":"no",onChange:G=>p(G.target.value==="yes"),children:[a.jsx("option",{value:"yes",children:"Yes"}),a.jsx("option",{value:"no",children:"No"})]})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Seed"}),a.jsx("input",{value:y,onChange:G=>k(G.target.value),disabled:!f})]})]}),a.jsxs("div",{className:"row",children:[o==="custom"&&a.jsxs("div",{children:[a.jsx("label",{children:"Regions"}),a.jsx("input",{type:"number",min:4,max:40,value:x,onChange:G=>v(Number(G.target.value))})]}),a.jsxs("div",{style:{flex:1},children:[a.jsx("label",{children:"Time (sec)"}),a.jsx("input",{type:"range",min:0,max:Ne,value:le,onChange:G=>hn(Number(G.target.value))}),a.jsxs("div",{className:"muted",children:["t=",le,"s | segment reliability ",_e.reliability.toFixed(2)," | effective ",Le.toFixed(2)]})]})]}),o==="custom"&&a.jsx("div",{style:{marginTop:8,display:"flex",gap:8},children:a.jsx("button",{onClick:()=>Y((N==null?void 0:N.width)??Rf,(N==null?void 0:N.height)??_f,!0),children:"Reshuffle"})}),o==="live"&&n&&a.jsxs("div",{className:"muted",style:{marginTop:8,fontSize:13},children:["Viewing environment from run seed ",n.seed," (",n.scenario,")."]}),a.jsx("div",{ref:j,className:"card",style:{marginTop:10},children:ee?a.jsx(E0,{env:ee,baseline:D,segRel:_e.reliability,stats:Ze??void 0,selectedRegion:g??void 0,onSelectRegion:G=>w(G),anomalyData:Re}):a.jsx("div",{className:"muted",children:"Environment not available yet."})}),a.jsx("div",{className:"muted",style:{marginTop:6},children:"Fill shows baseline | segment | local reliability. Borders indicate region severity."}),o==="live"&&ee&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card",style:{marginTop:10},children:[a.jsxs("div",{className:"row",style:{alignItems:"center"},children:[a.jsxs("div",{children:[a.jsx("label",{children:"Region"}),a.jsx("select",{value:g??"",onChange:G=>w(G.target.value),children:te.map(G=>a.jsx("option",{value:G,children:G},G))})]}),a.jsx("div",{style:{flex:1}}),a.jsx("div",{className:"muted",children:"Personalized queue (urgency-first, then severity, then freshness)"})]}),de.length===0?a.jsx("div",{className:"muted",style:{marginTop:6},children:"No alerts issued for this region in the current run."}):a.jsx("ul",{style:{margin:"8px 0 0 0",padding:0,maxHeight:200,overflow:"auto"},children:de.map(G=>a.jsxs("li",{style:{listStyle:"none",padding:"6px 4px",borderBottom:"1px solid #2a3b63"},children:[a.jsxs("div",{style:{display:"flex",gap:8,alignItems:"baseline"},children:[a.jsx("span",{style:{fontWeight:600},children:G.headline??G.eventType}),a.jsxs("span",{className:"muted",style:{fontSize:12},children:["U:",G.urgency," · S:",G.severity," · t+",Math.max(0,le-G.issuedAt),"s · TTL ",G.ttlSec,"s"]})]}),G.instruction&&a.jsx("div",{style:{fontSize:12,color:"#d7e1f7",opacity:.9},children:G.instruction})]},G.id))})]}),re&&a.jsx("div",{style:{marginTop:12},children:a.jsx(R0,{region:re.region,weatherData:re.weatherData,anomalyData:re.anomalyData,stats:re.stats})})]}),Lt.length>0&&a.jsxs("details",{style:{marginTop:10},children:[a.jsx("summary",{style:{cursor:"pointer"},children:"Region delivery stats (top 5)"}),a.jsx("ul",{style:{margin:"6px 0 0 16px",padding:0},children:Lt.map(G=>a.jsxs("li",{style:{listStyle:"disc",color:"#d7e1f7",marginBottom:4},children:[G.regionId,": delivered ",G.delivered,", dropped ",G.dropped,", first retrievals ",G.firstRetrievals,", avg latency ",sm(G.avgFirstRetrievalLatencySec),"s"]},G.regionId))})]}),a.jsxs("div",{className:"muted",style:{marginTop:4,fontSize:12},children:["Weather API: ",I.weather.configured?"ready":"pending"," - ",I.weather.hint]}),a.jsxs("div",{className:"muted",style:{fontSize:12},children:["Mapbox API: ",I.map.configured?"ready":"pending"," - ",I.map.hint]})]})}function E0({env:e,baseline:t,segRel:n,stats:r,selectedRegion:s,onSelectRegion:o,anomalyData:u}){const f=x=>Pc(t*n*x.localFactor),p=x=>im(f(x)),y=x=>x.severity==="Extreme"?"#ff6b6b":x.severity==="Severe"?"#ffd166":"#a5b4d0",k=x=>{const v=r==null?void 0:r.get(x.id),O=u==null?void 0:u.get(x.id);let B=[`Region ${x.id} (${x.severity})`];return O&&(B.push(`Accuracy: ${(O.historicalAccuracy*100).toFixed(0)}%`),B.push(`False Alarms: ${(O.falseAlarmRate*100).toFixed(0)}%`),B.push(`Last-Min Diversions: ${(O.lastMinuteDiversionRate*100).toFixed(0)}%`),B.push(`Lead Time: ${Math.round(O.typicalLeadTimeSec/60)}min`)),v&&(B.push("---"),B.push(`Delivered: ${v.delivered}`),B.push(`Dropped: ${v.dropped}`),B.push(`Avg Latency: ${sm(v.avgFirstRetrievalLatencySec)}s`)),B.join(`
`)};return a.jsxs("svg",{width:"100%",height:e.height,viewBox:`0 0 ${e.width} ${e.height}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("rect",{x:0,y:0,width:e.width,height:e.height,fill:"#0b132b"}),e.regions.map(x=>a.jsx("polygon",{points:x.polygon.map(v=>v.join(",")).join(" "),fill:p(x),stroke:s===x.id?"#7dd3fc":y(x),strokeWidth:s===x.id?2.5:1.5,opacity:.9,style:{cursor:o?"pointer":"default"},onClick:()=>o==null?void 0:o(x.id),children:a.jsx("title",{children:k(x)})},x.id)),e.regions.map(x=>{const v=r==null?void 0:r.get(x.id);return a.jsx("text",{x:x.center[0],y:x.center[1],fill:"#e0e6f2",fontSize:10,textAnchor:"middle",children:v?`${x.id} (${v.delivered})`:x.id},x.id+"-t")}),a.jsx(N0,{x:12,y:12})]})}function im(e){const t=Pc(e),n=[49,68,98],r=[91,192,190],s=[255,209,102],o=t<.5?t*2:(t-.5)*2,u=t<.5?n:r,f=t<.5?r:s,p=(v,O)=>Math.round(v+(O-v)*o),[y,k,x]=[p(u[0],f[0]),p(u[1],f[1]),p(u[2],f[2])];return`rgb(${y},${k},${x})`}function Pc(e){return Math.max(0,Math.min(1,e))}function N0({x:e,y:t}){const n=[0,.25,.5,.75,1];return a.jsxs("g",{transform:`translate(${e},${t})`,children:[a.jsx("text",{x:0,y:0,fill:"#e0e6f2",fontSize:10,children:"Reliability"}),n.map((r,s)=>a.jsx("rect",{x:s*26,y:8,width:24,height:8,fill:im(r)},s)),a.jsx("text",{x:0,y:28,fill:"#a5b4d0",fontSize:9,children:"0"}),a.jsx("text",{x:26*4,y:28,fill:"#a5b4d0",fontSize:9,textAnchor:"end",children:"1"})]})}function sm(e){return e===null||!Number.isFinite(e)?"n/a":e.toFixed(1)}const P0="https://api.weatherapi.com/v1";async function T0({lat:e,lon:t}){var p,y,k,x,v,O,B,N,H,g,w,j,I,$,D;const n=tm();if(!n)throw new Error("Weather API key missing (set VITE_WEATHER_API_KEY).");const r=new URLSearchParams({key:n,q:`${e},${t}`,aqi:"no"}),s=`${P0}/current.json?${r.toString()}`,o=await fetch(s);if(!o.ok)throw new Error(`Weather request failed (${o.status})`);const u=await o.json();if(u!=null&&u.error)throw new Error(u.error.message??"Weather provider returned an error.");return{location:[(p=u==null?void 0:u.location)==null?void 0:p.name,(y=u==null?void 0:u.location)==null?void 0:y.region,(k=u==null?void 0:u.location)==null?void 0:k.country].filter(W=>W&&W.trim()).map(W=>W.trim()).join(", "),condition:((v=(x=u==null?void 0:u.current)==null?void 0:x.condition)==null?void 0:v.text)??"Unknown",temperatureC:Number(((O=u==null?void 0:u.current)==null?void 0:O.temp_c)??0),temperatureF:Number(((B=u==null?void 0:u.current)==null?void 0:B.temp_f)??0),feelsLikeC:Number(((N=u==null?void 0:u.current)==null?void 0:N.feelslike_c)??0),feelsLikeF:Number(((H=u==null?void 0:u.current)==null?void 0:H.feelslike_f)??0),humidity:Number(((g=u==null?void 0:u.current)==null?void 0:g.humidity)??0),windKph:Number(((w=u==null?void 0:u.current)==null?void 0:w.wind_kph)??0),windMph:Number(((j=u==null?void 0:u.current)==null?void 0:j.wind_mph)??0),updatedAt:((I=u==null?void 0:u.current)==null?void 0:I.last_updated)??"",iconUrl:(D=($=u==null?void 0:u.current)==null?void 0:$.condition)!=null&&D.icon?M0(u.current.condition.icon):void 0}}function M0(e){return!e||e.startsWith("http")?e:e.startsWith("//")?`https:${e}`:`https://${e.replace(/^\/+/,"")}`}async function F0(e,t=5){const{token:n}=Nc();if(!n)throw new Error("Mapbox token missing (set VITE_MAPBOX_TOKEN).");const r=new URL(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json`);r.searchParams.set("access_token",n),r.searchParams.set("limit",String(t)),r.searchParams.set("autocomplete","true");const s=await fetch(r.toString());if(!s.ok)throw new Error(`Mapbox geocoding failed (${s.status})`);const o=await s.json();return(Array.isArray(o==null?void 0:o.features)?o.features:[]).filter(f=>Array.isArray(f==null?void 0:f.center)&&f.center.length===2).map(f=>({id:String(f.id??f.place_name??Math.random()),placeName:String(f.place_name??"Unknown place"),coordinates:[Number(f.center[0]),Number(f.center[1])]}))}function z0(e){const{token:t,style:n}=Nc();if(!t)return null;const{center:r,zoom:s=11,width:o=480,height:u=320,styleId:f}=e,[p,y]=r,k=Cf(o,1,1280),x=Cf(u,1,1280),v=A0(n??f),O=`pin-l+ff4f00(${p.toFixed(4)},${y.toFixed(4)})`,B=`${Math.round(k)}x${Math.round(x)}`;return`https://api.mapbox.com/styles/v1/${v}/static/${O}/${p.toFixed(4)},${y.toFixed(4)},${s}/${B}?access_token=${t}`}function A0(e){const t=e==null?void 0:e.trim();return t?t.includes("/")?t:`mapbox/${t}`:"mapbox/streets-v12"}function Cf(e,t,n){return typeof e!="number"||Number.isNaN(e)?t:Math.min(Math.max(e,t),n)}const I0={lat:38.0293,lon:-78.4767},wo="°";function D0(){const e=J.useMemo(()=>({weather:nm(),map:rm()}),[]),[t,n]=J.useState(I0),[r,s]=J.useState({loading:!1,error:null,data:null}),o=r.data?`${r.data.temperatureC.toFixed(1)}${wo}C / ${r.data.temperatureF.toFixed(1)}${wo}F`:null,u=r.data?`${r.data.feelsLikeC.toFixed(1)}${wo}C / ${r.data.feelsLikeF.toFixed(1)}${wo}F`:null,[f,p]=J.useState(""),[y,k]=J.useState([]),[x,v]=J.useState(null),O=J.useMemo(()=>z0({center:[t.lon,t.lat],zoom:11,width:480,height:320}),[t.lon,t.lat]);async function B(){if(!e.weather.configured){s(g=>({...g,error:"Weather provider not configured.",loading:!1}));return}s(g=>({...g,loading:!0,error:null}));try{const g=await T0(t);s({loading:!1,error:null,data:g})}catch(g){s({loading:!1,error:Ef(g),data:null})}}async function N(g){if(g.preventDefault(),!e.map.configured){v("Mapbox provider not configured.");return}if(!f.trim()){v("Enter a place to search.");return}v(null);try{const w=await F0(f.trim(),5);k(w),w.length===0&&v("No places found for that query.")}catch(w){v(Ef(w))}}function H(g){n({lat:g.coordinates[1],lon:g.coordinates[0]}),k([]),p(g.placeName)}return a.jsxs("div",{children:[a.jsx("h3",{children:"External Services"}),a.jsx("p",{className:"muted",children:"Use this panel to check whether Weather API and Mapbox credentials are functioning."}),a.jsxs("section",{style:{marginBottom:16},children:[a.jsx("h4",{children:"Status"}),a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:8,fontSize:14},children:[a.jsx("strong",{children:"Weather API"}),a.jsx("span",{style:{color:e.weather.configured?"#8bf28b":"#f2aa8b"},children:e.weather.hint}),a.jsx("strong",{children:"Mapbox"}),a.jsx("span",{style:{color:e.map.configured?"#8bf28b":"#f2aa8b"},children:e.map.hint})]})]}),a.jsxs("section",{style:{marginBottom:16},children:[a.jsxs("form",{onSubmit:N,style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:[a.jsx("input",{type:"text",placeholder:"Search for a place (e.g., Charlottesville)",value:f,onChange:g=>p(g.target.value),style:{flex:"1 1 220px"}}),a.jsx("button",{type:"submit",children:"Search"})]}),y.length>0&&a.jsxs("div",{style:{marginBottom:12},children:[a.jsx("div",{className:"muted",style:{marginBottom:4},children:"Select a result to update the preview:"}),a.jsx("ul",{style:{listStyle:"none",margin:0,padding:0},children:y.map(g=>a.jsx("li",{style:{marginBottom:4},children:a.jsx("button",{type:"button",onClick:()=>H(g),children:g.placeName})},g.id))})]}),a.jsx("h4",{children:"Weather Snapshot"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{children:[a.jsx("label",{children:"Latitude"}),a.jsx("input",{type:"number",step:1e-4,value:t.lat,onChange:g=>n(w=>({...w,lat:Number(g.target.value)}))})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Longitude"}),a.jsx("input",{type:"number",step:1e-4,value:t.lon,onChange:g=>n(w=>({...w,lon:Number(g.target.value)}))})]})]}),a.jsx("div",{style:{marginTop:8,display:"flex",gap:8},children:a.jsx("button",{type:"button",onClick:B,disabled:r.loading,children:r.loading?"Loading...":"Fetch current weather"})}),r.error&&a.jsx("div",{style:{marginTop:8,color:"#f8b4b4"},children:r.error}),r.data&&a.jsxs("div",{className:"card",style:{marginTop:12},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[r.data.iconUrl&&a.jsx("img",{src:r.data.iconUrl,width:48,height:48,alt:r.data.condition}),a.jsxs("div",{children:[a.jsx("strong",{children:r.data.location||"Unknown location"}),a.jsxs("div",{className:"muted",children:["Updated: ",r.data.updatedAt]})]})]}),a.jsxs("div",{style:{display:"flex",gap:16,marginTop:8,flexWrap:"wrap"},children:[a.jsx(Wi,{label:"Temp",value:o??"--"}),a.jsx(Wi,{label:"Feels like",value:u??"--"}),a.jsx(Wi,{label:"Humidity",value:`${r.data.humidity.toFixed(0)}%`}),a.jsx(Wi,{label:"Wind",value:`${r.data.windKph.toFixed(1)} kph (${r.data.windMph.toFixed(1)} mph)`}),a.jsx(Wi,{label:"Condition",value:r.data.condition})]})]})]}),a.jsxs("section",{children:[a.jsx("h4",{children:"Mapbox Preview"}),x&&a.jsx("div",{style:{marginBottom:8,color:"#f8b4b4"},children:x}),O?a.jsx("img",{src:O,alt:"Mapbox static preview",style:{maxWidth:"100%",borderRadius:6,border:"1px solid #314462"}}):a.jsx("div",{className:"muted",children:e.map.hint})]})]})}function Wi({label:e,value:t}){return a.jsxs("div",{children:[a.jsx("div",{className:"muted",style:{fontSize:12},children:e}),a.jsx("div",{style:{fontWeight:600},children:t})]})}function Ef(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unexpected error"}const O0=["Simulate","Runs","Alerts","Shelters","Env","Services"];function wn(e,t){return{seed:e.seed,scenario:e.scenario,baselineReliability:e.baselineReliability,environment:e.environment,regionStats:e.regionStats,timeline:e.timeline,issuedAlerts:e.issuedAlerts,generatedAt:t,info:e.info}}function L0(){const{setSnapshot:e,snapshot:t}=Cc(),[n,r]=J.useState(!1),s=J.useMemo(()=>({scenario:"Urban",policy:"PriorityFresh",cacheSize:128,alerts:400,reliability:.85,seed:"demo",durationSec:900,queryRatePerMin:60,wS:2,wU:3,wF:4,pushRateLimitPerMin:0,pushDedupWindowSec:120,pushThreshold:.5,pfExplorationEpsilon:.05,deliveryRetryIntervalSec:0,deliveryMaxAttempts:1,replicates:1,seedMode:"Fixed"}),[]),[o,u]=J.useState(s),[f,p]=J.useState(null),[y,k]=J.useState("Simulate"),[x,v]=J.useState(20);async function O($){r(!0);try{const D=Math.max(1,$.replicates??1),W=$.seedMode??"Fixed",Y=Math.floor(Date.now()/1e3);if(D>1||W!=="Fixed"){const ee=u0($,{replicates:D,seedMode:W});p(ee);const le=ee.runs[ee.runs.length-1];if(le){await Sr(le.result.deliveredAlerts,Y);const pe=`${Date.now().toString(36)}-${Math.random().toString(16).slice(2,8)}`;for(const[Ne,_e]of ee.runs.entries())await Hr(Qr(_e.result,{id:`${pe}-${Ne+1}`,scenario:$.scenario,policy:$.policy,seed:_e.seed,seedMode:W,replicateIndex:Ne+1,replicates:D,batchId:pe,timestamp:Date.now()+Ne}));e(wn(le.result,Date.now()))}}else{const ee=Ec($);p({kind:"single",result:ee}),await Sr(ee.deliveredAlerts,Y),await Hr(Qr(ee,{id:`${Date.now()}`,scenario:$.scenario,policy:$.policy,seedMode:W,replicateIndex:1,replicates:1,seed:ee.seed})),e(wn(ee,Date.now()))}}finally{r(!1)}}async function B($,D){var W;r(!0);try{const Y=e0(D);p(Y);const ee=Y.runs[Y.runs.length-1];if(ee){const le=Math.floor(Date.now()/1e3);await Sr(((W=ee.comparison.runs[ee.comparison.runs.length-1])==null?void 0:W.result.deliveredAlerts)??[],le),e(wn(ee.comparison.runs[ee.comparison.runs.length-1].result,Date.now()))}}finally{r(!1)}}async function N($){r(!0);try{const D=Cs($);p(D);const W=Math.floor(Date.now()/1e3),Y=`multi-policy-${Date.now().toString(36)}-${Math.random().toString(16).slice(2,8)}`,ee=D.runs[D.runs.length-1];ee&&(await Sr(ee.result.deliveredAlerts,W),e(wn(ee.result,Date.now())));for(const[le,{policy:pe,result:Ne}]of D.runs.entries())await Hr(Qr(Ne,{id:`${Y}-${pe}`,scenario:$.scenario,policy:pe,seed:Ne.seed,seedMode:"Fixed",replicateIndex:le+1,replicates:D.runs.length,batchId:Y,timestamp:D.timestamp+le}))}finally{r(!1)}}async function H($){r(!0);try{const D=Wg($);p(D);const W=Math.floor(Date.now()/1e3),Y=`device-comparison-${Date.now().toString(36)}-${Math.random().toString(16).slice(2,8)}`,ee=D.comparisons[D.comparisons.length-1];if(ee){const pe=ee.policyComparison.runs[ee.policyComparison.runs.length-1];pe&&(await Sr(pe.result.deliveredAlerts,W),e(wn(pe.result,Date.now())))}let le=0;for(const{deviceProfile:pe,policyComparison:Ne}of D.comparisons)for(const{policy:_e,result:Le}of Ne.runs)await Hr(Qr(Le,{id:`${Y}-${pe.name.replace(/\s+/g,"-")}-${_e}`,scenario:$.scenario,policy:_e,seed:Le.seed,seedMode:"Fixed",replicateIndex:le+1,replicates:D.comparisons.length*Ne.runs.length,batchId:Y,timestamp:D.timestamp+le})),le++}finally{r(!1)}}async function g($){r(!0);try{const D=Hg($);p(D);const W=Math.floor(Date.now()/1e3),Y=`network-comparison-${Date.now().toString(36)}-${Math.random().toString(16).slice(2,8)}`,ee=D.comparisons[D.comparisons.length-1];if(ee){const pe=ee.policyComparison.runs[ee.policyComparison.runs.length-1];pe&&(await Sr(pe.result.deliveredAlerts,W),e(wn(pe.result,Date.now())))}let le=0;for(const{networkProfile:pe,policyComparison:Ne}of D.comparisons)for(const{policy:_e,result:Le}of Ne.runs)await Hr(Qr(Le,{id:`${Y}-${pe.name.replace(/\s+/g,"-")}-${_e}`,scenario:$.scenario,policy:_e,seed:Le.seed,seedMode:"Fixed",replicateIndex:le+1,replicates:D.comparisons.length*Ne.runs.length,batchId:Y,timestamp:D.timestamp+le})),le++}finally{r(!1)}}async function w($){r(!0);try{const D=Qg($);p(D);const W=Math.floor(Date.now()/1e3),Y=`combined-comparison-${Date.now().toString(36)}-${Math.random().toString(16).slice(2,8)}`,ee=D.comparisons[D.comparisons.length-1];if(ee){const pe=ee.policyComparison.runs[ee.policyComparison.runs.length-1];pe&&(await Sr(pe.result.deliveredAlerts,W),e(wn(pe.result,Date.now())))}let le=0;for(const{deviceProfile:pe,networkProfile:Ne,policyComparison:_e}of D.comparisons)for(const{policy:Le,result:Ze}of _e.runs)await Hr(Qr(Ze,{id:`${Y}-${pe.name.replace(/\s+/g,"-")}-${Ne.name.replace(/\s+/g,"-")}-${Le}`,scenario:$.scenario,policy:Le,seed:Ze.seed,seedMode:"Fixed",replicateIndex:le+1,replicates:D.comparisons.length*_e.runs.length,batchId:Y,timestamp:D.timestamp+le})),le++}finally{r(!1)}}function j($){e(wn($,Date.now())),k("Env")}function I($){if(!$.fullResults)return;const D=$.fullResults;p({kind:"single",result:D}),u(W=>({...W,scenario:D.scenario,policy:$.policy,reliability:D.baselineReliability,seed:D.seed})),e(wn(D,$.timestamp)),k("Env")}return a.jsxs("div",{className:"app",children:[a.jsx("header",{children:a.jsx("h3",{children:"AWARE EAS Simulation"})}),a.jsx("div",{style:{padding:12,display:"flex",gap:8},children:O0.map($=>a.jsx("button",{onClick:()=>k($),style:{background:y===$?"var(--accent)":"#203256",color:y===$?"#042c2c":"#d7e1f7"},children:$},$))}),t&&a.jsxs("div",{className:"muted",style:{margin:"0 12px 12px",fontSize:13},children:["Live environment: ",t.scenario," | seed - ",t.seed," | baseline rel ",t.baselineReliability.toFixed(2)]}),a.jsxs("main",{children:[y==="Simulate"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx(ag,{options:o,onChange:u,onRun:O,onRunMultiPolicy:N,onRunDeviceComparison:H,onRunNetworkComparison:g,onRunCombinedComparison:w,randomCount:x,onChangeRandomCount:v,onRunRandomizedMultiPolicy:B,running:n})}),a.jsx("div",{className:"card",children:a.jsx(l0,{result:f,onShowEnvironment:j})})]}),y==="Runs"&&a.jsx("div",{className:"card",style:{gridColumn:"1 / span 2"},children:a.jsx(g0,{onReplay:I})}),y==="Alerts"&&a.jsx("div",{className:"card",style:{gridColumn:"1 / span 2"},children:a.jsx(S0,{})}),y==="Shelters"&&a.jsx("div",{className:"card",style:{gridColumn:"1 / span 2"},children:a.jsx(k0,{})}),y==="Env"&&a.jsx("div",{className:"card",style:{gridColumn:"1 / span 2"},children:a.jsx(C0,{scenario:o.scenario,baselineReliability:o.reliability})}),y==="Services"&&a.jsx("div",{className:"card",style:{gridColumn:"1 / span 2"},children:a.jsx(D0,{})})]})]})}async function Sr(e,t){e.length!==0&&await y0(e.map(n=>({id:n.id,eventType:n.eventType,severity:n.severity,urgency:n.urgency,issuedAt:t+n.issuedAt,expiresAt:t+n.issuedAt+n.ttlSec,headline:n.headline,instruction:n.instruction,sizeBytes:n.sizeBytes,geokey:n.geokey,regionId:n.regionId})))}function Qr(e,t){return{id:t.id,scenario:t.scenario,policy:t.policy,seed:t.seed,timestamp:t.timestamp??Date.now(),metrics:e.metrics,samplesCount:e.timeline.length,fullResults:e,batchId:t.batchId,seedMode:t.seedMode,replicateIndex:t.replicateIndex,replicates:t.replicates}}function B0(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:o,onRegisterError:u}=e;let f,p;const y=async(x=!0)=>{await p};async function k(){if("serviceWorker"in navigator){if(f=await Wp(async()=>{const{Workbox:x}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:x}},[]).then(({Workbox:x})=>new x("/sw.js",{scope:"/",type:"classic"})).catch(x=>{u==null||u(x)}),!f)return;f.addEventListener("activated",x=>{(x.isUpdate||x.isExternal)&&window.location.reload()}),f.addEventListener("installed",x=>{x.isUpdate||r==null||r()}),f.register({immediate:t}).then(x=>{o?o("/sw.js",x):s==null||s(x)}).catch(x=>{u==null||u(x)})}}return p=k(),y}B0({immediate:!0});const Nf=document.getElementById("root");Nf&&Kp(Nf).render(a.jsx(Yi.StrictMode,{children:a.jsx(dg,{children:a.jsx(L0,{})})}));export{Yi as R,ud as c,Pf as g,a as j,J as r};
